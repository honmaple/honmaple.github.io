<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>honmaple's blog · 风落花语风落天，花落风雨花落田.</title>
      <link href="https://static.honmaple.com/static/css/lib.min.css" rel="stylesheet">
        <link href="https://honmaple.me/theme/css/style.min.css" rel="stylesheet">
  </head>
  <body>
    <div class="particles-js" id="particles-js"></div>
    <div class="scrollbar"></div>
    <div class="wrap">
      <div class="main">
<nav class="navbar navbar-default">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-header" aria-expanded="false">
      <span class="sr-only"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://honmaple.me">
      <img class="navbar-logo" src="https://static.honmaple.com/images/header/header-logo.png" alt="楓">
    </a>
      <p class="navbar-text">—— 风落花语风落天，花落风雨花落田.</p>
  </div>
  <div class="collapse navbar-collapse" id="nav-header">
    <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="https://honmaple.me/category/life/index.html" >代码人生</a>
            <ul class="dropdown-menu">
                <li><a href="https://honmaple.me/category/coding/index.html">分享世界</a></li>
                <li><a href="https://honmaple.me/category/love/index.html">你不懂我</a></li>
                <li><a href="https://honmaple.me/category/recall/index.html">我不怪你</a></li>
            </ul>
          </li>
          <li ><a href="https://honmaple.me/category/linux/index.html">字符艺术</a></li>
          <li ><a href="https://honmaple.me/category/python/index.html">人生苦短</a></li>
          <li ><a href="https://honmaple.me/category/security/index.html">极客安全</a></li>
      <li class="dropdown">
        <a href="https://honmaple.me/archives.html">文章归档</a>
        <ul class="dropdown-menu">
          <li><a href="https://honmaple.me/tags.html">标签</a></li>
          <li><a href="https://honmaple.me/categories.html">分类</a></li>
          <li><a href="https://honmaple.me/authors.html">作者</a></li>
        </ul>
      </li>
      <li><a href="https://honmaple.me/pages/about.html">关于</a></li>
    </ul>
    <form action="https://honmaple.me/search.html" class="navbar-form navbar-right" style="margin-top:10px;">
      <div class="form-group has-feedback">
        <input class="form-control input-sm" id="search" name="q" type="text" onfocus="this.placeholder='搜索'" onblur="this.placeholder=''">
        <i class="fa fa-search form-control-feedback"></i>
      </div>
    </form>
  </div>
</nav>          <ul class="entry-list" style="margin-top:0;">
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/03/日上三竿与夜半三更.html" rel="bookmark" title="Permalink to 日上三竿与夜半三更">日上三竿与夜半三更</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-03-25">
    <i class="fa fa-calendar-o"></i>
    日 25 三月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/recall/index.html">recall</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/life/index.html">life</a>
        <a href="https://honmaple.me/tag/poem/index.html">poem</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            

<div style="text-align: center;">
<p class="verse">
日上三竿犹在眠<br/>不是神仙<br/>胜似神仙<br/><br/>很舒服
</p>
</div>


<div style="text-align: center;">
<p class="verse">
夜半三更竿犹在醒<br/>不是鬼<br/>胜似鬼<br/><br/>很难受
</p>
</div>


<div style="text-align: center;">
<p class="verse">
日上三竿犹在醒<br/>不是鬼<br/>胜似鬼<br/><br/>很难受
</p>
</div>


<div style="text-align: center;">
<p class="verse">
夜半三更竿犹在眠<br/>不是神仙<br/>胜似神仙<br/><br/>很舒服
</p>
</div>

          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/03/日上三竿与夜半三更.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/03/为pelican添加文章加密功能.html" rel="bookmark" title="Permalink to 为pelican添加文章加密功能">为pelican添加文章加密功能</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-12-21">
    <i class="fa fa-calendar-o"></i>
    六 17 三月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/python/index.html">Python</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/python/index.html">python</a>
        <a href="https://honmaple.me/tag/pelican/index.html">pelican</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            
<div class="entry-encrypt">
<div class="form-group has-feedback">
    <input type="password" class="form-control input-sm" id="entry-decrypt-password" placeholder="请输入文章密码">
    <i class="fa fa-key form-control-feedback entry-decrypt"></i>
    <span class="help-block">这是一篇加密的文章，密码是蟒蛇英文</span>
</div>
<div class="entry-encrypt-content">
gAAAAABarRYGOXCd2_j79QXUtNz2n72liJK5xKgPpPryozTqyos2VLQ_2IOEr8rh2yQJCoEZXViKzburcD9IumMTcvkCZ9oBfbQLx4Ub0pH3dlXvDkpyFIpdy9qDy_BSS2b-fcZLUNVQlSShxMdpezmzn--s7EOSSqkWyNc2g0ZQrmFgzB_g1b89BmQX2sJZ21OHrel4G2HyH6K4OlZoqB6F6sDPsQoIxjxy1MJ9Y87MgtjfgkHGOaoMvZZZemVrU80ILP-fgzbbJGfz6w-qIXcN3cOyq1Kkz1M216dqVcQBHDAPYX6coMB0TKWX6y0R3P-rhodCD_a2mV2JM6nVLDPrGWZgI-lOFVDIDg4dfRUK7u-E4a6evoBVtXgbVIejOa9s46IkKyyu83GxB9bUt7C1OnPVdRHE5CSShrBv1KKEROUulKbD-2GyP5ChXk1nFLcAzUE7NZTdKipv9hGWUBoyXdAB6bxcfHOj9M3BzgQyqlyldzGQSwP0fVsu2dUIkqWMXUJcAKZSdtO1DvuZ5mtdfetuMhMdQTzyR68NaXK2JnzHUADkdVbARQrpC_EoDTM0pTnFODVMsj7QQs3LCqCPv5kFV-MY6MHFVQBS0lUHZNeCwgkeutAkmtUn-7KhYF540o2eECB1I__oRTDoAsYiONgXcYSJUdkvGGjgjFchNuuApmU2b_lHdWgRT9h537eT6Jcy0v-ZYsnbHcmYCvXMbMFpcFsq3sh-70k9aspFrvkYioCVJxBPmqRpn4R2wPmJPNXruJpjUmr_g9BKDdfMKV5t-A6wloF2X4hZkcC3suBqMJA6Wqd_ph83j_nlYC5TN-_bZSA5uJNQKxAGCODCjJ6HZvbY-adsG-z_4x9Op11T3C_jzPeTM1VGipr5reIkKYoZRTuxFd8wluzQkN96He9un5dy37iMRLnbV-B3OXHAzJNFZfCUuWs1QVhAqVf9kdiIAi_SBQTWuxR9hFtehRM5xh__2Wc89EvKCBqeuipfEceXAA4uOmupYsrofLZljbEO6abTmrm1WMW8w_7iqOw1DUPSh0OHSWv7uyDS4duDeRN8cCSXtaNIhzkLnh9KHIfvWxzRi9tzA0MXVlQB1-dnkmhd7b_SuoGD7trY-3er1MZveM1x0cuHoPh4wSp1fgbAZEJKauFG7hMk3BSjttTZH9rMiSWn3KfpNTURYqXwip14Qe54I4dXwY5KGLfRH8UXyp1FZ6PZW6GbDEBRrYti-eO8Z_3ZqxLZotONoH62-fCc5QNFohDikQLocUj6SZDlOd77UcU-UpDMTLE6Uz8MctGe7U3o1tLAjlBzJ2Uiw3P4vnNCeHBCa3XIR-z92g73GlQkk4hDJcvjIF5s5NIhk_4bexxp1RnW5vY3McxgqpieAqgFku8Bja6WDEbBoC3POaGJT9v4PKWp1gd4boDw710SzECTX0Q-wAlGWx47rmPesli3jKIb7K8630q179GSyvTB0hjdU-LEldeQpreew4MjnWVUAWy4zIp-C-z9BCyxUvnUtsReIuAUKpBKMrkuf2oVQyu_jruhVw5rX0Zr5fYWI-25pBEfqON8n4jBDFsAdiGKVaVDl6HT-2EX64GF8X9xzXC-e6RwMQpRVXGKdR0TYEcKP_jabwjJjKjGmnz19dMicM9maWXZZVAXzX-xTshfTkoDcpPxQFIDtT6monMmgRRztoS3iPg_XJ9O8kfSg9-lLJ2NMUPfxgQ74Lm-da3YT4ryaCG5PD31bc03HbXAvr29wMmTfkAbvxHYXvOiVMR2wUu3_zNpwbIEd22P6IMpAJ2yKvEyddl81IKb5EvfCHN8RefRmDbtKAutT0CgmMWjsPBrtGkjmgBHdClhvf_EtumjqWko-N4bwAl9CGjI8D5xTeaHDEWHADi5zVcQekmiG5oP8HXKd-PGsI6J2EEzORr1WAe-PF_KObA5QPJ5bSu45jop_qRbSD96d3LXMG1fTtLSjYDV5NoUzvUbwW5-HAlDGF7r7L4UB-5N2sMy-Xi-5DkOiFGwVLIW-tV7V7sXNu2t2z_tl_4YVQulD6Su4OXrjYUaLP5jaoihMqWgAeN5eIqFwKmSVyiQ25QqOxsN6lHK5ttaiDxP6qVAbn_d9jtxj6cltDeCKNOvuZG2qI-nmlNoS8TIoA_bDZRvc2_jTgTsYbPbDziPsBeuCrC6U9oX6acvpAXCzx-eSIiiwO7zG3QPjVxd1890iGNYD5Hm9eqR1mN7Fg2sqyk3QT0Nsg4AtJIWoDx3LgJyO4eEHWoWu9zg6Blh78ATfn3r0BdJSd47kGddX72y41VfmrzZb1x7BG87GkbCybv9XIM41RaTYjpOBVNSOzitN3Al971EaGBecCxM4Hx4uBHOFuTopJLG4lQt3MfS38TbyaHHTLQF-JNReBPj59YlrUW41FNcrE1_jdI2kYiT5HXuNOcdZIox_9qvaS9oUEEHerZCYfP0vtpXJcWB3tK2gKGiJFTYhAJbZ2Z9jvW6QYsdiNc-TDoGK_XvrdTC_b80TpJ0nWvAwV2scsF1MQ1LBHqmBu6pRpKSblw9NI3SE57MxR6bxgEtX2kxkETcbm_-y8pKUJ3bCOHFe5ZkpwKoN7NS1y2FJpcXZwp572UEzE9HkIw211fpU-haINiqwksuvBYVDot466y-U58orKZmyuM4jpW6vUOtbafQzlg64_wVDVahI98vE8sYkN6GEyKpvsIFBg==
</div>
</div>

          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/03/为pelican添加文章加密功能.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/03/git笔记.html" rel="bookmark" title="Permalink to git笔记">git笔记</a></h1>
<header class="entry-info">
  <span title="Updated at 2019-10-19">
    <i class="fa fa-calendar-o"></i>
    四 01 三月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/linux/index.html">Linux</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/linux/index.html">linux</a>
        <a href="https://honmaple.me/tag/git/index.html">git</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-759da78116">git修改提交作者和邮箱</a></li>
<li><a href="#org-d0a021b265">合并多个commit历史</a></li>
<li><a href="#org-0496bba071">git删除远程分支已经被删除的本地分支</a></li>
<li><a href="#org-c441660138">合并pull request</a></li>
<li><a href="#org-6b970e402a">fork版本保持与上游一致</a></li>
</ul>
</div></div>


<h2 id="org-759da78116">git修改提交作者和邮箱</h2>
<ul>
<li>提交前
<p>如果代码未提交,则可以</p>
<div class="highlight"><pre><span></span>git config  user.name <span class="s2">&quot;Author Name&quot;</span>
git config  user.email <span class="s2">&quot;Author Email&quot;</span>
</pre></div>

</li>
<li>提交后
<p>如果代码已经提交,或者已经push到remote(只能修改最近一次提交)</p>
<div class="highlight"><pre><span></span>git commit --amend --author<span class="o">=</span><span class="s2">&quot;NewAuthor &amp;lt;NewEmail@address.com&amp;gt;&quot;</span>
</pre></div>


<p>修改全部<b>commit</b>,需要使用脚本 <a href="https://help.github.com/articles/changing-author-info/">参考github官方</a></p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

git filter-branch --env-filter <span class="s1">&#39;</span>
<span class="s1">OLD_EMAIL …</span></pre></div></li></ul>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/03/git笔记.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/02/docker笔记.html" rel="bookmark" title="Permalink to docker笔记">docker笔记</a></h1>
<header class="entry-info">
  <span title="Updated at 2020-07-24">
    <i class="fa fa-calendar-o"></i>
    五 23 二月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/linux/index.html">Linux</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/linux/index.html">linux</a>
        <a href="https://honmaple.me/tag/docker/index.html">docker</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-01a24100bb">ubuntu安装docker</a></li>
<li><a href="#org-5ba5904cda">docker删除硬盘残留的文件</a></li>
<li><a href="#org-5e01916a5b">docker构建时禁用缓存</a></li>
<li><a href="#org-3af3139ea6">docker配置国内源</a></li>
<li><a href="#org-ee35a40995">docker权限</a></li>
<li><a href="#org-4d7623dde6">常见问题FAQ</a>
<ul>
<li><a href="#org-c223d726bf">centos安装docker使用aliyun源</a></li>
<li><a href="#org-8d7e015f29">docker无法pull镜像</a></li>
<li><a href="#org-5bf5740bc3">docker挂载磁盘后文件不可写</a></li>
<li><a href="#org-c50e056495">pip安装docker-compose时无法安装subprocess32</a></li>
<li><a href="#org-93ee6c9d8e">error storing credentials - err: exit status 1</a></li>
</ul></li>
</ul>
</div></div>


<h3 id="org-01a24100bb">ubuntu安装docker</h3>
<p>基本安装方式在官方文档里有写，但使用官方镜像源速度太慢，改为使用国内镜像</p>
<div class="highlight"><pre><span></span>curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="p">|</span> sudo apt-key add -
apt-key fingerprint 0EBFCD88
add-apt-repository <span class="s2">&quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce …</span></pre></div>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/02/docker笔记.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/02/flask_maple文档.html" rel="bookmark" title="Permalink to flask_maple文档">flask_maple文档</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-02-23">
    <i class="fa fa-calendar-o"></i>
    五 23 二月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/python/index.html">Python</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/python/index.html">python</a>
        <a href="https://honmaple.me/tag/flask/index.html">flask</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-087db63ab1">安装</a></li>
<li><a href="#org-5a24e1c8d8">用户系统</a></li>
<li><a href="#org-560165a6d7">权限</a>
<ul>
<li><a href="#org-0e2d3a3c09">使用</a></li>
<li><a href="#org-cc0fd376bb">权限缓存</a></li>
</ul></li>
<li><a href="#org-21f1e88275">登录</a>
<ul>
<li><a href="#org-0e2d3a3c09">使用</a></li>
<li><a href="#org-26b238cb1d">注意事项</a></li>
</ul></li>
<li><a href="#org-3e3d59a258">验证码</a>
<ul>
<li><a href="#org-0e2d3a3c09">使用</a></li>
<li><a href="#org-d7d7ce790b">配置</a></li>
</ul></li>
<li><a href="#org-128e9ff023">错误处理</a></li>
<li><a href="#org-9ed627bcf6">邮箱</a></li>
<li><a href="#org-1f515561b6">表单</a></li>
<li><a href="#org-f4dbbc63a5">数据库</a>
<ul>
<li><a href="#org-6304d7131d">基本查询(已实现)</a></li>
<li><a href="#org-5a14fa9f1a">关系查询</a></li>
<li><a href="#org-295c71ff98">其它</a></li>
</ul></li>
<li><a href="#org-0aa2f4ad8a">序列化</a>
<ul>
<li><a href="#org-06f4a6e00e">多个实例</a></li>
<li><a href="#org-5a80709d39">单个实例</a></li>
<li><a href="#org-9d0b64116a">排除字段</a></li>
<li><a href="#org-698cb4c6b7">仅包括字段</a></li>
<li><a href="#org-3df6e98319">关系查询深度</a></li>
<li><a href="#org-934a46ccd6">额外的字段</a></li>
<li><a href="#org-c493338e8c">自定义</a></li>
</ul></li>
<li><a href="#org-39231438a7">中间件</a></li>
<li><a href="#org-4de50894b8">日志</a></li>
<li><a href="#org-fc4a695f02">App</a>
<ul>
<li><a href="#org-0e2d3a3c09">使用</a></li>
<li><a href="#org-d7d7ce790b">配置</a></li>
</ul></li>
<li><a href="#org-89ec4ec2bf">Bootstrap</a>
<ul>
<li><a href="#org-0e2d3a3c09">使用</a></li>
<li><a href="#org-06d0f38dd2">模板</a></li>
<li><a href="#org-d7d7ce790b">配置</a></li>
</ul></li>
<li><a href="#org-24071b57a1">Redis</a>
<ul>
<li><a href="#org-0e2d3a3c09">使用</a></li>
<li><a href="#org-d7d7ce790b">配置</a></li>
</ul></li>
</ul>
</div></div>



<h3 id="org-087db63ab1">安装</h3>
<p>To install Flask-Maple:</p>
<div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">flask …</span></pre></div>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/02/flask_maple文档.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/01/lua笔记.html" rel="bookmark" title="Permalink to lua笔记">lua笔记</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-12-25">
    <i class="fa fa-calendar-o"></i>
    一 29 一月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/coding/index.html">coding</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/lua/index.html">lua</a>
        <a href="https://honmaple.me/tag/coding/index.html">coding</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-9615043096">lua分割字符串</a></li>
</ul>
</div></div>


<h3 id="org-9615043096">lua分割字符串</h3>
<div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">ngx_find</span>    <span class="o">=</span> <span class="n">ngx</span><span class="p">.</span><span class="n">re</span><span class="p">.</span><span class="n">find</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">split</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">sep</span> <span class="p">,</span> <span class="n">count</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="ow">or</span> <span class="o">-</span><span class="mi">1</span>

    <span class="kd">local</span> <span class="n">nfield</span><span class="p">,</span> <span class="n">nstart</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
    <span class="kd">local</span> <span class="n">nfirst</span><span class="p">,</span><span class="n">nlast</span> <span class="o">=</span> <span class="nb">string.find</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">sep</span><span class="p">)</span>
    <span class="c1">-- local nfirst,nlast = ngx_find(str, sep, &quot;jo&quot;)</span>
    <span class="kr">while</span> <span class="n">nfirst</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">~=</span> <span class="mi">0</span> <span class="kr">do</span>
        <span class="n">t</span><span class="p">[</span><span class="n">nfield …</span></pre></div>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/01/lua笔记.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/01/emacs自动更新文件头.html" rel="bookmark" title="Permalink to emacs自动更新文件头">emacs自动更新文件头</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-01-14">
    <i class="fa fa-calendar-o"></i>
    二 09 一月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/linux/index.html">Linux</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/linux/index.html">linux</a>
        <a href="https://honmaple.me/tag/emacs/index.html">emacs</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-a1b23f05ee">自动更新Last Updated</a></li>
<li><a href="#org-4c33ac2dba">自动更新Filename</a></li>
<li><a href="#org-b93404e8d6">自动更新Email</a></li>
</ul>
</div></div>



<p>前面已经说过，可以使用<b>auto-insert</b>自动添加文件头，今天来说一说自动更新文件头，比如说每次保存时自动更新<b>last updated</b>字段</p>


<h3 id="org-a1b23f05ee">自动更新Last Updated</h3>
<p>如果使用的是header2,直接设置相关的变量就可，假如使用的是<b>auto-insert</b>，同样也可以使用emacs内置的<b>time-stamp</b>对Last Updated进行自动更新</p>

<p>time-stamp默认使用<code>Time-stamp:</code>,如果要对<code>Last Updated</code>进行自动更新，只需要简单的设置</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="k">setq</span> <span class="nv">time-stamp-active</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">time-stamp-line-limit</span> <span class="mi">11</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">time-stamp-start</span> <span class="s">&quot;[lL]ast[ -][uU]pdate[ \t]*:?&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">time-stamp-end</span> <span class="s">&quot;\n …</span></pre></div>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/01/emacs自动更新文件头.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/01/emacs自动添加文件头.html" rel="bookmark" title="Permalink to emacs自动添加文件头">emacs自动添加文件头</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-03-16">
    <i class="fa fa-calendar-o"></i>
    一 08 一月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/linux/index.html">Linux</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/linux/index.html">linux</a>
        <a href="https://honmaple.me/tag/emacs/index.html">emacs</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-480eb10875">基础使用</a></li>
<li><a href="#org-880a46f7c3">自定义文件头</a></li>
<li><a href="#org-35fa7878ea">提取文件头公共信息</a></li>
</ul>
</div></div>



<p>想要在emacs中添加文件头有好几种方法:</p>
<ul>
<li>直接手打</li>
<li>使用模板yasnippet</li>
<li>使用header2</li>
<li>使用内置的package <b>auto-insert</b>
</li>
</ul>
<p>header2可能是最方便的一种自动添加文件头的方式，但我之前使用过，想要自定义自己想要的内容很难，而且白白浪费header2的功能</p>

<p>今天主要说一说emacs内置里<b>auto-insert</b>,使用它在创建文件时自动添加文件头信息</p>

<h3 id="org-480eb10875">基础使用</h3>
<p>直接<code>(auto-insert-mode)</code>
并且设置</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">setq</span> <span class="n">auto</span><span class="o">-</span><span class="k">insert</span><span class="o">-</span><span class="n">query</span> <span class="n">nil</span><span class="p">)</span> <span class="p">;;</span> <span class="err">不提醒</span>
</pre></div>


<h3 id="org-880a46f7c3">自定义文件头</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="k">setq</span> <span class="nv">auto-insert-alist</span>
      <span class="o">&#39;</span><span class="p">(((</span><span class="nv">python-mode</span> <span class="o">.</span> <span class="s">&quot;Python program&quot;</span><span class="p">)</span> <span class="no">nil</span>
         <span class="s">&quot;#!/usr/bin/env python\n&quot;</span>
         <span class="s">&quot;# -*- coding: utf-8 -*-\n&quot;</span>
         <span class="s">&quot;# **************************************************************************\n&quot;</span>
         <span class="s">&quot;# Copyright © &quot;</span> <span class="p">(</span><span class="nf">substring</span> <span class="p">(</span><span class="nf">current-time-string</span><span class="p">)</span> <span class="mi">-4 …</span></pre></div>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/01/emacs自动添加文件头.html">阅读全文 »</a>
          </div>
        </article></li>
        <li><article>
          <div class="entry-header">
            <h1 class="entry-title"><a href="https://honmaple.me/articles/2018/01/helm与ivy简单对比.html" rel="bookmark" title="Permalink to helm与ivy简单对比">helm与ivy简单对比</a></h1>
<header class="entry-info">
  <span title="Updated at 2018-01-26">
    <i class="fa fa-calendar-o"></i>
    六 06 一月 2018
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By <a href="https://honmaple.me/author/honmaple.html">honmaple</a>
    </span>
  <span class="entry-info-sep">|</span>
  <span>
    <i class="fa fa-folder-o"></i>
    In <a href="https://honmaple.me/category/linux/index.html">Linux</a>
  </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tag/linux/index.html">linux</a>
        <a href="https://honmaple.me/tag/emacs/index.html">emacs</a>
    </span>

</header>          </div>
          <hr class="entry-hr" />
          <div class="entry-content">
            <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents">
<ul>
<li><a href="#org-92aa2d024e">counsel-find-file</a></li>
<li><a href="#org-c7fbe9e6e9">tab键</a></li>
<li><a href="#org-009d528360">记忆多个按键</a></li>
<li><a href="#org-4afc66a170">模糊搜索</a></li>
<li><a href="#org-589cfcab62">候选词按使用频率排序</a></li>
<li><a href="#org-3637d3eb74">minibuffer</a></li>
<li><a href="#org-8fc1341bea">dired中复制或重命名文件</a></li>
<li><a href="#org-b25550811b">sudo edit</a></li>
</ul>
</div></div>



<blockquote>
<p>我为什么放弃ivy回到了helm</p>
</blockquote>

<p>说一说ivy用的不爽的地方吧</p>

<h3 id="org-92aa2d024e">counsel-find-file</h3>
<p>counsel-find-file作为最常用的命令,ivy竟然没有把默认的find-file进行覆写，比如我在dired中想要复制文件，我习惯使用<code>C-h</code>退回上一个目录，但即使我之前已经设置了</p>
<div class="highlight"><pre><span></span><span class="nb">:map</span> <span class="nv">counsel-find-file-map</span>
<span class="p">(</span><span class="s">&quot;C-h&quot;</span> <span class="o">.</span> <span class="nv">counsel-up-directory</span><span class="p">)</span>
</pre></div>

<p>但只有在使用<code>counsel-find-file</code>时有效,类似dired中是无效的，相比较于<code>helm-find-files</code>把<code>find-file</code>进行覆写，无论何时都能使用自己自定义的按键，这很不爽</p>

<h3 id="org-c7fbe9e6e9">tab键</h3>
<p>在<b>helm</b>中，tab仅作为补全使用，想要打开选中项，则需要按一下<code>enter</code>键,而在<b>ivy</b>中 …</p>
          </div>
          <div class="text-center">
            <a class="btn entry-read-more" href="https://honmaple.me/articles/2018/01/helm与ivy简单对比.html">阅读全文 »</a>
          </div>
        </article></li>
          <li>  <ul class="entry-pagination">
      <li class="prev"><a href="https://honmaple.me/index3.html">&laquo;</a></li>
         <li ><a href="https://honmaple.me/index.html">1</a></li>
         <li ><a href="https://honmaple.me/index2.html">2</a></li>
         <li ><a href="https://honmaple.me/index3.html">3</a></li>
         <li class="active"><a href="https://honmaple.me/index4.html">4</a></li>
         <li ><a href="https://honmaple.me/index5.html">5</a></li>
         <li>......</li>
         <li ><a href="https://honmaple.me/index17.html">17</a></li>
         <li ><a href="https://honmaple.me/index18.html">18</a></li>
         <li ><a href="https://honmaple.me/index19.html">19</a></li>
      <li class="next"><a href="https://honmaple.me/index5.html">&raquo;</a></li>
  </ul>
</li>
          </ul>
      </div>
    </div>
<div class="footer">
  <ul class="list-inline entry-social">
    <li><a class="entry-theme" title="Moon"><i class="fa fa-moon-o"></i></a></li>
      <li ><a href="https://honmaple.me/pages/music.html" title="Music"><i class="fa fa-music"></i></a></li>
      <li class="hidden-xs"><a href="https://honmaple.me/feeds/atom.xml" title="Feed"><i class="fa fa-feed"></i></a></li>
      <li ><a href="https://github.com/honmaple" title="GitHub"><i class="fa fa-github"></i></a></li>
      <li ><a href="https://honmaple.me/pages/travel.html" title="Camera"><i class="fa fa-camera"></i></a></li>
      <li ><a href="https://honmaple.me/pages/contact.html" title="Envelope"><i class="fa fa-envelope"></i></a></li>
  </ul>
  <ul class="list-inline copyright">
    <li class="hidden-xs">© 2015-2020 honmaple</li>
    <li class="hidden-xs">·</li>
    <li>
          <a href="https://honmaple.me/pages/friends.html">友链</a>
          <span> | </span>
          <a href="https://honmaple.me/pages/contact.html">联系</a>
          <span> | </span>
          <a href="https://honmaple.me/pages/project.html">项目</a>
          <span> | </span>
          <a href="https://honmaple.me/pages/timeline.html">时间轴</a>
    </li>
  </ul>
</div>    <div class="back-to-top back-to-top-on">
      <i class="fa fa-hand-o-up" title="back to top"></i>
    </div>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88401692-2"></script>
  <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'UA-88401692-2');
  </script>
      <script src="https://static.honmaple.com/static/js/lib.min.js"></script>
        <script src="https://honmaple.me/theme/js/script.min.js"></script>
      <script src="https://static.honmaple.com/static/js/instantclick.min.js" data-no-instant></script>
      <script data-no-instant>
       InstantClick.on('change', function() {
           if (typeof ga !== 'undefined') {
               ga('send', 'pageview', location.pathname + location.search);
           }
       });
       InstantClick.init(60);
      </script>
  </body>
</html>