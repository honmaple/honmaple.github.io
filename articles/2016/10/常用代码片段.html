<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>常用代码片段 · honmaple's blog ·  爱情诚可贵，自由价更高.</title>
    <script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <!-- <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="http://v3.bootcss.com/dist/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../theme/css/main.css" type="text/css" />
  </head>
  <body>
    <div class="particles-js" id="particles-js"></div>
    <div class="wrap">
      <div class="main">
        <div class="col-md-offset-2 col-md-8" style="padding:0;">
          <div class="col-md-offset-1 col-md-10" style="padding:0;">
            <nav class="navbar navbar-default">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-header" aria-expanded="false">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../..">honmaple's blog</a>
                <p class="navbar-text">———— 爱情诚可贵，自由价更高.</p>
              </div>
              <div class="collapse navbar-collapse" id="nav-header">
                <ul class="nav navbar-nav">
                  <li><a href="http://honmaple.org">home</a></li>
                  <li class="dropdown">
                    <a href="../../../category/life/index.html" >Life</a>
                    <ul class="dropdown-menu">
                      <li><a href="../../../category/coding/index.html">coding</a></li>
                      <li><a href="../../../category/love/index.html">love</a></li>
                      <li><a href="../../../category/recall/index.html">recall</a></li>
                    </ul>
                  </li>
                  <li ><a href="../../../category/linux/index.html">Linux</a></li>
                  <li class="active"><a href="../../../category/python/index.html">Python</a></li>
                  <li ><a href="../../../category/security/index.html">Security</a></li>
                  <li class="dropdown">
                    <a href="../../../archives.html">Archives</a>
                    <ul class="dropdown-menu">
                      <li><a href="../../../tags.html">Tags</a></li>
                      <li><a href="../../../categories.html">Categories</a></li>
                      <li><a href="../../../authors.html">Authors</a></li>
                    </ul>
                  </li>
                </ul>
                <form onsubmit="return dispatch()" class="navbar-form navbar-right" style="margin-top:10px;">
                  <div class="form-group has-feedback">
                    <input class="form-control input-sm" id="search" name="search" placeholder="搜索" type="text" value="">
                    <i class="fa fa-search form-control-feedback"></i>
                  </div>
                </form>
              </div>
            </nav>
          </div>
        </div>
        <div class="col-md-offset-2 col-md-8" style="padding:0;">
          <div class="col-md-offset-1 col-md-10" style="padding:0;">
<article>
  <h1 class="entry-title"><a href="../../../articles/2016/10/常用代码片段.html">常用代码片段</a></h1>
  <div class="entry-content entry-article">
<header class="entry-info">
  <span class="entry-info-date" title="2016-10-17T00:00:00+08:00">
    <i class="fa fa-calendar-o"></i>
    一 17 十月 2016
  </span>
  <span class="entry-info-sep hidden-xs">|</span>
  <span class="entry-info-author hidden-xs">
    <i class="fa fa-user-o"></i>
    By <a href="../../../author/honmaple.html">honmaple</a>
  </span>
  <span class="entry-info-sep">|</span>
  <span class="entry-info-category">
    <i class="fa fa-folder-o"></i>
    In <a href="../../../category/python/index.html">Python</a>
  </span>
  <span class="entry-info-sep">|</span>
  <span class="entry-info-tag">
    <i class="fa fa-bookmark-o"></i>
    tags:
    <a href="../../../tag/coding/index.html">coding</a>
  </span>
</header>    <hr class="entry-hr" />
    <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul>
<li><a href="#org-54002085">得到当天0点时间</a></li>
<li><a href="#org-13574919">python时间或时间戳与字符串转换</a></li>
<li><a href="#org-39926584">在网址中加入参数</a></li>
<li><a href="#org-91880769">urllib2发送json数据 POST请求</a></li>
<li><a href="#org-68753140">urllib2发送PUT或DELETE请求</a></li>
<li><a href="#org-5851690">Django model得到所有field name</a></li>
<li><a href="#org-84495074">python秒转化为时分秒</a></li>
<li><a href="#org-23545857">GMT时间格式</a></li>
<li><a href="#org-64701552">supervisor增加新配置不重启</a></li>
<li><a href="#org-31433333">Emacs 中evil粘贴替换的时候会复制替换的文本</a></li>
<li><a href="#org-8630853">判斷是否激活virtualenv</a></li>
<li><a href="#org-19732928">获取上个月开始与结束时间</a></li>
<li><a href="#org-42704805">获取上周星期天与星期六</a></li>
<li><a href="#org-62521433">获取上周时间(星期天零点到星期天零点)</a></li>
<li><a href="#org-78991730">设置mysql的密码小于8字符</a></li>
</ul>
</div></div>


<h1 id="org-54002085">得到当天0点时间</h1>
<div class="highlight"><pre><span></span><span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">midnight</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="p">(</span><span class="n">now</span> <span class="o">%</span> <span class="mi">86400</span><span class="p">)</span> <span class="o">+</span> <span class="n">time</span><span class="o">.</span><span class="n">timezone</span>
<span class="n">itime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">midnight</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">itime</span><span class="p">)</span>
</pre></div>

<h1 id="org-13574919">python时间或时间戳与字符串转换</h1>
<div class="highlight"><pre><span></span><span class="c1">#把datetime转成字符串</span>
    <span class="k">def</span> <span class="nf">datetime_toString</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H&quot;</span><span class="p">)</span>

    <span class="c1">#把字符串转成datetime</span>
    <span class="k">def</span> <span class="nf">string_toDatetime</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H&quot;</span><span class="p">)</span>

    <span class="c1">#把字符串转成时间戳形式</span>
    <span class="k">def</span> <span class="nf">string_toTimestamp</span><span class="p">(</span><span class="n">strTime</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">string_toDatetime</span><span class="p">(</span><span class="n">strTime</span><span class="p">)</span><span class="o">.</span><span class="n">timetuple</span><span class="p">())</span>

    <span class="c1">#把时间戳转成字符串形式</span>
    <span class="k">def</span> <span class="nf">timestamp_toString</span><span class="p">(</span><span class="n">stamp</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">stamp</span><span class="p">))</span>

    <span class="c1">#把时间戳转成datetime</span>
    <span class="k">def</span> <span class="nf">timestamp_toDatetime</span><span class="p">(</span><span class="n">stamp</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">stamp</span><span class="p">)</span>

    <span class="c1">#把datetime类型转外时间戳形式</span>
    <span class="k">def</span> <span class="nf">datetime_toTimestamp</span><span class="p">(</span><span class="n">dateTim</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">dateTim</span><span class="o">.</span><span class="n">timetuple</span><span class="p">())</span>
</pre></div>


<h1 id="org-39926584">在网址中加入参数</h1>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">urlparse</span>


<span class="k">def</span> <span class="nf">url_add_params</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; 在网址中加入新参数 &quot;&quot;&quot;</span>
    <span class="n">pr</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">urlparse</span><span class="o">.</span><span class="n">parse_qsl</span><span class="p">(</span><span class="n">pr</span><span class="o">.</span><span class="n">query</span><span class="p">))</span>
    <span class="n">query</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">prlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pr</span><span class="p">)</span>
    <span class="n">prlist</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">ParseResult</span><span class="p">(</span><span class="o">*</span><span class="n">prlist</span><span class="p">)</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://bbs.163.com&#39;</span>
    <span class="k">print</span> <span class="n">url_add_params</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="s2">&quot;bbs&quot;</span><span class="p">)</span>
</pre></div>

<h1 id="org-91880769">urllib2发送json数据 POST请求</h1>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s1">&#39;http://example.com/api/posts/create&#39;</span><span class="p">)</span>
<span class="n">req</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>

<h1 id="org-68753140">urllib2发送PUT或DELETE请求</h1>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib2</span>
<span class="n">opener</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">build_opener</span><span class="p">(</span><span class="n">urllib2</span><span class="o">.</span><span class="n">HTTPHandler</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s1">&#39;http://example.org&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s1">&#39;your_put_data&#39;</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;your/contenttype&#39;</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">get_method</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="s1">&#39;PUT&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">opener</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

<span class="c1"># 或者使用httplib</span>
<span class="kn">import</span> <span class="nn">httplib</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">httplib</span><span class="o">.</span><span class="n">HTTPConnection</span><span class="p">(</span><span class="s1">&#39;www.foo.com&#39;</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s1">&#39;PUT&#39;</span><span class="p">,</span> <span class="s1">&#39;/myurl&#39;</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

<h1 id="org-5851690">Django model得到所有field name</h1>
<div class="highlight"><pre><span></span><span class="n">MyModel</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
</pre></div>

<h1 id="org-84495074">python秒转化为时分秒</h1>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_string</span><span class="p">(</span><span class="n">seconds</span><span class="p">):</span>
    <span class="n">hours</span><span class="p">,</span> <span class="n">_minutes</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
    <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">_minutes</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">)</span>
</pre></div>

<h1 id="org-23545857">GMT时间格式</h1>
<div class="highlight"><pre><span></span><span class="n">GMT_FORMAT</span> <span class="o">=</span> <span class="s1">&#39;%a, </span><span class="si">%d</span><span class="s1"> %b %Y %H:%M:%S GMT&#39;</span>
</pre></div>

<h1 id="org-64701552">supervisor增加新配置不重启</h1>
<div class="highlight"><pre><span></span>supervisorctl reread
supervisorctl update
</pre></div>

<h1 id="org-31433333">Emacs 中evil粘贴替换的时候会复制替换的文本</h1>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">evil-paste-after-from-0</span> <span class="p">()</span>
  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">evil-this-register</span> <span class="nv">?0</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">call-interactively</span> <span class="ss">&#39;evil-paste-after</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">define-key</span> <span class="nv">evil-visual-state-map</span> <span class="s">&quot;p&quot;</span> <span class="ss">&#39;evil-paste-after-from-0</span><span class="p">)</span>
</pre></div>

<h1 id="org-8630853">判斷是否激活virtualenv</h1>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s1">&#39;real_prefix&#39;</span><span class="p">):</span>
   <span class="k">return</span> <span class="bp">True</span>
</pre></div>

<h1 id="org-19732928">获取上个月开始与结束时间</h1>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>


<span class="k">def</span> <span class="nf">gen_zero_time</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    生成当天零点时间</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span>


<span class="n">d</span> <span class="o">=</span> <span class="n">gen_zero_time</span><span class="p">()</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=-</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">start_date</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">end_date</span><span class="p">)</span>
</pre></div>

<h1 id="org-42704805">获取上周星期天与星期六</h1>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">relativedelta</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">today</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">((</span><span class="n">today</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">sat</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">relativedelta</span><span class="o">.</span><span class="n">relativedelta</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="n">relativedelta</span><span class="o">.</span><span class="n">SA</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">sun</span> <span class="o">=</span> <span class="n">sat</span> <span class="o">+</span> <span class="n">relativedelta</span><span class="o">.</span><span class="n">relativedelta</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="n">relativedelta</span><span class="o">.</span><span class="n">SU</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sun</span><span class="p">)</span>
</pre></div>

<h1 id="org-62521433">获取上周时间(星期天零点到星期天零点)</h1>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>


<span class="k">def</span> <span class="nf">gen_zero_time</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    生成当天零点时间</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">gen_zero_time</span><span class="p">()</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=-</span><span class="n">a</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">weeks</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">start_date</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">end_date</span><span class="p">)</span>
</pre></div>

<h1 id="org-78991730">设置mysql的密码小于8字符</h1>
<p>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
<div class="highlight"><pre><span></span><span class="k">SET</span> <span class="k">GLOBAL</span>  <span class="n">validate_password_policy</span><span class="o">=</span><span class="s1">&#39;LOW&#39;</span><span class="p">;</span>
</pre></div>
</p>
<ul>
<li>LOW
<p>政策只测试密码长度。 密码必须至少有8个字符长。</p></li>
<li>MEDIUM
<p>政策的条件 密码必须包含至少1数字字符,1 大写和小写字符,和1特别 (nonalphanumeric)字符。</p></li>
<li>STRONG
<p>政策的情况 密码子字符串长度为4的或更长时间不能匹配 单词在字典文件中,如果一个人被指定。</p></li>
</ul>
<div class="highlight"><pre><span></span><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">validate_password_length</span><span class="o">=</span><span class="mi">6</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">&#39;exingcai&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">&#39;uscjQAZ&#39;</span><span class="p">;</span>
</pre></div>

  </div>
  <div class="comments">
    <h2>Comments !</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
     var disqus_identifier = "articles/2016/10/常用代码片段.html";
     (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = 'https://honmaple.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
    </script>
  </div>
</article>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-offset-2 col-md-8" style="padding:0;">
      <div class="col-md-offset-1 col-md-10" style="padding:0;">
        <div class="footer">
          <ul class="list-inline entry-social">
            <li><a href="javascript:void(0);" onclick="return toggleTheme()" title="Moon"><i class="fa fa-moon-o"></i></a></li>
            <li><a href="http://honmaple.org/feeds/all.rss.xml" title="Feed"><i class="fa fa-feed"></i></a></li>
            <li><a href="https://github.com/honmaple" title="GitHub"><i class="fa fa-github"></i></a></li>
            <li><a href="https://twitter.com/xiyang87" title="Twitter"><i class="fa fa-twitter"></i></a></li>
          </ul>
          <ul class="list-inline copyright">
            <li class="hidden-xs">© 2017 honmaple</li>
            <li class="hidden-xs">·</li>
            <li class="hidden-xs">Powered by Pelican</li>
            <li>
              <a href="../../../pages/about.html">About</a>
              <span> | </span>
              <a href="https://github.com/honmaple" target="_blank">GitHub</a>
              <span> | </span>
              <a href="../../../pages/contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="https://cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
    <script type="text/javascript" src="../../../theme/js/particles.js"></script>
    <script type="text/javascript" src="../../../theme/js/theme.js"></script>
  </body>
</html>