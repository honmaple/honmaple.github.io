<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>python笔记 · 紅楓吟</title>
      <link href="https://s.libforest.com/static/css/lib.min.css" rel="stylesheet">
        <link href="https://honmaple.me/static/lib/css/style.min.css" rel="stylesheet">
      <script src="https://honmaple.me/static/lib/js/before.min.js"></script>
  </head>
  <body>
    <div class="scrollbar"></div>

    <div class="wrapper"><nav class="entry-navbar">
  <div class="entry-navbar-top">
    <a href="https://honmaple.me">
      <img class="entry-navbar-logo" src="https://s.libforest.com/images/header/header-logo.png" alt="楓">
    </a>
      <p class="entry-navbar-text">—— 风落花语风落天，花落风雨花落田.</p>
    <button class="entry-navbar-collapse" data-target=".entry-navbar-bottom" data-toggle="collapse">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" /></svg>
    </button>
  </div>
  <div class="entry-navbar-bottom">
    <ul class="entry-navbar-menu">
            <li class="entry-dropdown">
              <a href="https://honmaple.me/categories/life/index.html">代码人生</a>
              <ul class="entry-dropdown-content">
                  <li><a href="https://honmaple.me/categories/life/coding/index.html">分享世界</a></li>
                  <li><a href="https://honmaple.me/categories/life/love/index.html">你不懂我</a></li>
                  <li><a href="https://honmaple.me/categories/life/recall/index.html">我不怪你</a></li>
              </ul>
            </li>
            <li class="entry-dropdown">
              <a href="https://honmaple.me/categories/linux/index.html">字符艺术</a>
              <ul class="entry-dropdown-content">
                  <li><a href="https://honmaple.me/categories/linux/emacs/index.html">Emacs</a></li>
              </ul>
            </li>
            <li><a href="https://honmaple.me/categories/python/index.html">人生苦短</a></li>
            <li><a href="https://honmaple.me/categories/security/index.html">极客安全</a></li>
          <li class="entry-dropdown">
            <a href="https://honmaple.me/archives/index.html">文章归档</a>
            <ul class="entry-dropdown-content">
                <li><a href="https://honmaple.me/tags/index.html">标签</a></li>
                <li><a href="https://honmaple.me/categories/index.html">分类</a></li>
                <li><a href="https://honmaple.me/authors/index.html">作者</a></li>
            </ul>
          </li>
          <li><a href="https://honmaple.me/pages/about.html">关于</a></li>
    </ul>
    <form class="entry-navbar-form" action="https://honmaple.me/search.html">
      <input name="q" type="text" onfocus="this.placeholder='搜索'" onblur="this.placeholder=''" />
      <i class="fa fa-search"></i>
    </form>
  </div>
</nav>

  <article class="entry-article">
    <div class="entry-article-header">
    <h1 class="entry-article-title">
      <a href="https://honmaple.me/articles/2017/01/python笔记.html" rel="bookmark" title="Permalink to python笔记">python笔记</a>
    </h1>
      <div class="entry-article-info">
        <span title="Updated at 2020-04-03">
          <i class="fa fa-calendar-o"></i>
          2017年01月29日 周日
        </span>
          <span class="hidden-xs">|</span>
          <span class="hidden-xs">
            <i class="fa fa-user-o"></i>
            By
              <a href="https://honmaple.me/authors/honmaple/index.html">honmaple</a>
          </span>
          <span>|</span>
          <span>
            <i class="fa fa-folder-o"></i>
            In
              <a href="https://honmaple.me/categories/life/coding/index.html">Life/Coding</a>
          </span>
          <span>|</span>
          <span>
            <i class="fa fa-bookmark-o"></i>
            0f
              <a href="https://honmaple.me/tags/python/index.html">python</a>
              <a href="https://honmaple.me/tags/gist/index.html">gist</a>
              <a href="https://honmaple.me/tags/coding/index.html">coding</a>
          </span>
      </div>
  </div>
    <hr class="entry-article-hr" />
    <div class="entry-article-content">
      <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul>
<li><a href="#heading-1">TIME</a>
<ul>
<li><a href="#heading-1.1">GMT时间格式</a></li>
<li><a href="#heading-1.2">获取某个时间的时间戳</a></li>
<li><a href="#heading-1.3">得到当天0点时间</a></li>
<li><a href="#heading-1.4">时间或时间戳与字符串转换</a></li>
<li><a href="#heading-1.5">秒转化为时分秒</a></li>
<li><a href="#heading-1.6">获取上个月开始与结束时间</a></li>
<li><a href="#heading-1.7">获取上周星期天与星期六</a></li>
<li><a href="#heading-1.8">获取上周时间(星期天零点到星期天零点)</a></li>
</ul></li>
<li><a href="#heading-2">HTTP</a>
<ul>
<li><a href="#heading-2.1">在网址中加入参数</a></li>
<li><a href="#heading-2.2">urllib2发送json数据 POST请求</a></li>
<li><a href="#heading-2.3">urllib2发送PUT或DELETE请求</a></li>
</ul></li>
<li><a href="#heading-3">Syntax</a>
<ul>
<li><a href="#heading-3.1">解析赋值字符串</a></li>
<li><a href="#heading-3.2">字典递归更新</a></li>
<li><a href="#heading-3.3">字典使用dot                                                         </a></li>
<li><a href="#heading-3.4">单例模式                                                             </a></li>
</ul></li>
<li><a href="#heading-4">Pip</a>
<ul>
<li><a href="#heading-4.1">pip更新所有的packages</a></li>
<li><a href="#heading-4.2">pip指定国内源</a></li>
</ul></li>
<li><a href="#heading-5">判斷是否激活virtualenv</a></li>
<li><a href="#heading-6">Django model得到所有field name</a></li>
<li><a href="#heading-7">python运行超时设置</a></li>
<li><a href="#heading-8">库</a>
<ul>
<li><a href="#heading-8.1">json.loads时无法保持字典列表的顺序</a></li>
</ul></li>
<li><a href="#heading-9">其它</a>
<ul>
<li><a href="#heading-9.1">获取文件最后n行数据</a></li>
<li><a href="#heading-9.2">python列表中去除烦人的&#34;u&#34;</a></li>
</ul></li>
<li><a href="#heading-10">常见问题</a>
<ul>
<li><a href="#heading-10.1">PROTOCOL_SSLv3 is not defined</a></li>
</ul></li>
</ul></div></div>

<h1 id="heading-1">TIME</h1>
<h2 id="heading-1.1">GMT时间格式</h2>
<pre style="color:#f8f8f2;background-color:#272822">GMT_FORMAT <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">a, </span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%</span><span style="color:#e6db74">b </span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y </span><span style="color:#e6db74">%</span><span style="color:#e6db74">H:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">M:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">S GMT</span><span style="color:#e6db74">&#39;</span></pre>
<h2 id="heading-1.2">获取某个时间的时间戳</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> datetime
<span style="color:#f92672">import</span> time

string <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">2018-03-31</span><span style="color:#e6db74">&#34;</span>
date_time <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>strptime(string, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#39;</span>)
time_time <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>mktime(date_time<span style="color:#f92672">.</span>timetuple())
<span style="color:#66d9ef">print</span>(time_time)</pre>
<h2 id="heading-1.3">得到当天0点时间</h2>
<pre style="color:#f8f8f2;background-color:#272822">today <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>today()
b <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime(today<span style="color:#f92672">.</span>year, today<span style="color:#f92672">.</span>month, today<span style="color:#f92672">.</span>day, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
<span style="color:#66d9ef">print</span>(b)

now <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()
midnight <span style="color:#f92672">=</span> now <span style="color:#f92672">-</span> (now <span style="color:#f92672">%</span> <span style="color:#ae81ff">86400</span>) <span style="color:#f92672">+</span> time<span style="color:#f92672">.</span>timezone
itime <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>ctime(midnight)
<span style="color:#66d9ef">print</span>(itime)</pre>
<h2 id="heading-1.4">时间或时间戳与字符串转换</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">#把datetime转成字符串</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">datetime_toString</span>(dt):
    <span style="color:#66d9ef">return</span> dt<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">H</span><span style="color:#e6db74">&#34;</span>)

<span style="color:#75715e">#把字符串转成datetime</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">string_toDatetime</span>(string):
    <span style="color:#66d9ef">return</span> datetime<span style="color:#f92672">.</span>strptime(string, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">H</span><span style="color:#e6db74">&#34;</span>)

<span style="color:#75715e">#把字符串转成时间戳形式</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">string_toTimestamp</span>(strTime):
    <span style="color:#66d9ef">return</span> time<span style="color:#f92672">.</span>mktime(string_toDatetime(strTime)<span style="color:#f92672">.</span>timetuple())

<span style="color:#75715e">#把时间戳转成字符串形式</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">timestamp_toString</span>(stamp):
    <span style="color:#66d9ef">return</span> time<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">H</span><span style="color:#e6db74">&#34;</span>, time<span style="color:#f92672">.</span>localtime(stamp))

<span style="color:#75715e">#把时间戳转成datetime</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">timestamp_toDatetime</span>(stamp):
    <span style="color:#66d9ef">return</span> datetime<span style="color:#f92672">.</span>fromtimestamp(stamp)

<span style="color:#75715e">#把datetime类型转外时间戳形式</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">datetime_toTimestamp</span>(dateTim):
    <span style="color:#66d9ef">return</span> time<span style="color:#f92672">.</span>mktime(dateTim<span style="color:#f92672">.</span>timetuple())</pre>

<h2 id="heading-1.5">秒转化为时分秒</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">time_string</span>(seconds):
    hours, _minutes <span style="color:#f92672">=</span> divmod(seconds, <span style="color:#ae81ff">3600</span>)
    minutes, seconds <span style="color:#f92672">=</span> divmod(_minutes, <span style="color:#ae81ff">60</span>)
    <span style="color:#66d9ef">return</span> (hours, minutes, seconds)</pre>
<h2 id="heading-1.6">获取上个月开始与结束时间</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime, timedelta


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">gen_zero_time</span>():
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    生成当天零点时间</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#39;&#39;&#39;</span>
    today <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>today()
    b <span style="color:#f92672">=</span> datetime(today<span style="color:#f92672">.</span>year, today<span style="color:#f92672">.</span>month, today<span style="color:#f92672">.</span>day, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
    <span style="color:#66d9ef">return</span> b


d <span style="color:#f92672">=</span> gen_zero_time()
end_date <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>replace(day<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
start_date <span style="color:#f92672">=</span> (d<span style="color:#f92672">.</span>replace(day<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> timedelta(days<span style="color:#f92672">=</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))<span style="color:#f92672">.</span>replace(day<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">print</span>(start_date)
<span style="color:#66d9ef">print</span>(end_date)
</pre>
<h2 id="heading-1.7">获取上周星期天与星期六</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime, timedelta
<span style="color:#f92672">from</span> dateutil <span style="color:#f92672">import</span> relativedelta
today <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>now()
start <span style="color:#f92672">=</span> today <span style="color:#f92672">-</span> timedelta((today<span style="color:#f92672">.</span>weekday() <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> <span style="color:#ae81ff">7</span>)
sat <span style="color:#f92672">=</span> start <span style="color:#f92672">+</span> relativedelta<span style="color:#f92672">.</span>relativedelta(weekday<span style="color:#f92672">=</span>relativedelta<span style="color:#f92672">.</span>SA(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
sun <span style="color:#f92672">=</span> sat <span style="color:#f92672">+</span> relativedelta<span style="color:#f92672">.</span>relativedelta(weekday<span style="color:#f92672">=</span>relativedelta<span style="color:#f92672">.</span>SU(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
<span style="color:#66d9ef">print</span>(sat)
<span style="color:#66d9ef">print</span>(sun)</pre>
<h2 id="heading-1.8">获取上周时间(星期天零点到星期天零点)</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime, timedelta


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">gen_zero_time</span>():
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    生成当天零点时间</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#39;&#39;&#39;</span>
    today <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>today()
    b <span style="color:#f92672">=</span> datetime(today<span style="color:#f92672">.</span>year, today<span style="color:#f92672">.</span>month, today<span style="color:#f92672">.</span>day, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
    <span style="color:#66d9ef">return</span> b


a <span style="color:#f92672">=</span> gen_zero_time()
start_date <span style="color:#f92672">=</span> a <span style="color:#f92672">+</span> timedelta(days<span style="color:#f92672">=</span><span style="color:#f92672">-</span>a<span style="color:#f92672">.</span>weekday() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, weeks<span style="color:#f92672">=</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
end_date <span style="color:#f92672">=</span> start_date <span style="color:#f92672">+</span> timedelta(days<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>)
<span style="color:#66d9ef">print</span>(start_date)
<span style="color:#66d9ef">print</span>(end_date)</pre>

<h1 id="heading-2">HTTP</h1>
<h2 id="heading-2.1">在网址中加入参数</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> urllib
<span style="color:#f92672">import</span> urlparse


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">url_add_params</span>(url, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>params):
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"> 在网址中加入新参数 </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    pr <span style="color:#f92672">=</span> urlparse<span style="color:#f92672">.</span>urlparse(url)
    query <span style="color:#f92672">=</span> dict(urlparse<span style="color:#f92672">.</span>parse_qsl(pr<span style="color:#f92672">.</span>query))
    query<span style="color:#f92672">.</span>update(params)
    prlist <span style="color:#f92672">=</span> list(pr)
    prlist[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>urlencode(query)
    <span style="color:#66d9ef">return</span> urlparse<span style="color:#f92672">.</span>ParseResult(<span style="color:#f92672">*</span>prlist)<span style="color:#f92672">.</span>geturl()


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">__main__</span><span style="color:#e6db74">&#34;</span>:
    url <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">http://bbs.163.com</span><span style="color:#e6db74">&#39;</span>
    <span style="color:#66d9ef">print</span> url_add_params(url, token<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span>, site<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">bbs</span><span style="color:#e6db74">&#34;</span>)</pre>
<h2 id="heading-2.2">urllib2发送json数据 POST请求</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> json
<span style="color:#f92672">import</span> urllib2

data <span style="color:#f92672">=</span> {
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ids</span><span style="color:#e6db74">&#39;</span>: [<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>]
}

req <span style="color:#f92672">=</span> urllib2<span style="color:#f92672">.</span>Request(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">http://example.com/api/posts/create</span><span style="color:#e6db74">&#39;</span>)
req<span style="color:#f92672">.</span>add_header(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Content-Type</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">application/json</span><span style="color:#e6db74">&#39;</span>)

response <span style="color:#f92672">=</span> urllib2<span style="color:#f92672">.</span>urlopen(req, json<span style="color:#f92672">.</span>dumps(data))</pre>
<h2 id="heading-2.3">urllib2发送PUT或DELETE请求</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> urllib2
opener <span style="color:#f92672">=</span> urllib2<span style="color:#f92672">.</span>build_opener(urllib2<span style="color:#f92672">.</span>HTTPHandler)
request <span style="color:#f92672">=</span> urllib2<span style="color:#f92672">.</span>Request(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">http://example.org</span><span style="color:#e6db74">&#39;</span>, data<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">your_put_data</span><span style="color:#e6db74">&#39;</span>)
request<span style="color:#f92672">.</span>add_header(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Content-Type</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">your/contenttype</span><span style="color:#e6db74">&#39;</span>)
request<span style="color:#f92672">.</span>get_method <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">PUT</span><span style="color:#e6db74">&#39;</span>
url <span style="color:#f92672">=</span> opener<span style="color:#f92672">.</span>open(request)

<span style="color:#75715e"># 或者使用httplib</span>
<span style="color:#f92672">import</span> httplib
conn <span style="color:#f92672">=</span> httplib<span style="color:#f92672">.</span>HTTPConnection(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">www.foo.com</span><span style="color:#e6db74">&#39;</span>)
conn<span style="color:#f92672">.</span>request(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">PUT</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/myurl</span><span style="color:#e6db74">&#39;</span>, body)
resp <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>getresponse()
content <span style="color:#f92672">=</span> resp<span style="color:#f92672">.</span>read()</pre>

<h1 id="heading-3">Syntax</h1>
<h2 id="heading-3.1">解析赋值字符串</h2>
<p>
   即把
</p>
<pre style="color:#f8f8f2;background-color:#272822">a=b c=d e=f g.a=1 g.a.b=2 g.c.d=3 h=&#34;a b c&#34; i=&#39;sss&#39;</pre>
<p>
   解析成
</p>
<pre style="color:#f8f8f2;background-color:#272822">{&#39;a&#39;: &#39;b&#39;, &#39;c&#39;: &#39;d&#39;, &#39;e&#39;: &#39;f&#39;, &#39;g&#39;: {&#39;a&#39;: {&#39;b&#39;: &#39;2&#39;}, &#39;c&#39;: {&#39;d&#39;: &#39;3&#39;}}, &#39;h&#39;: &#39;a b c&#39;, &#39;i&#39;: &#39;sss&#39;}</pre>

<pre style="color:#f8f8f2;background-color:#272822">regex <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">([</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w.]+|</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">[^=]*|</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">[^=]*)=(</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">[^</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">]*</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">|</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">[^</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">]*</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">|.*?)(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">s|$)</span><span style="color:#e6db74">&#34;</span>)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parse_string</span>(string):
    r <span style="color:#f92672">=</span> {}

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_get</span>(key):
        key <span style="color:#f92672">=</span> key<span style="color:#f92672">.</span>strip()
        <span style="color:#66d9ef">if</span> key[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> key[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">in</span> [<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#34;</span>]:
            <span style="color:#66d9ef">return</span> key[<span style="color:#ae81ff">1</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
        <span style="color:#66d9ef">return</span> key

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_update</span>(value, nvalue):
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> isinstance(nvalue, dict) <span style="color:#f92672">or</span> <span style="color:#f92672">not</span> isinstance(value, dict):
            <span style="color:#66d9ef">return</span> nvalue
        <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> nvalue<span style="color:#f92672">.</span>items():
            value<span style="color:#f92672">.</span>setdefault(k, dict())
            <span style="color:#66d9ef">if</span> isinstance(v, dict):
                v <span style="color:#f92672">=</span> _update(value[k], v)
            value[k] <span style="color:#f92672">=</span> v
        <span style="color:#66d9ef">return</span> value

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_set</span>(key, value):
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> key<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">.</span><span style="color:#e6db74">&#34;</span>)[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]:
            value <span style="color:#f92672">=</span> {i: value}
        <span style="color:#66d9ef">return</span> value

    <span style="color:#66d9ef">for</span> key, value <span style="color:#f92672">in</span> regex<span style="color:#f92672">.</span>findall(string):
        r <span style="color:#f92672">=</span> _update(r, _set(_get(key), _get(value)))
    <span style="color:#66d9ef">return</span> r</pre>
<h2 id="heading-3.2">字典递归更新</h2>
<p>
   即当更新<code>dict</code>的value也是一个<code>dict</code>时，递归更新相应内容
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update</span>(value, nvalue):
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> isinstance(nvalue, dict) <span style="color:#f92672">or</span> <span style="color:#f92672">not</span> isinstance(value, dict):
        <span style="color:#66d9ef">return</span> nvalue
    <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> nvalue<span style="color:#f92672">.</span>items():
        <span style="color:#66d9ef">if</span> isinstance(v, dict):
            v <span style="color:#f92672">=</span> update(value[k], v)
        value<span style="color:#f92672">.</span>update({k: v})
    <span style="color:#66d9ef">return</span> value</pre>
<h2 id="heading-3.3">字典使用dot                                                         </h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">dotdict</span>(dict):

    __setattr__ <span style="color:#f92672">=</span> dict<span style="color:#f92672">.</span>__setitem__
    __delattr__ <span style="color:#f92672">=</span> dict<span style="color:#f92672">.</span>__delitem__

    <span style="color:#66d9ef">def</span> __getattr__(self, name):
        value <span style="color:#f92672">=</span> self[name]
        <span style="color:#66d9ef">if</span> isinstance(value, dict):
            <span style="color:#66d9ef">return</span> dotdict(value)
        <span style="color:#66d9ef">return</span> value


a <span style="color:#f92672">=</span> {<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">a</span><span style="color:#e6db74">&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">c</span><span style="color:#e6db74">&#39;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">d</span><span style="color:#e6db74">&#39;</span>: {<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">a</span><span style="color:#e6db74">&#39;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">1</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">1</span><span style="color:#e6db74">&#39;</span>: <span style="color:#ae81ff">1</span>}}
c <span style="color:#f92672">=</span> dotdict(a)
<span style="color:#66d9ef">print</span>(c<span style="color:#f92672">.</span>a)
<span style="color:#66d9ef">print</span>(c<span style="color:#f92672">.</span>d<span style="color:#f92672">.</span>a)</pre>

<p>
   或者
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">dotdict</span>(object):
    <span style="color:#66d9ef">def</span> __init__(self, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>kwargs):
        <span style="color:#66d9ef">for</span> key, value <span style="color:#f92672">in</span> kwargs<span style="color:#f92672">.</span>items():
            setattr(self, key, value)</pre>
<h2 id="heading-3.4">单例模式                                                             </h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> wraps
<span style="color:#f92672">from</span> threading <span style="color:#f92672">import</span> Lock


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">singleton</span>(class_):
    instances <span style="color:#f92672">=</span> {}
    _lock <span style="color:#f92672">=</span> Lock()

    <span style="color:#a6e22e">@wraps</span>(class_)
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_instance</span>(<span style="color:#f92672">*</span>args, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>kwargs):
        <span style="color:#66d9ef">with</span> _lock:
            <span style="color:#66d9ef">if</span> class_ <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> instances:
                instances[class_] <span style="color:#f92672">=</span> class_(<span style="color:#f92672">*</span>args, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>kwargs)
            instances[class_]<span style="color:#f92672">.</span>__init__(<span style="color:#f92672">*</span>args, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>kwargs)
        <span style="color:#66d9ef">return</span> instances[class_]

    <span style="color:#66d9ef">return</span> _instance

<span style="color:#a6e22e">@singleton</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AA</span>(object):
    <span style="color:#66d9ef">def</span> __init__(self, a):
        self<span style="color:#f92672">.</span>a <span style="color:#f92672">=</span> a

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">aa</span>(self):
        <span style="color:#66d9ef">print</span>(self<span style="color:#f92672">.</span>a)


a <span style="color:#f92672">=</span> AA(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ccc</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">.</span>aa()
b <span style="color:#f92672">=</span> AA(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">baabb</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">.</span>aa()
<span style="color:#66d9ef">print</span>(id(a) <span style="color:#f92672">==</span> id(b))</pre>
<h1 id="heading-4">Pip</h1>
<h2 id="heading-4.1">pip更新所有的packages</h2>
<pre style="color:#f8f8f2;background-color:#272822">pip freeze --local | grep -v <span style="color:#e6db74">&#39;^\-e&#39;</span> | cut -d <span style="color:#f92672">=</span> -f <span style="color:#ae81ff">1</span>  | xargs -n1 pip install -U</pre>
<p>
   如果是更新<b>sudo</b>安装的packages
</p>
<pre style="color:#f8f8f2;background-color:#272822">pip freeze --local | grep -v <span style="color:#e6db74">&#39;^\-e&#39;</span> | cut -d <span style="color:#f92672">=</span> -f <span style="color:#ae81ff">1</span>  | xargs -n1 sudo pip install -U</pre>

<h2 id="heading-4.2">pip指定国内源</h2>
<pre style="color:#f8f8f2;background-color:#272822">pip install flask_migrate -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com</pre>
<h1 id="heading-5">判斷是否激活virtualenv</h1>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> sys
<span style="color:#66d9ef">if</span> hasattr(sys, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">real_prefix</span><span style="color:#e6db74">&#39;</span>):
   <span style="color:#66d9ef">return</span> True</pre>

<h1 id="heading-6">Django model得到所有field name</h1>
<pre style="color:#f8f8f2;background-color:#272822">MyModel<span style="color:#f92672">.</span>_meta<span style="color:#f92672">.</span>get_all_field_names()</pre>

<h1 id="heading-7">python运行超时设置</h1>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> signal

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TimeoutError</span>(<span style="color:#a6e22e">Exception</span>):
    <span style="color:#66d9ef">pass</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">timeout</span>(seconds<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, error_message<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Timer expired</span><span style="color:#e6db74">&#34;</span>):
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_timeout</span>(func):
        <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_handle_timeout</span>(signum, frame):
            <span style="color:#66d9ef">raise</span> TimeoutError(error_message)

        <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">wrapper</span>(<span style="color:#f92672">*</span>args, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>kwargs):
            signal<span style="color:#f92672">.</span>signal(signal<span style="color:#f92672">.</span>SIGALRM, _handle_timeout)
            signal<span style="color:#f92672">.</span>alarm(seconds)
            <span style="color:#66d9ef">try</span>:
                result <span style="color:#f92672">=</span> func(<span style="color:#f92672">*</span>args, <span style="color:#f92672">*</span><span style="color:#f92672">*</span>kwargs)
            <span style="color:#66d9ef">finally</span>:
                signal<span style="color:#f92672">.</span>alarm(<span style="color:#ae81ff">0</span>)
            <span style="color:#66d9ef">return</span> result

        <span style="color:#66d9ef">return</span> wrapper

    <span style="color:#66d9ef">return</span> _timeout</pre>

<h1 id="heading-8">库</h1>

<h2 id="heading-8.1">json.loads时无法保持字典列表的顺序</h2>
<p>
   <a href="stackoverflow.com/questions/47111058/json-loads-doesnt-keep-order">stackoverflow.com/questions/47111058/json-loads-doesnt-keep-order</a>
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">from</span> json <span style="color:#f92672">import</span> loads
<span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> OrderedDict
loads(your_json_string, object_pairs_hook<span style="color:#f92672">=</span>OrderedDict)</pre>
<p>
   <a href="http://www.grokcode.com/864/snakefooding-python-code-for-complexity-visualization/">http://www.grokcode.com/864/snakefooding-python-code-for-complexity-visualization/</a>
</p>

<h1 id="heading-9">其它</h1>
<h2 id="heading-9.1">获取文件最后n行数据</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">import</span> mmap


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getlastline</span>(fname, n<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>):
    <span style="color:#66d9ef">with</span> open(fname) <span style="color:#66d9ef">as</span> source:
        mapping <span style="color:#f92672">=</span> mmap<span style="color:#f92672">.</span>mmap(source<span style="color:#f92672">.</span>fileno(), <span style="color:#ae81ff">0</span>, prot<span style="color:#f92672">=</span>mmap<span style="color:#f92672">.</span>PROT_READ)
    cursor <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">while</span> n <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
        n <span style="color:#f92672">-</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
        cursor <span style="color:#f92672">=</span> mapping<span style="color:#f92672">.</span>rfind(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">0</span>, cursor)
    <span style="color:#66d9ef">return</span> mapping[cursor:]<span style="color:#f92672">.</span>decode()<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)</pre>

<h2 id="heading-9.2">python列表中去除烦人的&#34;u&#34;</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># !/usr/bin/env python2</span>
<span style="color:#75715e"># -*- coding: utf-8 -*-</span>

s <span style="color:#f92672">=</span> [<span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">python</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">golang</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">lua</span><span style="color:#e6db74">&#34;</span>]
<span style="color:#66d9ef">print</span>(s)</pre>



<ul>
<li>
<p>
 python script
</p>
<pre style="color:#f8f8f2;background-color:#272822">s <span style="color:#f92672">=</span> [<span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">python</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">golang</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">lua</span><span style="color:#e6db74">&#34;</span>]
<span style="color:#66d9ef">print</span>([str(i) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> s])</pre>


</li>
<li>
<p>
 jinja2
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">from</span> jinja2 <span style="color:#f92672">import</span> Template
template <span style="color:#f92672">=</span> Template(
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">[{</span><span style="color:#e6db74">% f</span><span style="color:#e6db74">or i in consul_join </span><span style="color:#e6db74">%</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{{ i | string }}</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span><span style="color:#e6db74">% i</span><span style="color:#e6db74">f not loop.last </span><span style="color:#e6db74">%</span><span style="color:#e6db74">},{</span><span style="color:#e6db74">% e</span><span style="color:#e6db74">ndif </span><span style="color:#e6db74">%</span><span style="color:#e6db74">}{</span><span style="color:#e6db74">% e</span><span style="color:#e6db74">ndfor </span><span style="color:#e6db74">%</span><span style="color:#e6db74">}]</span><span style="color:#e6db74">&#39;</span>
)
template<span style="color:#f92672">.</span>render(consul_join<span style="color:#f92672">=</span>[<span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">python</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">golang</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">lua</span><span style="color:#e6db74">&#34;</span>])</pre>


</li>
</ul>
<h1 id="heading-10">常见问题</h1>

<h2 id="heading-10.1">PROTOCOL_SSLv3 is not defined</h2>
<p>
   <a href="github.com/docker-library/python/issues/29">github.com/docker-library/python/issues/29</a>
</p>
<pre style="color:#f8f8f2;background-color:#272822">bash -c <span style="color:#e6db74">&#39;sed -i s/PROTOCOL_SSLv3/PROTOCOL_SSLv23/g /usr/local/lib/python2.7/site-packages/gevent/ssl.py &amp;&amp; python prober.py&#39;</span></pre>
    </div>
    <div class="entry-copyright">
        <div>
          <span><i class="fa fa-user-o"></i>作者:</span>
            <a href="https://honmaple.me/authors/honmaple/index.html">honmaple</a>
        </div>
    <div>
      <span><i class="fa fa-link"></i>链接:</span>
      <a href="https://honmaple.me/articles/2017/01/python笔记.html">https://honmaple.me/articles/2017/01/python笔记.html</a>
    </div>
    <div>
      <span><i class="fa fa-copyright"></i>版权:</span>
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">
        <img src="https://s.libforest.com/images/pic/license.png" alt="CC BY-NC-SA 4.0" />
        知识共享署名-非商业性使用-相同方式共享4.0国际许可协议
      </a>
    </div>
  </div>
  <div class="entry-honor">
    <button data-target=".entry-honor-content" data-toggle="collapse" aria-expanded="false">赞</button>
    <div class="entry-honor-content collapse">
      <div class="entry-honor-wechat">
        <img class="lazyload" data-src="https://s.libforest.com/images/pic/wechat.png" alt="wechat" />
      </div>
      <div class="entry-honor-alipay">
        <img class="lazyload" data-src="https://s.libforest.com/images/pic/alipay.png" alt="alipay" />
      </div>
    </div>
  </div>
    <hr class="entry-article-hr" />
    <ul class="entry-pager">
      <li class="prev">
        <a href="https://honmaple.me/articles/2017/02/linux终端常用快捷键.html" title="Previous article: linux终端常用快捷键">
          <i class="fa fa-chevron-left"></i>
          linux终端常用快捷键
        </a>
      </li>
      <li class="next">
        <a href="https://honmaple.me/articles/2017/01/升级至python3.6导致环境出错解决.html" title="Next article: 升级至python3.6导致环境出错解决">
          升级至python3.6导致环境出错解决
          <i class="fa fa-chevron-right"></i>
        </a>
      </li>
  </ul>
    
    <div class="entry-comment">
      <div class="entry-btn">
        <a>加载评论</a>
      </div>
      <div id="comment_thread" issue-term="python笔记"></div>
    </div>
  </article><div class="footer">
  <ul class="footer-left">
    <li class="hidden-xs">© 2015-2023 honmaple</li>
    <li class="hidden-xs">·</li>
    <li>
        <a href="https://honmaple.me/pages/friends.html">友链</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/contact.html">联系</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/project.html">项目</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/timeline.html">时间轴</a>
    </li>
  </ul>
  <ul class="footer-right">
    <li><a class="entry-switch-theme" title="切换主题" onclick="switchTheme()"><i class="fa fa-moon-o"></i></a></li>
      <li><a href="https://honmaple.me/pages/music.html" title="Music"><i class="fa fa-music"></i></a></li>
      <li class="hidden-xs"><a href="https://honmaple.me/pages/music.html" title="Feed"><i class="fa fa-feed"></i></a></li>
      <li><a href="https://github.com/honmaple" title="Github"><i class="fa fa-github"></i></a></li>
      <li><a href="https://honmaple.me/pages/travel.html" title="Camera"><i class="fa fa-camera"></i></a></li>
      <li><a href="https://honmaple.me/pages/contact.html" title="Contact"><i class="fa fa-envelope"></i></a></li>
  </ul>
</div>
<div class="back-to-top on">
  <i class="fa fa-hand-o-up" title="back to top"></i>
</div>

    </div>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88401692-2"></script>
  <script>
     window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-88401692-2');
  </script>


      <script src="https://s.libforest.com/static/js/lib.min.js"></script>
        <script src="https://honmaple.me/static/lib/js/script.min.js"></script>
  </body>
</html>
