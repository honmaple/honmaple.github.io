<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Snow静态博客生成器 · 紅楓吟</title>
      <link href="https://s.libforest.com/static/css/lib.min.css" rel="stylesheet">
        <link href="https://honmaple.me/static/lib/css/style.min.css" rel="stylesheet">
      <script src="https://honmaple.me/static/lib/js/before.min.js"></script>
  </head>
  <body>
    <div class="scrollbar"></div>

    <div class="wrapper"><nav class="entry-navbar">
  <div class="entry-navbar-top">
    <a href="https://honmaple.me">
      <img class="entry-navbar-logo" src="https://s.libforest.com/images/header/header-logo.png" alt="楓">
    </a>
      <p class="entry-navbar-text">—— 风落花语风落天，花落风雨花落田.</p>
    <button class="entry-navbar-collapse" data-target=".entry-navbar-bottom" data-toggle="collapse">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" /></svg>
    </button>
  </div>
  <div class="entry-navbar-bottom">
    <ul class="entry-navbar-menu">
          <li class="entry-dropdown">
            <a href="https://honmaple.me/categories/life/index.html">生活随笔</a>
            <ul class="entry-dropdown-content">
                <li><a href="https://honmaple.me/categories/life/love/index.html">你不懂我</a></li>
                <li><a href="https://honmaple.me/categories/life/recall/index.html">我不怪你</a></li>
            </ul>
          </li>
          <li class="entry-dropdown">
            <a href="https://honmaple.me/categories/tech/index.html">技术分享</a>
            <ul class="entry-dropdown-content">
                <li><a href="https://honmaple.me/categories/tech/coding/index.html">代码世界</a></li>
                <li><a href="https://honmaple.me/categories/tech/geek/index.html">极客安全</a></li>
                <li><a href="https://honmaple.me/categories/tech/linux/index.html">字符艺术</a></li>
            </ul>
          </li>
          <li class="entry-dropdown">
            <a href="https://honmaple.me/archives/index.html">文章归档</a>
            <ul class="entry-dropdown-content">
                <li><a href="https://honmaple.me/tags/index.html">标签</a></li>
                <li><a href="https://honmaple.me/categories/index.html">分类</a></li>
                <li><a href="https://honmaple.me/authors/index.html">作者</a></li>
            </ul>
          </li>
          <li><a href="https://honmaple.me/pages/about.html">关于</a></li>
    </ul>
    <form class="entry-navbar-form" action="https://honmaple.me/search.html">
      <input name="q" type="text" onfocus="this.placeholder='搜索'" onblur="this.placeholder=''" />
      <i class="fa fa-search"></i>
    </form>
  </div>
</nav>

  <article class="entry-article">
    <div class="entry-article-header">
    <h1 class="entry-article-title">
      <a href="https://honmaple.me/articles/2022/10/Snow静态博客生成器.html" rel="bookmark" title="Permalink to Snow静态博客生成器">Snow静态博客生成器</a>
    </h1>
      <div class="entry-article-info">
        <span title="Updated at 2023-06-05">
          <i class="fa fa-calendar-o"></i>
          2022年10月16日 周日
        </span>
          <span>|</span>
          <span>
            <i class="fa fa-folder-o"></i>
            分类
              <a href="https://honmaple.me/categories/tech/index.html">Tech</a>
          </span>
          <span>|</span>
          <span>
            <i class="fa fa-bookmark-o"></i>
            标签
              <a href="https://honmaple.me/tags/linux/index.html">linux</a>
              <a href="https://honmaple.me/tags/snow/index.html">snow</a>
          </span>
      </div>
  </div>
    <hr class="entry-article-hr" />
    <div class="entry-article-content">
      <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul>
<li><a href="#heading-1">快速开始</a>
<ul>
<li><a href="#heading-1.1">开始(Quickstart)</a>
<ul>
<li><a href="#heading-1.1.1">创建新的站点</a></li>
<li><a href="#heading-1.1.2">编译和预览</a></li>
</ul></li>
<li><a href="#heading-1.2">安装(Installation)</a></li>
<li><a href="#heading-1.3">编译(Build)</a></li>
<li><a href="#heading-1.4">命令行(Cli usage)</a>
<ul>
<li><a href="#heading-1.4.1">init</a></li>
<li><a href="#heading-1.4.2">build</a></li>
<li><a href="#heading-1.4.3">server</a></li>
</ul></li>
<li><a href="#heading-1.5">目录结构(Driectory structure)</a></li>
<li><a href="#heading-1.6">配置文件(Configuration)</a></li>
</ul></li>
<li><a href="#heading-2">内容管理</a>
<ul>
<li><a href="#heading-2.1">Section</a>
<ul>
<li><a href="#heading-2.1.1">配置</a></li>
<li><a href="#heading-2.1.2">路径变量(<b>sections.xxx.path</b>)</a></li>
<li><a href="#heading-2.1.3">模版变量(<b>sections.xxx.template</b>)</a></li>
</ul></li>
<li><a href="#heading-2.2">页面(Page)</a>
<ul>
<li><a href="#heading-2.2.1">元数据</a></li>
<li><a href="#heading-2.2.2">配置</a></li>
<li><a href="#heading-2.2.3">路径变量(<b>sections.xxx.page_path</b>)</a></li>
<li><a href="#heading-2.2.4">模版变量(<b>sections.xxx.page_template</b>)</a></li>
</ul></li>
<li><a href="#heading-2.3">分类系统(Taxonomy)</a>
<ul>
<li><a href="#heading-2.3.1">配置</a></li>
<li><a href="#heading-2.3.2">路径变量</a></li>
<li><a href="#heading-2.3.3">模版变量</a></li>
</ul></li>
<li><a href="#heading-2.4">归档页(Archive)</a></li>
<li><a href="#heading-2.5">分页(Pagination)</a>
<ul>
<li><a href="#heading-2.5.1">路径变量</a></li>
<li><a href="#heading-2.5.2">模版变量</a></li>
</ul></li>
<li><a href="#heading-2.6">草稿(Draft)</a></li>
<li><a href="#heading-2.7">输出格式(Atom,Rss,JSON)</a>
<ul>
<li><a href="#heading-2.7.1">配置</a></li>
<li><a href="#heading-2.7.2">模版变量</a></li>
</ul></li>
<li><a href="#heading-2.8">静态文件(Static)</a>
<ul>
<li><a href="#heading-2.8.1">主题静态文件</a></li>
<li><a href="#heading-2.8.2">指定的静态文件</a></li>
</ul></li>
<li><a href="#heading-2.9">多语言(Multilingual)</a></li>
</ul></li>
<li><a href="#heading-3">模版(templates)</a></li>
<li><a href="#heading-4">主题(theme)</a>
<ul>
<li><a href="#heading-4.1">安装</a></li>
<li><a href="#heading-4.2">开发</a>
<ul>
<li><a href="#heading-4.2.1">主题目录结构</a></li>
<li><a href="#heading-4.2.2">配置</a></li>
<li><a href="#heading-4.2.3"><span class="todo">TODO</span>默认配置</a></li>
</ul></li>
</ul></li>
<li><a href="#heading-5">插件(hooks)</a>
<ul>
<li><a href="#heading-5.1">i18n</a></li>
<li><a href="#heading-5.2">encrypt</a></li>
<li><a href="#heading-5.3">shortcode</a></li>
<li><a href="#heading-5.4">assets</a></li>
<li><a href="#heading-5.5">sofile</a></li>
</ul></li>
<li><a href="#heading-6">本地测试和正式发布</a></li>
</ul></div></div>

<blockquote>
<p>
一个<b>简单却可配置</b>的静态博客生成器。
很早之前(三年前)就想写一个静态博客生成器，但苦于一直没有时间，最近把之前写的重构了一下，让其可以支持更多的定制化配置。
</p>

<p>
<b>至于为什么要重新写一个</b>:
</p>
<ol>
<li>
<p>
 大概是因为想要把之前未完成的轮子补充完整
</p></li>
<li>
<p>
 我目前使用的博客系统使用的是 <b>pelican</b>，一个基于 <b>Python</b> 的静态博客生成器，目前里面包括了很多我自己写的插件，比如 <code>Emacs org mode</code> 的支持、文章加密、模版定制等，因为需要大量遍历所有文章，导致生成速度越来越慢，还有一点就是因为使用的是 <b>Python</b>，每次本地预览时都需要切换到虚拟环境
</p></li>
<li>
<p>
 我习惯使用 <b>Emacs + Org</b>，除了前期的几篇文章，后面都是使用 <b>org mode</b> 书写，之前是因为 <b>Python</b> 没有一个好用的 <b>org mode</b> 解析库，所以专门写了一个 <code>org-python</code> 用来解析 <b>org mode</b>；最近我也是完善了另一个我很早之前就写的 <code>org-golang</code> 解析库(轮子+1)，准备趁次机会利用一下这个库
</p></li>
<li>
<p>
 至于为什么不用最近几年流行的 <b>Hugo</b>, 因为我想要保持和我使用 <b>Pelican</b> 时一样的功能，比如文章加密，而 <b>hugo</b> 并不支持插件，想要自定义插件必须复制大段大段的启动函数, 甚至需要修改源代码。同样我想要定制一个相同的模版，而对于使用过其它模版系统如Django，jinja2, 再来使用 <b>Go内置模版</b> 的人来说, <b>hugo</b> 的内置模版除了难用就是难用，这也是我此次选用 <b>pongo2</b> 的原因
</p></li>
<li>
<p>
 我的设想是提供插件的接口，并提供一个足够简单的启动函数, 在有用户需要自定义插件时只需要自己创建一个包, 使用三两行代码就能注册自定义插件并重新编译自己的snow
</p></li>
</ol>
</blockquote>

<h2 id="heading-1">快速开始</h2>
<h3 id="heading-1.1">开始(Quickstart)</h3>
<h4 id="heading-1.1.1">创建新的站点</h4>
<pre style="color:#f8f8f2;background-color:#272822">──╼ ./snow init
Welcome to snow 0.1.0.
&gt; Where do you want to create your new web site? [.] mysnow
&gt; What will be the title of this web site? [snow]
&gt; Who will be the author of this web site?
The input is required
&gt; Who will be the author of this web site? honmaple
&gt; What is your URL prefix? (no trailing slash) [http://127.0.0.1:8000]
&gt; Do you want to create first page? [Y/n]</pre>

<h4 id="heading-1.1.2">编译和预览</h4>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ cd mysnow
└──╼ ../snow server -D
DEBU Copying @theme/static/css/main.css to output/static/css/main.css
INFO Done: Static Processed 1 static files in 588.705µs
DEBU Writing output/categories/index.html
DEBU Writing output/authors/index.html
DEBU Writing output/tags/index.html
DEBU Writing output/posts/index.html
DEBU Writing output/authors/snow/index.html
DEBU Writing output/tags/snow/index.html
DEBU Writing output/categories/linux/index.html
DEBU Writing output/tags/linux/index.html
DEBU Writing output/tags/emacs/index.html
DEBU Writing output/categories/linux/emacs/index.html
INFO Done: Page Processed 1 normal pages, 0 hidden pages, 0 section pages in 10.087804ms
INFO Done: Section Processed 1 posts in 10.1831ms
INFO Done: Taxonomy Processed 1 authors, 3 tags, 1 categories in 10.18788ms</pre>

<h3 id="heading-1.2">安装(Installation)</h3>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ git install https://github.com/honmaple/snow</pre>

<h3 id="heading-1.3">编译(Build)</h3>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ git clone https://github.com/honmaple/snow --depth=1
└──╼ cd snow
└──╼ go mod tidy
└──╼ go build .</pre>

<h3 id="heading-1.4">命令行(Cli usage)</h3>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow --help
NAME:
   snow - snow is a static site generator.

USAGE:
   snow [global options] command [command options] [arguments...]

VERSION:
   0.1.0

COMMANDS:
   init     init a new site
   build    build and output
   server   server local files
   help, h  Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --config FILE, -c FILE  load configuration from FILE (default: &#34;config.yaml&#34;)
   --help, -h            show help (default: false)
   --version, -v         print the version (default: false)</pre>
<h4 id="heading-1.4.1">init</h4>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow init
└──╼ ./snow init myblog</pre>
<p>
     如果不指定 <b>myblog</b> 目录，默认会在当前目录下生成一个 <b>config.yaml</b> 文件和一个 <b>content</b> 目录
</p>
<h4 id="heading-1.4.2">build</h4>
<p>
     该命令会构建站点内容内写入到 <b>{output_dir}</b> 目录, 如果该目录已经有文件存在，除非制定 <code>-C</code> 参数，否则不会自动清理
</p>
<ul>
<li>
<p>
 清理输出目录
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow build --clean
└──╼ ./snow build -C</pre></li>
<li>
<p>
 显示输出详情
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow build --debug
└──╼ ./snow build -D</pre></li>
<li>
<p>
 指定输出目录
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow build --output {output_dir}
└──╼ ./snow build -o {output_dir}</pre></li>
<li>
<p>
 指定mode
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow build --mode {mode}
└──╼ ./snow build -m {mode}</pre></li>
<li>
<p>
 筛选页面
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow build --filter {build_filter}
└──╼ ./snow build -F {build_filter}</pre></li>
<li>
<p>
 显示所有hooks
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow build --hooks</pre></li>
</ul>
<h4 id="heading-1.4.3">server</h4>
<p>
     build 支持的命令 server也同样支持, 除此之外，还有
</p>
<ul>
<li>
<p>
 指定监听地址
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow server --listen 127.0.0.1:8088
└──╼ ./snow server -l 127.0.0.1:8088</pre>
<p>
       默认监听地址是 <code>site.url</code>
</p></li>
<li>
<p>
 监听文件修改并重新构建
</p>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow server --autoload
└──╼ ./snow server -r</pre>
</li>
</ul>
<h3 id="heading-1.5">目录结构(Driectory structure)</h3>
<pre style="color:#f8f8f2;background-color:#272822">.
├── config.yaml
├── content
│   └── posts
│       └── first-page.md
├── static
├── layouts
└── themes
│   └── snow
│       └── static
│       └── template</pre>
<ul>
<li>
<p>
 <b>config.yaml</b>:
      使用的配置文件
</p></li>
<li>
<p>
 <b>content</b>:
      包括所有的页面内容, 比如 <code>.md</code>, <code>.org</code> 等,如果一个子目录包括 <code>index.{md,org}</code> 文件，那么这个目录将会成为一个页面，否则每一个子目录都是一个 <b>section</b>, 同样的，子目录下 <code>_index.{md,org}</code> 文件也是该 <b>section</b> 的配置文件
</p></li>
<li>
<p>
 <b>static</b>:
      <code>statics</code> 指定的静态文件或目录，名称可修改
</p></li>
<li>
<p>
 <b>layouts</b>: 主题模版覆盖目录
      <code>theme.override</code> 指定的主题覆盖文件，比如有一个主题模版 <code>{theme}/templates/post.html</code>, 当指定了 <code>override</code> 目录后就可以在该目录创建一个同样名称为 <code>post.html</code> 的文件进行覆盖
</p></li>
<li>
<p>
 <b>themes</b>:
      主题目录, 该目录下包括的子目录就是主题名称，可以在 <code>theme.name</code> 里指定
</p></li>
</ul>
<h3 id="heading-1.6">配置文件(Configuration)</h3>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># 站点配置信息</span>
<span style="color:#66d9ef">site</span>:
  <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;http://127.0.0.1:8000&#34;</span>
  <span style="color:#66d9ef">title</span>: <span style="color:#e6db74">&#34;snow&#34;</span>
  <span style="color:#66d9ef">subtitle</span>: <span style="color:#e6db74">&#34;Snow is a static generator.&#34;</span>
  <span style="color:#66d9ef">language</span>: <span style="color:#e6db74">&#34;zh&#34;</span>
  <span style="color:#66d9ef">author</span>: <span style="color:#e6db74">&#34;honmaple&#34;</span>

<span style="color:#75715e"># 发布时使用的配置</span>
<span style="color:#66d9ef">mode.publish</span>:
  <span style="color:#66d9ef">site</span>:
    <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;https://honmaple.me&#34;</span>

<span style="color:#66d9ef">output_dir</span>: <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#66d9ef">content_dir</span>: <span style="color:#e6db74">&#34;content&#34;</span>
<span style="color:#66d9ef">build_filter</span>: <span style="color:#e6db74">&#34;not draft&#34;</span>

<span style="color:#66d9ef">theme</span>:
  <span style="color:#66d9ef">name</span>: <span style="color:#e6db74">&#34;snow&#34;</span>

<span style="color:#75715e"># 按照主题需要进行配置</span>
<span style="color:#66d9ef">params.extra</span>:
  <span style="color:#66d9ef">menus</span>:
    - <span style="color:#66d9ef">name</span>: <span style="color:#e6db74">&#34;关于&#34;</span>
      <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;/pages/about.html&#34;</span></pre>
<h2 id="heading-2">内容管理</h2>
<h3 id="heading-2.1">Section</h3>
<pre style="color:#f8f8f2;background-color:#272822">content/
├── pages             // no url, because sections.pages.path is &#34;&#34;
│   └── about         // &lt;- http://127.0.0.1:8000/pages/about.html
│       └── index.org // no url
│   └── contact.org   // &lt;- http://127.0.0.1:8000/pages/contact.html
└── posts             // &lt;- http://127.0.0.1:8000/posts/index.html
    ├── post1.org     // &lt;- http://127.0.0.1:8000/posts/2022/02/post1.html
    └── subposts      // &lt;- http://127.0.0.1:8000/posts/subposts/index.html
        └── post2.org // &lt;- http://127.0.0.1:8000/posts/2023/02/post2.html</pre>
<h4 id="heading-2.1.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">sections</span>:
  <span style="color:#66d9ef">_default</span>:
    <span style="color:#75715e"># 页面默认排序, 多字段使用逗号分隔</span>
    <span style="color:#66d9ef">orderby</span>: <span style="color:#e6db74">&#34;date desc&#34;</span>
    <span style="color:#75715e"># 自定义某个section下的页面筛选</span>
    <span style="color:#66d9ef">filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># 页面默认分页, path必须使用{number}变量, 0表示不分页</span>
    <span style="color:#66d9ef">paginate</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#75715e"># 分页路径</span>
    <span style="color:#66d9ef">paginate_path</span>: <span style="color:#e6db74">&#34;{name}{number}{extension}&#34;</span>
    <span style="color:#75715e"># 分页前筛选pages</span>
    <span style="color:#66d9ef">paginate_filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># 生成路径, 为空表示禁止生成相关页面</span>
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;{section}/index.html&#34;</span>
    <span style="color:#75715e"># 使用的模版</span>
    <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;section.html&#34;</span>
    <span style="color:#75715e"># 当前section下所有页面生成路径</span>
    <span style="color:#66d9ef">page_path</span>: <span style="color:#e6db74">&#34;{section}/{slug}/index.html&#34;</span>
    <span style="color:#75715e"># 页面使用的模版</span>
    <span style="color:#66d9ef">page_template</span>: <span style="color:#e6db74">&#34;post.html&#34;</span>
    <span style="color:#66d9ef">formats.atom</span>:
      <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;{section:slug}/atom.xml&#34;</span>
  <span style="color:#66d9ef">posts</span>:
    <span style="color:#66d9ef">page_path</span>: <span style="color:#e6db74">&#34;posts/{date:%Y}/{date:%m}/{slug}.html&#34;</span>
  <span style="color:#66d9ef">pages</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">pages/about</span>:
    <span style="color:#75715e"># 自定义pages/about下的页面生成路径，同时继承pages.path不会生成所有页面</span>
    <span style="color:#66d9ef">page_path</span>: <span style="color:#e6db74">&#34;{slug}/index.html&#34;</span></pre>
<p>
     <b>filter</b> 格式(下同):
</p>
<pre style="color:#f8f8f2;background-color:#272822">&#39;emacs&#39; in tags and not draft or weight &gt; 1</pre>
<p>
     其中 <b>tags</b>, <b>draft</b> 等都是page元数据
</p>

<h4 id="heading-2.1.2">路径变量(<b>sections.xxx.path</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{section}</td>
<td>section名称</td>
</tr>
<tr>
<td>{section:slug}</td>
<td>section slug, 中国 -&gt; zhong-guo</td>
</tr>
</table>

<h4 id="heading-2.1.3">模版变量(<b>sections.xxx.template</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>section</td>
<td></td>
</tr>
<tr>
<td>section.Title</td>
<td>section标题</td>
</tr>
<tr>
<td>section.Path</td>
<td>section相对链接</td>
</tr>
<tr>
<td>section.Permalink</td>
<td>section绝对链接</td>
</tr>
<tr>
<td>section.Content</td>
<td>section内容</td>
</tr>
<tr>
<td>section.Pages</td>
<td>当前section下的页面列表</td>
</tr>
<tr>
<td>section.Children</td>
<td>子section</td>
</tr>
<tr>
<td>section.Parent</td>
<td>父section</td>
</tr>
</table>

<h3 id="heading-2.2">页面(Page)</h3>
<h4 id="heading-2.2.1">元数据</h4>
<ul>
<li>
<p>
 markdown
</p>
<pre style="color:#f8f8f2;background-color:#272822">---
title: &#34;title&#34;
categories:
  - Snow/Templates
tags:
  - linux
  - snow
---</pre></li>
<li>
<p>
 orgmode
</p>
<pre style="color:#f8f8f2;background-color:#272822">#+TITLE: title
#+DATE: 2022-02-26 17:14:46
#+CATEGORIES: Snow/Templates
#+PROPERTY: TAGS linux,snow
#+PROPERTY: MODIFIED 2023-02-26 14:35:37</pre></li>
<li>
<p>
 html
</p>
<pre style="color:#f8f8f2;background-color:#272822">&lt;<span style="color:#f92672">head</span>&gt;
  &lt;<span style="color:#f92672">title</span>&gt;Project&lt;/<span style="color:#f92672">title</span>&gt;
  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;categories&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Snow/Templates&#34;</span> /&gt;
  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tags&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;linux,snow&#34;</span> /&gt;
  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2015-12-22&#34;</span> /&gt;
&lt;/<span style="color:#f92672">head</span>&gt;</pre></li>
</ul>
<h4 id="heading-2.2.2">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># 页面目录所在, 其中该目录下应该包括一系列子目录，这些子目录的名称对应为 *页面的类型*, 比如 *content/drafts/* 目录下的 页面类型为 *drafts*, 当然也可以直接在 页面文件头添加 =type: drafts=</span>
<span style="color:#66d9ef">content_dir</span>: <span style="color:#e6db74">&#34;content&#34;</span></pre>
<h4 id="heading-2.2.3">路径变量(<b>sections.xxx.page_path</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{date:%Y}</td>
<td>创建页面的年份</td>
</tr>
<tr>
<td>{date:%m}</td>
<td>创建页面的月份</td>
</tr>
<tr>
<td>{date:%d}</td>
<td>创建页面的日期</td>
</tr>
<tr>
<td>{date:%H}</td>
<td>创建页面的小时</td>
</tr>
<tr>
<td>{lang}</td>
<td>页面语言</td>
</tr>
<tr>
<td>{slug}</td>
<td>页面标题或自定义slug</td>
</tr>
<tr>
<td>{filename}</td>
<td>文件名称(不带后缀名)</td>
</tr>
</table>

<h4 id="heading-2.2.4">模版变量(<b>sections.xxx.page_template</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>page</td>
<td></td>
</tr>
<tr>
<td>page.Title</td>
<td>页面标题</td>
</tr>
<tr>
<td>page.Lang</td>
<td>页面语言</td>
</tr>
<tr>
<td>page.Date</td>
<td>页面创建时间</td>
</tr>
<tr>
<td>page.Modified</td>
<td>页面修改时间</td>
</tr>
<tr>
<td>page.Aliases</td>
<td>页面其它链接</td>
</tr>
<tr>
<td>page.Path</td>
<td>页面相对链接</td>
</tr>
<tr>
<td>page.Permalink</td>
<td>页面绝对链接</td>
</tr>
<tr>
<td>page.Summary</td>
<td>页面简介</td>
</tr>
<tr>
<td>page.Content</td>
<td>页面内容</td>
</tr>
<tr>
<td>page.Meta.xxx</td>
<td>自定义的元数据</td>
</tr>
<tr>
<td>page.Prev</td>
<td>上一篇</td>
</tr>
<tr>
<td>page.Next</td>
<td>下一篇</td>
</tr>
<tr>
<td>page.HasPrev()</td>
<td>是否有上一篇</td>
</tr>
<tr>
<td>page.HasNext()</td>
<td>是否有下一篇</td>
</tr>
<tr>
<td>page.PrevInType</td>
<td>同一类型上一篇</td>
</tr>
<tr>
<td>page.NextInType</td>
<td>同一类型下一篇</td>
</tr>
<tr>
<td>page.HasPrevInType()</td>
<td>是否有同一类型上一篇</td>
</tr>
<tr>
<td>page.HasNextInType()</td>
<td>是否有同一类型下一篇</td>
</tr>
</table>

<h3 id="heading-2.3">分类系统(Taxonomy)</h3>
<h4 id="heading-2.3.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">taxonomies</span>:
  <span style="color:#66d9ef">_default</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;{taxonomy}/index.html&#34;</span>
    <span style="color:#75715e"># terms排序, 可选name,count</span>
    <span style="color:#66d9ef">orderby</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;{taxonomy}/list.html&#34;</span>
    <span style="color:#66d9ef">term_path</span>: <span style="color:#e6db74">&#34;{taxonomy}/{term:slug}/index.html&#34;</span>
    <span style="color:#66d9ef">term_template</span>: <span style="color:#e6db74">&#34;{taxonomy}/single.html&#34;</span>
    <span style="color:#75715e"># 页面列表筛选</span>
    <span style="color:#66d9ef">term_filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># 页面列表排序</span>
    <span style="color:#66d9ef">term_orderby</span>: <span style="color:#e6db74">&#34;date desc&#34;</span>
    <span style="color:#75715e"># 页面列表分页</span>
    <span style="color:#66d9ef">term_paginate</span>: <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">term_paginate_path</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#66d9ef">term_paginate_filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">categories</span>:
  <span style="color:#66d9ef">authors</span>:
  tags:</pre>

<h4 id="heading-2.3.2">路径变量</h4>
<ul>
<li>
<p>
 <b>taxonomies.xxx.path</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{taxonomy}</td>
<td>分类系统名称</td>
</tr>
</table></li>
<li>
<p>
 <b>taxonomies.xxx.term_path</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{taxonomy}</td>
<td>分类系统名称</td>
</tr>
<tr>
<td>{term}</td>
<td>分类具体名称</td>
</tr>
<tr>
<td>{term:slug}</td>
<td>分类slug</td>
</tr>
</table>
</li>
</ul>
<h4 id="heading-2.3.3">模版变量</h4>
<ul>
<li>
<p>
 <b>taxonomies.xxx.template</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>taxonomy</td>
<td></td>
</tr>
<tr>
<td>taxonomy.Name</td>
<td>分类系统名称, 如:categories,tags,authors</td>
</tr>
<tr>
<td>taxonomy.Terms</td>
<td></td>
</tr>
</table></li>
<li>
<p>
 <b>taxonomies.xxx.term_template</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>term</td>
<td></td>
</tr>
<tr>
<td>term.Name</td>
<td>分类名称</td>
</tr>
<tr>
<td>term.Path</td>
<td>相对链接</td>
</tr>
<tr>
<td>term.Permalink</td>
<td>绝对链接</td>
</tr>
<tr>
<td>term.List</td>
<td>页面列表</td>
</tr>
<tr>
<td>term.Children</td>
<td>子分类</td>
</tr>
</table>
</li>
</ul>
<h3 id="heading-2.4">归档页(Archive)</h3>
<p>
    <b>snow</b> 中的分类系统是基于归档实现的，该功能类似 <b>SQL</b> 中的 <code>group by</code>, 所以如果要实现归档页可以有两种方式:
</p>
<ol>
<li>
<p>
 添加 <code>taxonomies.{key}</code>, <code>{key}</code> 可以是页面元数据里的任意字段, 比如 <code>categories</code>, <code>tags</code>, 如果需要按照时间归档, 格式为 <code>date:2006/01</code>, 其中 <code>2006/01</code> 为Go时间格式，表示按年月归档, 并生成链接 <b>/archives/2022/10/index.html</b>
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">taxonomies</span>:
  <span style="color:#66d9ef">date:2006/01</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;archives/index.html&#34;</span>
    <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;archives.html&#34;</span>
    <span style="color:#66d9ef">term_path</span>: <span style="color:#e6db74">&#34;archives/{term}/index.html&#34;</span>
    <span style="color:#66d9ef">term_template</span>: <span style="color:#e6db74">&#34;period_archives.html&#34;</span></pre></li>
<li>
<p>
 在 <code>{content_dir}</code> 下添加一个 <code>archives.md</code> 的文件
</p>
<pre style="color:#f8f8f2;background-color:#272822">path: archives.html
template: archives.html
section: true</pre>
<p>
       然后在模板 <code>{templates}/archives.html</code> 使用 <code>pages.GroupBy({key})</code>
</p>
<pre style="color:#f8f8f2;background-color:#272822">{%- for subterm in pages.GroupBy(&#34;date:2006-01&#34;).OrderBy(&#34;name desc&#34;) %}
  {%- set date = subterm.Name | split:&#34;-&#34; %}
  {%- set year = date[0] %}
  {%- set month = date[1] %}
   ...
{%- endfor %}</pre>
</li>
</ol>
<h3 id="heading-2.5">分页(Pagination)</h3>
<h4 id="heading-2.5.1">路径变量</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{name}</td>
<td>路径名称</td>
</tr>
<tr>
<td>{extension}</td>
<td>路径扩展</td>
</tr>
<tr>
<td>{number}</td>
<td>页码, 第一页为空</td>
</tr>
<tr>
<td>{number:one}</td>
<td>页码, 第一页为&#34;1&#34;</td>
</tr>
</table>
<ul>
<li>
<p>
 示例一:
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;section/index.html&#34;</span>
<span style="color:#66d9ef">paginate_path</span>: <span style="color:#e6db74">&#34;{name}{number}{extension}&#34;</span></pre>
<ul>
<li>
<p>
 第一页: <code>section/index.html</code>
</p></li>
<li>
<p>
 第二页: <code>section/index2.html</code>
</p></li>
<li>
<p>
 第三页: <code>section/index3.html</code>
</p></li>
</ul></li>
<li>
<p>
 示例二:
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;section/index.html&#34;</span>
<span style="color:#66d9ef">paginate_path</span>: <span style="color:#e6db74">&#34;page/{number:one}{extension}&#34;</span></pre>
<ul>
<li>
<p>
 第一页: <code>section/page/1.html</code>
</p></li>
<li>
<p>
 第二页: <code>section/page/2.html</code>
</p></li>
<li>
<p>
 第三页: <code>section/page/3.html</code>
</p></li>
</ul></li>
</ul>
<h4 id="heading-2.5.2">模版变量</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>paginator</td>
<td></td>
</tr>
<tr>
<td>paginator.URL</td>
<td>分页链接</td>
</tr>
<tr>
<td>paginator.PageNum</td>
<td>当前页</td>
</tr>
<tr>
<td>paginator.Total</td>
<td>总页数</td>
</tr>
<tr>
<td>paginator.HasPrev()</td>
<td>是否有上一页</td>
</tr>
<tr>
<td>paginator.Prev</td>
<td>上一页</td>
</tr>
<tr>
<td>paginator.Prev.URL</td>
<td>上一页链接</td>
</tr>
<tr>
<td>paginator.HasNext()</td>
<td>是否有下一页</td>
</tr>
<tr>
<td>paginator.Next</td>
<td>下一页</td>
</tr>
<tr>
<td>paginator.Next.URL</td>
<td>下一页链接</td>
</tr>
<tr>
<td>paginator.All</td>
<td>所有页</td>
</tr>
<tr>
<td>paginator.List</td>
<td>当前分页下的页面列表</td>
</tr>
</table>

<h3 id="heading-2.6">草稿(Draft)</h3>
<p>
    使用者可以自定义草稿标志，但推荐使用两种形式:
</p>
<ol>
<li>
<p>
 添加元数据 <code>draft: true</code>, 构建时增加筛选条件
</p>
<ul>
<li>
<p>
 <b>草稿</b>
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build --filter &#39;draft = true&#39;</pre></li>
<li>
<p>
 <b>非草稿</b>
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build -F &#39;not draft&#39;</pre></li>
</ul></li>
<li>
<p>
 创建一个单独的 <code>drafts</code> 目录存放草稿
</p>
<ul>
<li>
<p>
 <b>草稿</b>
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build -F &#39;type = &#34;drafts&#34;&#39;</pre></li>
<li>
<p>
 <b>非草稿</b>
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build -F &#39;type != &#34;drafts&#34;&#39;</pre>
</li>
</ul></li>
</ol>
<p>
    注: 默认筛选条件可以写入配置 <code>build_filter</code>
</p>
<h3 id="heading-2.7">输出格式(Atom,Rss,JSON)</h3>
<p>
    可以生成 <b>rss</b> ，<b>atom</b> 或者其它任意格式(需要自定义模版)
</p>
<h4 id="heading-2.7.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># 设置rss格式的默认值</span>
<span style="color:#66d9ef">formats.rss</span>:
  <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;_internal/rss.xml&#34;</span>

<span style="color:#66d9ef">formats.atom</span>:
  <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;_internal/atom.xml&#34;</span>

<span style="color:#66d9ef">sections</span>:
  <span style="color:#66d9ef">_default</span>:
    <span style="color:#75715e"># rss生成路径, 模版将会使用默认模版</span>
    <span style="color:#66d9ef">formats.rss.path</span>: <span style="color:#e6db74">&#34;{section:slug}/index.xml&#34;</span>
    <span style="color:#75715e"># 为空时禁止生成</span>
    <span style="color:#66d9ef">formats.atom.path</span>: <span style="color:#e6db74">&#34;&#34;</span>

<span style="color:#66d9ef">taxonomies</span>:
  <span style="color:#66d9ef">tags</span>:
    <span style="color:#66d9ef">formats.atom</span>:
      <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;tags/{term:slug}/index.xml&#34;</span>
      <span style="color:#75715e"># 自定义模版</span>
      <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;custom.atom.xml&#34;</span></pre>
<h4 id="heading-2.7.2">模版变量</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>section</td>
<td>仅生成section 有效</td>
</tr>
<tr>
<td>term</td>
<td>仅生成taxonomy term 有效</td>
</tr>
<tr>
<td>pages</td>
<td>页面列表</td>
</tr>
</table>

<h3 id="heading-2.8">静态文件(Static)</h3>
<p>
    静态文件分 <b>主题静态文件</b> 和 <b>配置指定的静态文件</b>
</p>

<h4 id="heading-2.8.1">主题静态文件</h4>
<pre style="color:#f8f8f2;background-color:#272822">├── themes
│   └── snow
│       └── static
│           └── main.css</pre>
<p>
     主题目录下的所有文件默认会复制到 <b>output</b> 目录, 除非设置 <code>statics.@theme/static.path</code> 为空
</p>

<h4 id="heading-2.8.2">指定的静态文件</h4>
<p>
     该文件需要在配置指定
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">statics</span>:
  <span style="color:#75715e"># 根目录下static目录下的文件将会拷贝到{output_dir}/static</span>
  <span style="color:#66d9ef">static</span>:
    <span style="color:#75715e"># 拷贝的路径, 为空时表示不写入, 如果以&#34;/&#34;结尾, 表示拷贝到该目录</span>
    <span style="color:#75715e"># static  -&gt; {output_dir}/static</span>
    <span style="color:#75715e"># static/ -&gt; {output_dir}/static/static</span>
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;/&#34;</span>
    <span style="color:#75715e"># 指定扩展，不配置将会使用目录下的所有文件</span>
    <span style="color:#66d9ef">exts</span>:
      - <span style="color:#e6db74">&#34;.js&#34;</span>
      - <span style="color:#e6db74">&#34;.css&#34;</span>
    <span style="color:#75715e"># 如果指定的静态文件是一个目录，可以设置忽略文件, 比如忽略static目录下的images子目录</span>
    <span style="color:#66d9ef">ignore_files</span>:
      - <span style="color:#e6db74">&#34;^images/&#34;</span>
  <span style="color:#75715e"># 以@theme/开头表示主题目录, 以@theme/_internal/开头表示内置的主题目录</span>
  <span style="color:#66d9ef">@theme/static</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;static&#34;</span>
  <span style="color:#66d9ef">@theme/_internal/static</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;static&#34;</span>
  <span style="color:#75715e"># 同样可以指定任意静态文件或目录</span>
  <span style="color:#66d9ef">content/pages/css</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;static/css&#34;</span></pre>

<h3 id="heading-2.9">多语言(Multilingual)</h3>
<p>
    需要配置 <code>languages</code>
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">languages.en</span>:
  <span style="color:#66d9ef">translations</span>: <span style="color:#e6db74">&#34;i18n/en.yaml&#34;</span>
<span style="color:#66d9ef">languages.fr</span>:
  <span style="color:#66d9ef">translations</span>: <span style="color:#e6db74">&#34;i18n/fr.yaml&#34;</span></pre>
<p>
    页面格式:
</p>
<ul>
<li>
<p>
 <code>{title}.en.md</code>
</p></li>
<li>
<p>
 <code>{title}.fr.md</code>
</p></li>
</ul>
<p>
    或者可以在文件头指定 <code>lang: en</code>
</p>

<h2 id="heading-3">模版(templates)</h2>
<p>
   <a href="https://github.com/flosch/pongo2">https://github.com/flosch/pongo2</a>
</p>
<h2 id="heading-4">主题(theme)</h2>
<h3 id="heading-4.1">安装</h3>
<h3 id="heading-4.2">开发</h3>
<h4 id="heading-4.2.1">主题目录结构</h4>
<p>
     其中 <b>templates</b> 和 <b>static</b> 名称不可修改
</p>
<pre style="color:#f8f8f2;background-color:#272822">simple/
├── templates
│   ├── post.html
│   ├── index.html
│   ├── archives.html
├── static
│   ├── main.css</pre>
<h4 id="heading-4.2.2">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">theme</span>:
  <span style="color:#75715e"># 主题名称, 未设置将使用默认主题</span>
  <span style="color:#66d9ef">name</span>: <span style="color:#e6db74">&#34;test-theme&#34;</span>
  <span style="color:#75715e"># 主题模版覆盖, 增加同名的文件到 *override* 配置的目录, snow将会优先使用该文件</span>
  <span style="color:#66d9ef">override</span>: <span style="color:#e6db74">&#34;layouts&#34;</span></pre>

<h4 id="heading-4.2.3"><span class="todo">TODO</span>默认配置</h4>

<h2 id="heading-5">插件(hooks)</h2>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">hooks</span>:
  - <span style="color:#e6db74">&#34;i18n&#34;</span>
  - <span style="color:#e6db74">&#34;assets&#34;</span>
  - <span style="color:#e6db74">&#34;encrypt&#34;</span>
  - <span style="color:#e6db74">&#34;shortcode&#34;</span></pre>
<h3 id="heading-5.1">i18n</h3>
<ul>
<li>
<p>
 模版
</p>
<pre style="color:#f8f8f2;background-color:#272822">{% i18n &#34;tags&#34; %}
{% T &#34;tags %d&#34; 12 %}
{{ i18n(&#34;authors&#34;) }}
{{ T(&#34;authors&#34;) }}
{{ _(&#34;authors %f&#34;, 3.14) }}</pre>
<p>
       甚至可以直接使用变量
       {{ _(term.Name) }}
</p></li>
<li>
<p>
 翻译文件
       默认会加载主题下 <b>i18n</b> 目录下的文件
</p>
<pre style="color:#f8f8f2;background-color:#272822">i18n
├── en.yaml
└── zh.yaml</pre>
<p>
       文件内容
</p>
<pre style="color:#f8f8f2;background-color:#272822">---
- <span style="color:#66d9ef">id</span>: <span style="color:#e6db74">&#34;authors&#34;</span>
  <span style="color:#66d9ef">tr</span>: <span style="color:#e6db74">&#34;作者&#34;</span>
- <span style="color:#66d9ef">id</span>: <span style="color:#e6db74">&#34;tags&#34;</span>
  <span style="color:#66d9ef">tr</span>: <span style="color:#e6db74">&#34;标签&#34;</span></pre>

<p>
       也可以自定义文件位置或翻译内容覆盖主题原有的翻译
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">languages.en</span>:
  <span style="color:#66d9ef">translations</span>: <span style="color:#e6db74">&#34;i18n/en.yaml&#34;</span>
<span style="color:#66d9ef">languages.zh</span>:
  <span style="color:#66d9ef">translations</span>:
    - <span style="color:#66d9ef">id</span>: <span style="color:#e6db74">&#34;authors&#34;</span>
      <span style="color:#66d9ef">tr</span>: <span style="color:#e6db74">&#34;作者&#34;</span></pre>
</li>
</ul>
<h3 id="heading-5.2">encrypt</h3>
<p>
     内容加密, 需要一个密码
</p>
<pre style="color:#f8f8f2;background-color:#272822">{{ page.Content | encrypt:&#34;123456&#34; }}</pre>

<h3 id="heading-5.3">shortcode</h3>
<p>
     用于快速插入已有模版, 示例:
</p>
<pre style="color:#f8f8f2;background-color:#272822">&lt;shortcode _name=&#34;encrypt&#34; password=&#34;1234567&#34;&gt;
hello *markdown*
&lt;/shortcode&gt;

&lt;shortcode _name=&#34;gist&#34; author=&#34;spf13&#34; id=&#34;7896402&#34; /&gt;</pre>

<p>
     可以自定义 <b>shortcode</b> 到主题的 <code>templates/shortcodes</code> 目录下, 目前内置 <b>gist</b>, <b>encrypt</b>
</p>
<h3 id="heading-5.4">assets</h3>
<p>
     静态文件处理
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">params.assets</span>:
  <span style="color:#66d9ef">css</span>:
    <span style="color:#66d9ef">files</span>:
      - <span style="color:#e6db74">&#34;@theme/static/scss/main.scss&#34;</span>
      - <span style="color:#e6db74">&#34;@theme/static/scss/entry.scss&#34;</span>
    <span style="color:#66d9ef">filters</span>:
      - <span style="color:#66d9ef">libscss</span>:
          <span style="color:#66d9ef">path</span>: [<span style="color:#e6db74">&#34;@theme/static/scss/&#34;</span>]
      - <span style="color:#66d9ef">cssmin</span>:
    <span style="color:#66d9ef">output</span>: <span style="color:#e6db74">&#34;static/lib.min.css&#34;</span></pre>
<pre style="color:#f8f8f2;background-color:#272822">{% assets files=&#34;css/style.scss&#34; filters=&#34;libsass,cssmin&#34; output=&#34;css/style.min.css&#34; %}
&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ config.site.url }}/{{ asset_url }}&#34;</span>&gt;
{% endassets %}

{% assets css %}
&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ config.site.url }}/{{ asset_url }}&#34;</span>&gt;
{% endassets %}</pre>
<h3 id="heading-5.5">sofile</h3>
<p>
    <b>sofile</b> 允许使用Go的 <code>Plugin</code> 系统支持自定义插件
</p>
<ul>
<li>
<p>
 创建一个 <code>sofile.go</code> 的文件
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;fmt&#34;</span>

    <span style="color:#e6db74">&#34;github.com/honmaple/snow/builder/hook&#34;</span>
    <span style="color:#e6db74">&#34;github.com/honmaple/snow/builder/page&#34;</span>
    <span style="color:#e6db74">&#34;github.com/honmaple/snow/builder/theme&#34;</span>
    <span style="color:#e6db74">&#34;github.com/honmaple/snow/config&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">testHook</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">hook</span>.<span style="color:#a6e22e">BaseHook</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">testHook</span>) <span style="color:#a6e22e">Name</span>() <span style="color:#66d9ef">string</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;test&#34;</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">testHook</span>) <span style="color:#a6e22e">AfterPageParse</span>(<span style="color:#a6e22e">page</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">Page</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">Page</span> {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">Title</span>)
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">page</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHook</span>(<span style="color:#a6e22e">conf</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">Config</span>, <span style="color:#a6e22e">theme</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">Theme</span>) <span style="color:#a6e22e">hook</span>.<span style="color:#a6e22e">Hook</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">testHook</span>{}
}</pre></li>
<li>
<p>
 编译为so文件
</p>
<pre style="color:#f8f8f2;background-color:#272822">go build -buildmode=plugin sofile.go</pre></li>
<li>
<p>
 注册插件
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">hooks</span>:
  - <span style="color:#e6db74">&#34;sofile&#34;</span>
<span style="color:#66d9ef">params.sofiles</span>:
  - <span style="color:#e6db74">&#34;sofile.so&#34;</span></pre>
</li>
</ul>
<h2 id="heading-6">本地测试和正式发布</h2>
<p>
   snow 提供了 <b>mode</b> 配置用于区分本地测试和正式发布
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">site</span>:
  <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;http://127.0.0.1:8000&#34;</span>
  <span style="color:#66d9ef">output_dir</span>: <span style="color:#e6db74">&#34;output&#34;</span>

<span style="color:#66d9ef">mode.publish</span>:
  <span style="color:#66d9ef">site</span>:
    <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;https://example.com&#34;</span>
    <span style="color:#66d9ef">output_dir</span>: <span style="color:#e6db74">&#34;xxx&#34;</span>

<span style="color:#66d9ef">mode.develop</span>:
  <span style="color:#66d9ef">include</span>: <span style="color:#e6db74">&#34;develop.yaml&#34;</span></pre>
<p>
   只要在构建时使用 <code>snow build --mode publish</code> 即可覆盖本地默认配置
</p>
    </div>
    <div class="entry-copyright">
        <div>
          <span><i class="fa fa-user-o"></i>作者:</span>
            <a href="https://honmaple.me/authors/honmaple/index.html">honmaple</a>
        </div>
    <div>
      <span><i class="fa fa-link"></i>链接:</span>
      <a href="https://honmaple.me/articles/2022/10/Snow静态博客生成器.html">https://honmaple.me/articles/2022/10/Snow静态博客生成器.html</a>
    </div>
    <div>
      <span><i class="fa fa-copyright"></i>版权:</span>
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">
        <img src="https://s.libforest.com/images/pic/license.png" alt="CC BY-NC-SA 4.0" />
        知识共享署名-非商业性使用-相同方式共享4.0国际许可协议
      </a>
    </div>
  </div>
  <div class="entry-honor">
    <button data-target=".entry-honor-content" data-toggle="collapse" aria-expanded="false">赞</button>
    <div class="entry-honor-content collapse">
      <div class="entry-honor-wechat">
        <img class="lazyload" data-src="https://s.libforest.com/images/pic/wechat.png" alt="wechat" />
      </div>
      <div class="entry-honor-alipay">
        <img class="lazyload" data-src="https://s.libforest.com/images/pic/alipay.png" alt="alipay" />
      </div>
    </div>
  </div>
    <hr class="entry-article-hr" />
    <ul class="entry-pager">
      <li class="prev">
        <a href="https://honmaple.me/articles/2022/11/人生中的第一台组装电脑.html" title="Previous article: 人生中的第一台组装电脑">
          <i class="fa fa-chevron-left"></i>
          人生中的第一台组装电脑
        </a>
      </li>
      <li class="next">
        <a href="https://honmaple.me/articles/2021/11/Emacs笔记之minibuffer默认输入.html" title="Next article: Emacs笔记之minibuffer默认输入">
          Emacs笔记之minibuffer默认输入
          <i class="fa fa-chevron-right"></i>
        </a>
      </li>
  </ul>
    
    <div class="entry-comment">
      <div class="entry-btn">
        <a>加载评论</a>
      </div>
      <div id="comment_thread" issue-term="Snow静态博客生成器"></div>
    </div>
  </article><div class="footer">
  <ul class="footer-left">
    <li class="hidden-xs">© 2015-2025 honmaple</li>
    <li class="hidden-xs">·</li>
    <li>
        <a href="https://honmaple.me/pages/friends.html">友链</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/contact.html">联系</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/timeline.html">时间轴</a>
    </li>
  </ul>
  <ul class="footer-right">
    <li><a class="entry-switch-theme" title="切换主题" onclick="switchTheme()"><i class="fa fa-moon-o"></i></a></li>
      <li><a href="https://honmaple.me/pages/music.html" title="音乐"><i class="fa fa-music"></i></a></li>
      <li><a href="https://honmaple.me/pages/travel.html" title="旅行"><i class="fa fa-camera"></i></a></li>
      <li class="hidden-xs"><a href="https://honmaple.me/atom.xml" title="Feed"><i class="fa fa-feed"></i></a></li>
      <li><a href="https://github.com/honmaple" title="Github"><i class="fa fa-github"></i></a></li>
  </ul>
</div>
<div class="back-to-top on">
  <i class="fa fa-hand-o-up" title="back to top"></i>
</div>

    </div>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88401692-2"></script>
  <script>
     window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-88401692-2');
  </script>


      <script src="https://s.libforest.com/static/js/lib.min.js"></script>
        <script src="https://honmaple.me/static/lib/js/script.min.js"></script>
  </body>
</html>
