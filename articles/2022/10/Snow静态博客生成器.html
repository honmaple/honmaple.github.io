<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Snow静态博客生成器 · 紅楓吟</title>
      <link href="https://s.libforest.com/static/css/lib.min.css" rel="stylesheet">
        <link href="https://honmaple.me/static/lib/css/style.min.css" rel="stylesheet">
    <script src="https://honmaple.me/static/js/theme.js"></script>
  </head>
  <body>
    <div class="scrollbar"></div>

    <div class="wrap">
      <div class="main"><nav class="navbar navbar-default">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-header" aria-expanded="false">
      <span class="sr-only"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://honmaple.me">
      <img class="navbar-logo" src="https://s.libforest.com/images/header/header-logo.png" alt="楓">
    </a>
      <p class="navbar-text">—— 风落花语风落天，花落风雨花落田.</p>
  </div>
  <div class="collapse navbar-collapse" id="nav-header">
    <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="https://honmaple.me/categories/life/index.html">代码人生</a>
              <ul class="dropdown-menu">
                  <li><a href="https://honmaple.me/categories/life/coding/index.html">分享世界</a></li>
                  <li><a href="https://honmaple.me/categories/life/love/index.html">你不懂我</a></li>
                  <li><a href="https://honmaple.me/categories/life/recall/index.html">我不怪你</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="https://honmaple.me/categories/linux/index.html">字符艺术</a>
              <ul class="dropdown-menu">
                  <li><a href="https://honmaple.me/categories/linux/emacs/index.html">Emacs</a></li>
              </ul>
            </li>
            <li><a href="https://honmaple.me/categories/python/index.html">人生苦短</a></li>
            <li><a href="https://honmaple.me/categories/security/index.html">极客安全</a></li>
          <li class="dropdown">
            <a href="https://honmaple.me/archives/index.html">文章归档</a>
            <ul class="dropdown-menu">
                <li><a href="https://honmaple.me/tags/index.html">标签</a></li>
                <li><a href="https://honmaple.me/categories/index.html">分类</a></li>
                <li><a href="https://honmaple.me/authors/index.html">作者</a></li>
            </ul>
          </li>
          <li><a href="https://honmaple.me/pages/about.html">关于</a></li>
    </ul>
    <form action="https://honmaple.me/search.html" class="navbar-form navbar-right" style="margin-top:10px;">
      <div class="form-group has-feedback">
        <input class="form-control input-sm" id="search" name="q" type="text" onfocus="this.placeholder='搜索'" onblur="this.placeholder=''">
        <i class="fa fa-search form-control-feedback"></i>
      </div>
    </form>
  </div>
</nav>

  <article>
    <div class="entry-header">
      <h1 class="entry-title"><a href="https://honmaple.me/articles/2022/10/Snow静态博客生成器.html">Snow静态博客生成器</a></h1><header class="entry-info">
  <span title="Updated at 2023-02-26">
    <i class="fa fa-calendar-o"></i>
    2022-10-16 Sun
  </span>
    <span class="entry-info-sep hidden-xs">|</span>
    <span class="hidden-xs">
      <i class="fa fa-user-o"></i>
      By
        <a href="https://honmaple.me/authors/honmaple/index.html">honmaple</a>
    </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-folder-o"></i>
      In
        <a href="https://honmaple.me/categories/linux/index.html">Linux</a>
    </span>
    <span class="entry-info-sep">|</span>
    <span>
      <i class="fa fa-bookmark-o"></i>
      0f
        <a href="https://honmaple.me/tags/linux/index.html">linux</a>
        <a href="https://honmaple.me/tags/snow/index.html">snow</a>
    </span>
</header>

    </div>
    <hr class="entry-hr" />
    <div class="entry-content">
      <div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul>
<li><a href="#heading-1">快速开始</a>
<ul>
<li><a href="#heading-1.1">创建新的站点</a></li>
<li><a href="#heading-1.2">编译和预览</a></li>
</ul></li>
<li><a href="#heading-2">内容</a>
<ul>
<li><a href="#heading-2.1">Section</a>
<ul>
<li><a href="#heading-2.1.1">配置</a></li>
<li><a href="#heading-2.1.2">路径变量(<b>sections.xxx.path</b>)</a></li>
<li><a href="#heading-2.1.3">模版变量(<b>sections.xxx.template</b>)</a></li>
</ul></li>
<li><a href="#heading-2.2">Page</a>
<ul>
<li><a href="#heading-2.2.1">配置</a></li>
<li><a href="#heading-2.2.2">路径变量(<b>sections.xxx.page_path</b>)</a></li>
<li><a href="#heading-2.2.3">模版变量(<b>sections.xxx.page_template</b>)</a></li>
</ul></li>
<li><a href="#heading-2.3">Draft</a></li>
<li><a href="#heading-2.4">Taxonomy</a>
<ul>
<li><a href="#heading-2.4.1">配置</a></li>
<li><a href="#heading-2.4.2">路径变量</a></li>
<li><a href="#heading-2.4.3">模版变量</a></li>
</ul></li>
<li><a href="#heading-2.5">Archive</a></li>
<li><a href="#heading-2.6">Pagination</a>
<ul>
<li><a href="#heading-2.6.1">路径变量</a></li>
<li><a href="#heading-2.6.2">模版变量</a></li>
</ul></li>
<li><a href="#heading-2.7">Static</a></li>
<li><a href="#heading-2.8">Formats</a>
<ul>
<li><a href="#heading-2.8.1">配置</a></li>
<li><a href="#heading-2.8.2">模版变量</a></li>
</ul></li>
<li><a href="#heading-2.9">theme</a>
<ul>
<li><a href="#heading-2.9.1">主题目录结构</a></li>
<li><a href="#heading-2.9.2">配置</a></li>
<li><a href="#heading-2.9.3"><span class="todo">TODO</span>默认配置</a></li>
</ul></li>
<li><a href="#heading-2.10">hook</a>
<ul>
<li><a href="#heading-2.10.1">i18n</a></li>
<li><a href="#heading-2.10.2">encrypt</a></li>
<li><a href="#heading-2.10.3">shortcode</a></li>
<li><a href="#heading-2.10.4">assets</a></li>
</ul></li>
<li><a href="#heading-2.11">本地测试和正式发布</a></li>
</ul></li>
</ul></div></div>

<blockquote>
<p>
一个<b>简单却可配置</b>的静态博客生成器。
很早之前(三年前)就想写一个静态博客生成器，但苦于一直没有时间，最近把之前写的重构了一下，让其可以支持更多的定制化配置。
</p>

<p>
<b>至于为什么要重新写一个</b>:
</p>
<ol>
<li>
<p>
 大概是因为想要把之前未完成的轮子补充完整
</p></li>
<li>
<p>
 我目前使用的博客系统使用的是 <b>pelican</b>，一个基于 <b>Python</b> 的静态博客生成器，目前里面包括了很多我自己写的插件，比如 <code>Emacs org mode</code> 的支持、文章加密、模版定制等，因为需要大量遍历所有文章，导致生成速度越来越慢，还有一点就是因为使用的是 <b>Python</b>，每次本地预览时都需要切换到虚拟环境
</p></li>
<li>
<p>
 我习惯使用 <b>Emacs + Org</b>，除了前期的几篇文章，后面都是使用 <b>org mode</b> 书写，之前是因为 <b>Python</b> 没有一个好用的 <b>org mode</b> 解析库，所以专门写了一个 <code>org-python</code> 用来解析 <b>org mode</b>；最近我也是完善了另一个我很早之前就写的 <code>org-golang</code> 解析库(轮子+1)，准备趁次机会利用一下这个库
</p></li>
<li>
<p>
 至于为什么不用最近几年流行的 <b>Hugo</b>, 因为我想要保持和我使用 <b>Pelican</b> 时一样的功能，比如文章加密，而 <b>hugo</b> 并不支持插件，想要自定义插件必须复制大段大段的启动函数, 甚至需要修改源代码。同样我想要定制一个相同的模版，而对于使用过其它模版系统如Django，jinja2, 再来使用 <b>Go内置模版</b> 的人来说, <b>hugo</b> 的内置模版除了难用就是难用，这也是我此次选用 <b>pongo2</b> 的原因
</p></li>
<li>
<p>
 我的设想是提供插件的接口，并提供一个足够简单的启动函数, 在有用户需要自定义插件时只需要自己创建一个包, 使用三两行代码就能注册自定义插件并重新编译自己的snow
</p></li>
</ol>
</blockquote>

<h2 id="heading-1">快速开始</h2>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ ./snow --help
NAME:
   snow - snow is a static site generator.

USAGE:
   snow [global options] command [command options] [arguments...]

VERSION:
   0.1.0

COMMANDS:
   init     init a new site
   build    build and output
   server   server local files
   help, h  Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --conf FILE, -c FILE  load configuration from FILE (default: &#34;config.yaml&#34;)
   --help, -h            show help (default: false)
   --version, -v         print the version (default: false)</pre>
<h3 id="heading-1.1">创建新的站点</h3>
<pre style="color:#f8f8f2;background-color:#272822">──╼ ./snow init
Welcome to snow 0.1.0.
&gt; Where do you want to create your new web site? [.] mysnow
&gt; What will be the title of this web site? [snow]
&gt; Who will be the author of this web site?
The input is required
&gt; Who will be the author of this web site? honmaple
&gt; What is your URL prefix? (no trailing slash) [http://127.0.0.1:8000]
&gt; Do you want to create first page? [Y/n]</pre>

<h3 id="heading-1.2">编译和预览</h3>
<pre style="color:#f8f8f2;background-color:#272822">└──╼ cd mysnow
└──╼ ../snow server -D
DEBU Copying @theme/static/css/main.css to output/static/css/main.css
INFO Done: Static Processed 1 static files in 588.705µs
DEBU Writing output/categories/index.html
DEBU Writing output/authors/index.html
DEBU Writing output/tags/index.html
DEBU Writing output/posts/index.html
DEBU Writing output/authors/snow/index.html
DEBU Writing output/tags/snow/index.html
DEBU Writing output/categories/linux/index.html
DEBU Writing output/tags/linux/index.html
DEBU Writing output/tags/emacs/index.html
DEBU Writing output/categories/linux/emacs/index.html
INFO Done: Page Processed 1 normal pages, 0 hidden pages, 0 section pages in 10.087804ms
INFO Done: Section Processed 1 posts in 10.1831ms
INFO Done: Taxonomy Processed 1 authors, 3 tags, 1 categories in 10.18788ms</pre>

<h2 id="heading-2">内容</h2>
<h3 id="heading-2.1">Section</h3>
<pre style="color:#f8f8f2;background-color:#272822">content/
├── drafts            // &lt;- http://127.0.0.1:8000/drafts/index.html
│   └── draft1.org    // &lt;- http://127.0.0.1:8000/drafts/index.html
├── pages             // no url, because sections.pages.path is &#34;&#34;
│   └── 404.org       // &lt;- http://127.0.0.1:8000/404.html
└── posts             // &lt;- http://127.0.0.1:8000/posts/index.html
    ├── post1.org     // &lt;- http://127.0.0.1:8000/posts/2022/02/post1.html
    └── subposts      // &lt;- http://127.0.0.1:8000/posts/subposts/index.html
        └── post2.org // &lt;- http://127.0.0.1:8000/posts/2023/02/post2.html</pre>
<h4 id="heading-2.1.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">sections</span>:
  <span style="color:#66d9ef">_default</span>:
    <span style="color:#75715e"># 页面中文章的默认排序, 多字段使用逗号分隔</span>
    <span style="color:#66d9ef">orderby</span>: <span style="color:#e6db74">&#34;date desc&#34;</span>
    <span style="color:#75715e"># 文章筛选，主要用于分页前</span>
    <span style="color:#66d9ef">filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># 页面中文章默认分页, path必须使用{number}变量, 0表示不分页</span>
    <span style="color:#66d9ef">paginate</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#75715e"># 分页路径</span>
    <span style="color:#66d9ef">paginate_path</span>: <span style="color:#e6db74">&#34;{name}{number}{extension}&#34;</span>
    <span style="color:#75715e"># 分页前筛选pages</span>
    <span style="color:#66d9ef">paginate_filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># 生成路径, 为空表示禁止生成相关页面</span>
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;{section}/index.html&#34;</span>
    <span style="color:#75715e"># 使用的模版</span>
    <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;section.html&#34;</span>
    <span style="color:#75715e"># 当前section下所有文章生成路径</span>
    <span style="color:#66d9ef">page_path</span>: <span style="color:#e6db74">&#34;{section}/{slug}/index.html&#34;</span>
    <span style="color:#75715e"># 文章使用的模版</span>
    <span style="color:#66d9ef">page_template</span>: <span style="color:#e6db74">&#34;post.html&#34;</span>
  <span style="color:#66d9ef">posts</span>:
    <span style="color:#66d9ef">page_path</span>: <span style="color:#e6db74">&#34;posts/{date:%Y}/{date:%m}/{slug}.html&#34;</span>
  <span style="color:#66d9ef">pages</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">pages/about</span>:
    <span style="color:#75715e"># 自定义pages/about下的文章生成路径，同时继承pages.path不会生成所有页面</span>
    <span style="color:#66d9ef">page_path</span>: <span style="color:#e6db74">&#34;{slug}/index.html&#34;</span></pre>
<p>
     <b>filter</b> 格式(下同):
</p>
<pre style="color:#f8f8f2;background-color:#272822">&#39;emacs&#39; in tags and not draft or weight &gt; 1</pre>
<p>
     其中 <b>tags</b>, <b>draft</b> 等都是page元数据
</p>

<h4 id="heading-2.1.2">路径变量(<b>sections.xxx.path</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{section}</td>
<td>section名称</td>
</tr>
<tr>
<td>{section:slug}</td>
<td>section slug, 中国 -&gt; zhong-guo</td>
</tr>
</table>

<h4 id="heading-2.1.3">模版变量(<b>sections.xxx.template</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>section</td>
<td></td>
</tr>
<tr>
<td>section.Title</td>
<td>section标题</td>
</tr>
<tr>
<td>section.Path</td>
<td>section相对链接</td>
</tr>
<tr>
<td>section.Permalink</td>
<td>section绝对链接</td>
</tr>
<tr>
<td>section.Content</td>
<td>section内容</td>
</tr>
<tr>
<td>section.Pages</td>
<td>当前section下的文章列表</td>
</tr>
<tr>
<td>section.Children</td>
<td>子section</td>
</tr>
<tr>
<td>section.Parent</td>
<td>父section</td>
</tr>
</table>

<h3 id="heading-2.2">Page</h3>
<h4 id="heading-2.2.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># 文章目录所在, 其中该目录下应该包括一系列子目录，这些子目录的名称对应为 *文章的类型*, 比如 *content/drafts/* 目录下的文章类型为 *drafts*, 当然也可以直接在文章文件头添加 =type: drafts=</span>
<span style="color:#66d9ef">content_dir</span>: <span style="color:#e6db74">&#34;content&#34;</span></pre>
<h4 id="heading-2.2.2">路径变量(<b>sections.xxx.page_path</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{date:%Y}</td>
<td>创建文章的年份</td>
</tr>
<tr>
<td>{date:%m}</td>
<td>创建文章的月份</td>
</tr>
<tr>
<td>{date:%d}</td>
<td>创建文章的日期</td>
</tr>
<tr>
<td>{date:%H}</td>
<td>创建文章的小时</td>
</tr>
<tr>
<td>{lang}</td>
<td>文章语言</td>
</tr>
<tr>
<td>{slug}</td>
<td>文章标题或自定义slug</td>
</tr>
<tr>
<td>{filename}</td>
<td>文件名称(不带后缀名)</td>
</tr>
</table>

<h4 id="heading-2.2.3">模版变量(<b>sections.xxx.page_template</b>)</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>page</td>
<td></td>
</tr>
<tr>
<td>page.Title</td>
<td>页面标题</td>
</tr>
<tr>
<td>page.Lang</td>
<td>页面语言</td>
</tr>
<tr>
<td>page.Date</td>
<td>页面创建时间</td>
</tr>
<tr>
<td>page.Modified</td>
<td>页面修改时间</td>
</tr>
<tr>
<td>page.Aliases</td>
<td>页面其它链接</td>
</tr>
<tr>
<td>page.Path</td>
<td>页面相对链接</td>
</tr>
<tr>
<td>page.Permalink</td>
<td>页面绝对链接</td>
</tr>
<tr>
<td>page.Summary</td>
<td>页面简介</td>
</tr>
<tr>
<td>page.Content</td>
<td>页面内容</td>
</tr>
<tr>
<td>page.Meta.xxx</td>
<td>自定义的元数据</td>
</tr>
<tr>
<td>page.Prev</td>
<td>上一篇</td>
</tr>
<tr>
<td>page.Next</td>
<td>下一篇</td>
</tr>
<tr>
<td>page.HasPrev()</td>
<td>是否有上一篇</td>
</tr>
<tr>
<td>page.HasNext()</td>
<td>是否有下一篇</td>
</tr>
<tr>
<td>page.PrevInType</td>
<td>同一类型上一篇</td>
</tr>
<tr>
<td>page.NextInType</td>
<td>同一类型下一篇</td>
</tr>
<tr>
<td>page.HasPrevInType()</td>
<td>是否有同一类型上一篇</td>
</tr>
<tr>
<td>page.HasNextInType()</td>
<td>是否有同一类型下一篇</td>
</tr>
</table>

<h3 id="heading-2.3">Draft</h3>
<p>
    默认草稿标志为 <code>draft: true</code>, 也可以将所有草稿放入同一个 <b>drafts</b> 目录, 然后就可以在构建时增加筛选条件
</p>
<ul>
<li>
<p>
 排除草稿
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build -F &#39;not draft&#39;</pre>
<p>
      或者
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build --filter &#39;type != &#34;drafts&#34;&#39;</pre></li>
<li>
<p>
 包括草稿
</p>
<pre style="color:#f8f8f2;background-color:#272822">snow build -F &#39;not draft or draft = true&#39;</pre>
<p>
      默认筛选条件可以写入配置 <code>build_filter</code>
</p>
</li>
</ul>
<h3 id="heading-2.4">Taxonomy</h3>
<h4 id="heading-2.4.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">taxonomies</span>:
  <span style="color:#66d9ef">_default</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;{taxonomy}/index.html&#34;</span>
    <span style="color:#75715e"># terms排序, 可选name,count</span>
    <span style="color:#66d9ef">orderby</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;{taxonomy}/list.html&#34;</span>
    <span style="color:#66d9ef">term_path</span>: <span style="color:#e6db74">&#34;{taxonomy}/{term:slug}/index.html&#34;</span>
    <span style="color:#66d9ef">term_template</span>: <span style="color:#e6db74">&#34;{taxonomy}/single.html&#34;</span>
    <span style="color:#75715e"># 文章列表筛选</span>
    <span style="color:#66d9ef">term_filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># 文章列表排序</span>
    <span style="color:#66d9ef">term_orderby</span>: <span style="color:#e6db74">&#34;date desc&#34;</span>
    <span style="color:#75715e"># 文章列表分页</span>
    <span style="color:#66d9ef">term_paginate</span>: <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">term_paginate_path</span>: <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#66d9ef">term_paginate_filter</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">categories</span>:
  <span style="color:#66d9ef">authors</span>:
  tags:</pre>

<h4 id="heading-2.4.2">路径变量</h4>
<ul>
<li>
<p>
 <b>taxonomies.xxx.path</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{taxonomy}</td>
<td>分类系统名称</td>
</tr>
</table></li>
<li>
<p>
 <b>taxonomies.xxx.term_path</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{taxonomy}</td>
<td>分类系统名称</td>
</tr>
<tr>
<td>{term}</td>
<td>分类具体名称</td>
</tr>
<tr>
<td>{term:slug}</td>
<td>分类slug</td>
</tr>
</table>
</li>
</ul>
<h4 id="heading-2.4.3">模版变量</h4>
<ul>
<li>
<p>
 <b>taxonomies.xxx.template</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>taxonomy</td>
<td></td>
</tr>
<tr>
<td>taxonomy.Name</td>
<td>分类系统名称, 如:categories,tags,authors</td>
</tr>
<tr>
<td>taxonomy.Terms</td>
<td></td>
</tr>
</table></li>
<li>
<p>
 <b>taxonomies.xxx.term_template</b>
</p>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>term</td>
<td></td>
</tr>
<tr>
<td>term.Name</td>
<td>分类名称</td>
</tr>
<tr>
<td>term.Path</td>
<td>相对链接</td>
</tr>
<tr>
<td>term.Permalink</td>
<td>绝对链接</td>
</tr>
<tr>
<td>term.List</td>
<td>文章列表</td>
</tr>
<tr>
<td>term.Children</td>
<td>子分类</td>
</tr>
</table>
</li>
</ul>
<h3 id="heading-2.5">Archive</h3>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">taxonomies</span>:
  <span style="color:#66d9ef">date:2006/01</span>:
    <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;archives/index.html&#34;</span>
    <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;archives.html&#34;</span>
    <span style="color:#66d9ef">term_path</span>: <span style="color:#e6db74">&#34;archives/{term}/index.html&#34;</span>
    <span style="color:#66d9ef">term_template</span>: <span style="color:#e6db74">&#34;period_archives.html&#34;</span></pre>
<p>
    归档页面类似分类系统，其它 <b>date:2006/01</b> 表示按年月归档, 并生成链接 <b>/archives/2022/10/index.html</b>
</p>

<h3 id="heading-2.6">Pagination</h3>
<h4 id="heading-2.6.1">路径变量</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>{name}</td>
<td>路径名称</td>
</tr>
<tr>
<td>{extension}</td>
<td>路径扩展</td>
</tr>
<tr>
<td>{number}</td>
<td>页码, 第一页为空</td>
</tr>
<tr>
<td>{number:one}</td>
<td>页码, 第一页为&#34;1&#34;</td>
</tr>
</table>
<ul>
<li>
<p>
 示例一:
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;section/index.html&#34;</span>
<span style="color:#66d9ef">paginate_path</span>: <span style="color:#e6db74">&#34;{name}{number}{extension}&#34;</span></pre>
<ul>
<li>
<p>
 第一页: <code>section/index.html</code>
</p></li>
<li>
<p>
 第二页: <code>section/index2.html</code>
</p></li>
<li>
<p>
 第三页: <code>section/index3.html</code>
</p></li>
</ul></li>
<li>
<p>
 示例二:
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;section/index.html&#34;</span>
<span style="color:#66d9ef">paginate_path</span>: <span style="color:#e6db74">&#34;page/{number:one}{extension}&#34;</span></pre>
<ul>
<li>
<p>
 第一页: <code>section/page/1.html</code>
</p></li>
<li>
<p>
 第二页: <code>section/page/2.html</code>
</p></li>
<li>
<p>
 第三页: <code>section/page/3.html</code>
</p></li>
</ul></li>
</ul>
<h4 id="heading-2.6.2">模版变量</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>paginator</td>
<td></td>
</tr>
<tr>
<td>paginator.URL</td>
<td>分页链接</td>
</tr>
<tr>
<td>paginator.PageNum</td>
<td>当前页</td>
</tr>
<tr>
<td>paginator.Total</td>
<td>总页数</td>
</tr>
<tr>
<td>paginator.HasPrev()</td>
<td>是否有上一页</td>
</tr>
<tr>
<td>paginator.Prev</td>
<td>上一页</td>
</tr>
<tr>
<td>paginator.Prev.URL</td>
<td>上一页链接</td>
</tr>
<tr>
<td>paginator.HasNext()</td>
<td>是否有下一页</td>
</tr>
<tr>
<td>paginator.Next</td>
<td>下一页</td>
</tr>
<tr>
<td>paginator.Next.URL</td>
<td>下一页链接</td>
</tr>
<tr>
<td>paginator.All</td>
<td>所有页</td>
</tr>
<tr>
<td>paginator.List</td>
<td>当前页文章列表</td>
</tr>
</table>

<h3 id="heading-2.7">Static</h3>
<p>
    静态文件配置:
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># 静态文件目录, 该目录区分主题的静态文件static</span>
<span style="color:#66d9ef">static_dirs</span>:
  - <span style="color:#e6db74">&#34;static/&#34;</span>
<span style="color:#75715e"># 静态文件扩展，不配置将会使用静态文件目录下的所有文件</span>
<span style="color:#66d9ef">static_exts</span>:
  - <span style="color:#e6db74">&#34;.js&#34;</span>
  - <span style="color:#e6db74">&#34;.css&#34;</span>
<span style="color:#75715e"># 静态文件路径，用于指定静态文件或静态目录的保存目录, 当有多条路径时，长度优先.</span>
<span style="color:#66d9ef">static_paths</span>:
  <span style="color:#66d9ef">static/CNAME</span>: <span style="color:#e6db74">&#34;/&#34;</span>
  <span style="color:#66d9ef">static/css/main.css</span>: <span style="color:#e6db74">&#34;static/css/&#34;</span>
  <span style="color:#75715e"># 以@theme开头代表主题中的静态文件，即{theme.name}/static</span>
  <span style="color:#66d9ef">&#34;@theme/static&#34;: </span><span style="color:#e6db74">&#34;static/&#34;</span></pre>

<h3 id="heading-2.8">Formats</h3>
<p>
    可以生成 <b>rss</b>，<b>atom</b> 或者其它任意格式(需要自定义模版)
</p>
<h4 id="heading-2.8.1">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># 设置rss格式的默认值</span>
<span style="color:#66d9ef">formats.rss</span>:
  <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;_internal/rss.xml&#34;</span>

<span style="color:#66d9ef">formats.atom</span>:
  <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;_internal/atom.xml&#34;</span>

<span style="color:#66d9ef">sections</span>:
  <span style="color:#66d9ef">_default</span>:
    <span style="color:#75715e"># rss生成路径, 模版将会使用默认模版</span>
    <span style="color:#66d9ef">formats.rss.path</span>: <span style="color:#e6db74">&#34;{section:slug}/index.xml&#34;</span>
    <span style="color:#75715e"># 为空时禁止生成</span>
    <span style="color:#66d9ef">formats.atom.path</span>: <span style="color:#e6db74">&#34;&#34;</span>

<span style="color:#66d9ef">taxonomies</span>:
  <span style="color:#66d9ef">tags</span>:
    <span style="color:#66d9ef">formats.atom</span>:
      <span style="color:#66d9ef">path</span>: <span style="color:#e6db74">&#34;tags/{term:slug}/index.xml&#34;</span>
      <span style="color:#75715e"># 自定义模版</span>
      <span style="color:#66d9ef">template</span>: <span style="color:#e6db74">&#34;custom.atom.xml&#34;</span></pre>
<h4 id="heading-2.8.2">模版变量</h4>
<table>

<tr>
<th>变量</th>
<th>描述</th>
</tr>

<tr>
<td>section</td>
<td>仅生成section 有效</td>
</tr>
<tr>
<td>term</td>
<td>仅生成taxonomy term 有效</td>
</tr>
<tr>
<td>pages</td>
<td>文章列表</td>
</tr>
</table>

<h3 id="heading-2.9">theme</h3>
<h4 id="heading-2.9.1">主题目录结构</h4>
<p>
     其中 <b>templates</b> 和 <b>static</b> 名称不可修改
</p>
<pre style="color:#f8f8f2;background-color:#272822">simple/
├── templates
│   ├── post.html
│   ├── index.html
│   ├── archives.html
├── static
│   ├── main.css</pre>
<h4 id="heading-2.9.2">配置</h4>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">theme</span>:
  <span style="color:#75715e"># 主题名称, 未设置将使用默认主题</span>
  <span style="color:#66d9ef">name</span>: <span style="color:#e6db74">&#34;test-theme&#34;</span>
  <span style="color:#75715e"># 主题模版覆盖, 增加同名的文件到 *override* 配置的目录, snow将会优先使用该文件</span>
  <span style="color:#66d9ef">override</span>: <span style="color:#e6db74">&#34;layouts&#34;</span></pre>

<h4 id="heading-2.9.3"><span class="todo">TODO</span>默认配置</h4>

<h3 id="heading-2.10">hook</h3>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">hooks</span>:
  - <span style="color:#e6db74">&#34;i18n&#34;</span>
  - <span style="color:#e6db74">&#34;assets&#34;</span>
  - <span style="color:#e6db74">&#34;encrypt&#34;</span>
  - <span style="color:#e6db74">&#34;shortcode&#34;</span></pre>
<h4 id="heading-2.10.1">i18n</h4>
<ul>
<li>
<p>
 模版
</p>
<pre style="color:#f8f8f2;background-color:#272822">{% i18n &#34;tags&#34; %}
{% T &#34;tags %d&#34; 12 %}
{{ i18n(&#34;authors&#34;) }}
{{ T(&#34;authors&#34;) }}
{{ _(&#34;authors %f&#34;, 3.14) }}</pre>
<p>
       甚至可以直接使用变量
       {{ _(term.Name) }}
</p></li>
<li>
<p>
 翻译文件
       默认会加载主题下 <b>i18n</b> 目录下的文件
</p>
<pre style="color:#f8f8f2;background-color:#272822">i18n
├── en.yaml
└── zh.yaml</pre>
<p>
       文件内容
</p>
<pre style="color:#f8f8f2;background-color:#272822">---
- <span style="color:#66d9ef">id</span>: <span style="color:#e6db74">&#34;authors&#34;</span>
  <span style="color:#66d9ef">tr</span>: <span style="color:#e6db74">&#34;作者&#34;</span>
- <span style="color:#66d9ef">id</span>: <span style="color:#e6db74">&#34;tags&#34;</span>
  <span style="color:#66d9ef">tr</span>: <span style="color:#e6db74">&#34;标签&#34;</span></pre>

<p>
       也可以自定义文件位置或翻译内容覆盖主题原有的翻译
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">languages.en</span>:
  <span style="color:#66d9ef">translations</span>: <span style="color:#e6db74">&#34;i18n/en.yaml&#34;</span>
<span style="color:#66d9ef">languages.zh</span>:
  <span style="color:#66d9ef">translations</span>:
    - <span style="color:#66d9ef">id</span>: <span style="color:#e6db74">&#34;authors&#34;</span>
      <span style="color:#66d9ef">tr</span>: <span style="color:#e6db74">&#34;作者&#34;</span></pre>
</li>
</ul>
<h4 id="heading-2.10.2">encrypt</h4>
<p>
     内容加密, 需要一个密码
</p>
<pre style="color:#f8f8f2;background-color:#272822">{{ page.Content | encrypt:&#34;123456&#34; }}</pre>

<h4 id="heading-2.10.3">shortcode</h4>
<p>
     用于快速插入已有模版, 示例:
</p>
<pre style="color:#f8f8f2;background-color:#272822">&lt;shortcode _name=&#34;encrypt&#34; password=&#34;1234567&#34;&gt;
hello *markdown*
&lt;/shortcode&gt;

&lt;shortcode _name=&#34;gist&#34; author=&#34;spf13&#34; id=&#34;7896402&#34; /&gt;</pre>

<p>
     可以自定义 <b>shortcode</b> 到主题的 <code>templates/shortcodes</code> 目录下, 目前内置 <b>gist</b>, <b>encrypt</b>
</p>
<h4 id="heading-2.10.4">assets</h4>
<p>
     静态文件处理
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">params</span>:
  <span style="color:#66d9ef">assets</span>:
    <span style="color:#66d9ef">css</span>:
      <span style="color:#66d9ef">files</span>:
        - <span style="color:#e6db74">&#34;@theme/static/scss/main.scss&#34;</span>
        - <span style="color:#e6db74">&#34;@theme/static/scss/entry.scss&#34;</span>
      <span style="color:#66d9ef">filters</span>:
        - <span style="color:#66d9ef">libscss</span>:
            <span style="color:#66d9ef">path</span>: [<span style="color:#e6db74">&#34;@theme/static/scss/&#34;</span>]
        - <span style="color:#66d9ef">cssmin</span>:
      <span style="color:#66d9ef">output</span>: <span style="color:#e6db74">&#34;static/lib.min.css&#34;</span></pre>

<p>
     模版文件
</p>
<pre style="color:#f8f8f2;background-color:#272822">{% assets files=&#34;css/style.scss&#34; filters=&#34;libsass,cssmin&#34; output=&#34;css/style.min.css&#34; %}
&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ config.site.url }}/{{ asset_url }}&#34;</span>&gt;
{% endassets %}

{% assets css %}
&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ config.site.url }}/{{ asset_url }}&#34;</span>&gt;
{% endassets %}</pre>

<h3 id="heading-2.11">本地测试和正式发布</h3>
<p>
    snow 提供了 <b>mode</b> 配置用于区分本地测试和正式发布
</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">site</span>:
  <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;http://127.0.0.1:8000&#34;</span>
  <span style="color:#66d9ef">output_dir</span>: <span style="color:#e6db74">&#34;output&#34;</span>

<span style="color:#66d9ef">mode.publish</span>:
  <span style="color:#66d9ef">site</span>:
    <span style="color:#66d9ef">url</span>: <span style="color:#e6db74">&#34;https://example.com&#34;</span>
    <span style="color:#66d9ef">output_dir</span>: <span style="color:#e6db74">&#34;xxx&#34;</span>

<span style="color:#66d9ef">mode.develop</span>:
  <span style="color:#66d9ef">include</span>: <span style="color:#e6db74">&#34;develop.yaml&#34;</span></pre>
<p>
    只要在构建时使用 <code>snow build --mode publish</code> 即可覆盖本地默认配置
</p>
    </div><div class="entry-copyright">
      <div>
        <i class="fa fa-user-o"></i>
        作者:
          <a href="https://honmaple.me/authors/honmaple/index.html">honmaple</a>
      </div>
  <div>
    <i class="fa fa-link"></i>
    链接:
    <a href="https://honmaple.me/articles/2022/10/Snow静态博客生成器.html">https://honmaple.me/articles/2022/10/Snow静态博客生成器.html</a>
  </div>
  <div>
    <i class="fa fa-copyright"></i>
    版权:
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">
      <img class="hidden-xs" src="https://static.honmaple.com/images/pic/license.png" alt="CC BY-NC-SA 4.0" />
      知识共享署名-非商业性使用-相同方式共享4.0国际许可协议
    </a>
  </div>
</div>

<div class="entry-honor">
  <button class="btn" data-target="#entry-honor-content" data-toggle="collapse">赏</button>
  <div class="collapse" id="entry-honor-content">
    <div class="entry-honor-content">
      <div class="entry-honor-alipay">
        <div class="entry-honor-mask">
          <button class="btn btn-success" data-target=".entry-honor-wechat" data-toggle="collapse">
            <i class="fa fa-wechat"></i>
            <span>微信</span>
          </button>
        </div>
      </div>
      <div class="entry-honor-wechat collapse">
        <img src="https://static.honmaple.com/images/pic/wechat.png" alt="wechat" />
      </div>
    </div>
  </div>
</div>

    <hr class="entry-hr" />
    <ul class="entry-pager">
        <li class="previous">
          <a href="https://honmaple.me/articles/2022/11/人生中的第一台组装电脑.html" title="Previous article: 人生中的第一台组装电脑">
            <i class="fa fa-chevron-left"></i>
            人生中的第一台组装电脑
          </a>
        </li>
        <li class="next">
          <a href="https://honmaple.me/articles/2021/11/Emacs笔记之minibuffer默认输入.html" title="Next article: Emacs笔记之minibuffer默认输入">
            Emacs笔记之minibuffer默认输入
            <i class="fa fa-chevron-right"></i>
          </a>
        </li>
    </ul>
  <div class="comments">
    <div class="text-center">
      <a class="btn entry-read-more entry-comment">加载评论</a>
    </div>
    <div id="comment_thread" issue-term="Snow静态博客生成器"></div>
  </div>

  </article>
      </div>
    </div><div class="entry-footer">
  <ul class="entry-footer-left">
    <li class="hidden-xs">© 2015-2023 honmaple</li>
    <li class="hidden-xs">·</li>
    <li>
        <a href="https://honmaple.me/pages/friends.html" data-no-instant>友链</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/contact.html" data-no-instant>联系</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/project.html" data-no-instant>项目</a>
          <span> | </span>
        <a href="https://honmaple.me/pages/timeline.html" data-no-instant>时间轴</a>
    </li>
  </ul>
  <ul class="entry-footer-right">
    <li><a class="entry-switch-theme" title="切换主题" onclick="switchTheme()"><i class="fa fa-moon-o"></i></a></li>
      <li><a href="https://honmaple.me/pages/music.html" title="Music"><i class="fa fa-music"></i></a></li>
      <li class="hidden-xs"><a href="https://honmaple.me/pages/music.html" title="Feed"><i class="fa fa-feed"></i></a></li>
      <li><a href="https://github.com/honmaple" title="Github"><i class="fa fa-github"></i></a></li>
      <li><a href="https://honmaple.me/pages/travel.html" title="Camera"><i class="fa fa-camera"></i></a></li>
      <li><a href="https://honmaple.me/pages/contact.html" title="Contact"><i class="fa fa-envelope"></i></a></li>
  </ul>
</div>
<div class="back-to-top back-to-top-on">
  <i class="fa fa-hand-o-up" title="back to top"></i>
</div>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88401692-2"></script>
  <script>
     window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-88401692-2');
  </script>


      <script src="https://s.libforest.com/static/js/lib.min.js"></script>
        <script src="https://honmaple.me/static/lib/js/script.min.js"></script>
      <script src="https://s.libforest.com/static/js/instantclick.min.js" data-no-instant></script>
      <script data-no-instant>
       InstantClick.on('change', function() {
         if (typeof ga !== 'undefined') {
           ga('send', 'pageview', location.pathname + location.search);
         }
       });
       InstantClick.init(60);
      </script>
  </body>
</html>
