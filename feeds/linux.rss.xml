<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>HonMaple's Blog - Linux</title><link href="http://honmaple.org/" rel="alternate"></link><link href="http://honmaple.org/feeds/linux.rss.xml" rel="self"></link><id>http://honmaple.org/</id><updated>2017-01-09T00:00:00+08:00</updated><entry><title>升级至python3.6导致环境出错解决</title><link href="http://honmaple.org/articles/2017/01/%E5%8D%87%E7%BA%A7%E8%87%B3python3.6%E5%AF%BC%E8%87%B4%E7%8E%AF%E5%A2%83%E5%87%BA%E9%94%99%E8%A7%A3%E5%86%B3.html" rel="alternate"></link><published>2017-01-09T00:00:00+08:00</published><updated>2017-01-09T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2017-01-09:/articles/2017/01/升级至python3.6导致环境出错解决.html</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="</summary><content type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadline1"&gt;1. 事故（一）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline2"&gt;2. 事故（二）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;最近archlinux升级至了 &lt;strong&gt;python3.6&lt;/strong&gt; ，直接导致了我的开发环境失效,唉&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;archlinux 果然不适合开发&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;虽然后面都已经解决了&lt;/p&gt;
&lt;h2&gt;事故（一）&lt;a id="orgheadline1"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;virtualenv不可用&lt;/strong&gt;,原先使用python3.5创建的环境直接不能用了,只好删了原有了东西,重新使用python3.6创建&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip freeze &amp;gt; requestments.txt
pip install -r requestments.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;事故（二）&lt;a id="orgheadline2"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;py3status&lt;/strong&gt; 报错&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/bin/py3status&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="n"&gt;load_entry_point&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;py3status==3.3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;console_scripts&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;py3status&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)()&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/pkg_resources/__init__.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;561&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;load_entry_point&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;get_distribution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load_entry_point&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/pkg_resources/__init__.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;2631&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;load_entry_point&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;ep&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/pkg_resources/__init__.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;2291&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resolve&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/pkg_resources/__init__.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;2297&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;resolve&lt;/span&gt;
    &lt;span class="n"&gt;module&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;__import__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;module_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fromlist&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;__name__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/py3status/__init__.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;py3status.core&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Py3statusWrapper&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/py3status/core.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;py3status.parse_config&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;process_config&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/py3status/parse_config.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;py3status.private&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;PrivateHide&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PrivateBase64&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/site-packages/py3status/private.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;124&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PrivateBase64&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Private&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="ne"&gt;TypeError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;_catch&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;missing&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="n"&gt;positional&lt;/span&gt; &lt;span class="n"&gt;argument&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;py3status是i3wm status的python 替代品,用着还成,找了一下,在&lt;a href="https://github.com/ultrabug/py3status/pull/610"&gt;https://github.com/ultrabug/py3status/pull/610&lt;/a&gt;
找到解决办法,在以下目录&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/sudo:root@localhost:/usr/lib/python3.6/site-packages/py3status/private.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;修改 &lt;strong&gt;116行&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;EXCLUDE = [&amp;#39;__init__&amp;#39;, &amp;#39;__getattribute__&amp;#39;, &amp;#39;__new__&amp;#39;, &amp;#39;__setattr__&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;为&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;EXCLUDE = [&amp;#39;__init__&amp;#39;, &amp;#39;__getattribute__&amp;#39;, &amp;#39;__new__&amp;#39;, &amp;#39;__setattr__&amp;#39;,&amp;#39;__init_subclass__&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;super + shift + r 重载i3wm&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;不管怎样，恭喜python发布新的版本&lt;/p&gt;</content><category term="linux"></category><category term="i3wm"></category><category term="python"></category><category term="py3status"></category></entry><entry><title>emacs预览图片时禁止smooth-scrolling</title><link href="http://honmaple.org/articles/2016/12/emacs%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87%E6%97%B6%E7%A6%81%E6%AD%A2smooth-scrolling.html" rel="alternate"></link><published>2016-12-24T00:00:00+08:00</published><updated>2016-12-24T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-12-24:/articles/2016/12/emacs预览图片时禁止smooth-scrolling.html</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li</summary><content type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadline1"&gt;1. 需求&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline2"&gt;2. 解决&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h1&gt;需求&lt;a id="orgheadline1"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;在使用 &lt;strong&gt;org-mode&lt;/strong&gt; 写文档时，插入图片后默认不显示，想要直接在 &lt;strong&gt;org&lt;/strong&gt;文件中预览图片，可以使用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;org-toggle-inline-images
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是问题来了，开启预览模式后，移动光标跳过文件内容，找了一下&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/syl20bnr/spacemacs/issues/3824"&gt;参考链接&lt;/a&gt; &lt;sup&gt;&lt;a id="fnr.1" class="footref" href="#fn.1"&gt;1&lt;/a&gt;&lt;/sup&gt;
那么问题来了，如何只在开启 &lt;strong&gt;org-toggle-inline-images&lt;/strong&gt; 后关闭 &lt;strong&gt;smooth-scrooling&lt;/strong&gt;,
关闭 &lt;strong&gt;org-toggle-inline-images&lt;/strong&gt; 后开启 &lt;strong&gt;smooth-scrooling&lt;/strong&gt;&lt;/p&gt;
&lt;h1&gt;解决&lt;a id="orgheadline2"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;给出代码,使用 &lt;strong&gt;defadvice&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(defadvice org-toggle-inline-images (after org-open-at-point activate)
  (if smooth-scrolling-mode (smooth-scrolling-mode -1)
        (smooth-scrolling-mode 1)))
&lt;/pre&gt;&lt;/div&gt;


&lt;div id="footnotes"&gt;
&lt;h2 class="footnotes"&gt;Footnotes: &lt;/h2&gt;
&lt;div id="text-footnotes"&gt;

&lt;div class="footdef"&gt;&lt;sup&gt;&lt;a id="fn.1" class="footnum" href="#fnr.1"&gt;1&lt;/a&gt;&lt;/sup&gt; &lt;div class="footpara"&gt;[https://github.com/syl20bnr/spacemacs/issues/3824](https://github.com/syl20bnr/spacemacs/issues/3824)&lt;/div&gt;&lt;/div&gt;


&lt;/div&gt;
&lt;/div&gt;</content><category term="linux"></category><category term="emacs"></category><category term="org-mode"></category></entry><entry><title>thunar不显示回收站解决</title><link href="http://honmaple.org/articles/2016/10/thunar%E4%B8%8D%E6%98%BE%E7%A4%BA%E5%9B%9E%E6%94%B6%E7%AB%99%E8%A7%A3%E5%86%B3.html" rel="alternate"></link><published>2016-10-17T00:00:00+08:00</published><updated>2016-10-17T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-10-17:/articles/2016/10/thunar不显示回收站解决.html</id><summary type="html">&lt;p&gt;最近打开虚拟机中的thunar时总是不能在界面上显示回收站，而我将 &lt;strong&gt;rm&lt;/strong&gt; 修改成了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mv to Trash
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;经常会清空回收站,所以找了一下解决办法&lt;/p&gt;
&lt;p&gt;[参考问题](https://bbs.archlinux.org/viewtopic.php?id&lt;/p&gt;</summary><content type="html">&lt;p&gt;最近打开虚拟机中的thunar时总是不能在界面上显示回收站，而我将 &lt;strong&gt;rm&lt;/strong&gt; 修改成了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mv to Trash
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;经常会清空回收站,所以找了一下解决办法&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=128637"&gt;参考问题&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;办法很简单&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo pacman -S gvfs
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ok&lt;/p&gt;</content><category term="linux"></category><category term="thunar"></category></entry><entry><title>virtualbox挂载共享文件夹</title><link href="http://honmaple.org/articles/2016/10/virtualbox%E6%8C%82%E8%BD%BD%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9.html" rel="alternate"></link><published>2016-10-17T00:00:00+08:00</published><updated>2016-10-17T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-10-17:/articles/2016/10/virtualbox挂载共享文件夹.html</id><summary type="html">&lt;p&gt;设置 --&amp;gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共享文件夹&lt;ul&gt;
&lt;li&gt;[X] 固定分配&lt;/li&gt;
&lt;li&gt;[X] 自动挂载&lt;/li&gt;
&lt;li&gt;[X] 共享文件夹名称&lt;strong&gt;Share&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虚拟机里&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo mkdir /mnt/share
su
&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;设置 --&amp;gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共享文件夹&lt;ul&gt;
&lt;li&gt;[X] 固定分配&lt;/li&gt;
&lt;li&gt;[X] 自动挂载&lt;/li&gt;
&lt;li&gt;[X] 共享文件夹名称&lt;strong&gt;Share&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虚拟机里&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo mkdir /mnt/share
sudo mount -t vboxsf Share /mnt/share
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category><category term="virtualbox"></category></entry><entry><title>tar打包排除目录</title><link href="http://honmaple.org/articles/2016/07/tar%E6%89%93%E5%8C%85%E6%8E%92%E9%99%A4%E7%9B%AE%E5%BD%95.html" rel="alternate"></link><published>2016-07-25T00:00:00+08:00</published><updated>2016-07-25T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-07-25:/articles/2016/07/tar打包排除目录.html</id><summary type="html">&lt;p&gt;使用 &lt;strong&gt;--exclude&lt;/strong&gt; + 需要排除的目录&lt;/p&gt;
&lt;p&gt;示例:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tar zcvf hello.tar.gz --exclude=&amp;quot;**/__pycache__&amp;quot; maple/ manager.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt; :&lt;/p&gt;
&lt;p&gt;--exclude 参数需要在要打包的文件或目录前,否则不起作用,&lt;/p&gt;</summary><content type="html">&lt;p&gt;使用 &lt;strong&gt;--exclude&lt;/strong&gt; + 需要排除的目录&lt;/p&gt;
&lt;p&gt;示例:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tar zcvf hello.tar.gz --exclude=&amp;quot;**/__pycache__&amp;quot; maple/ manager.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt; :&lt;/p&gt;
&lt;p&gt;--exclude 参数需要在要打包的文件或目录前,否则不起作用,另外排除的目录后不能加 &lt;strong&gt;/&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;--exclude 同样用于 &lt;strong&gt;排除文件&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tar zcvf hello.tar.gz --exclude=&amp;quot;*.pyc&amp;quot; maple/ manager.py
&lt;/pre&gt;&lt;/div&gt;</content><category term="tar"></category><category term="linux"></category></entry><entry><title>virtualbox中使用U盘等usb设备</title><link href="http://honmaple.org/articles/2016/07/virtualbox%E4%B8%AD%E4%BD%BF%E7%94%A8U%E7%9B%98%E7%AD%89usb%E8%AE%BE%E5%A4%87.html" rel="alternate"></link><published>2016-07-15T00:00:00+08:00</published><updated>2016-07-15T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-07-15:/articles/2016/07/virtualbox中使用U盘等usb设备.html</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadl</summary><content type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadline4"&gt;1. 安装VirtualBox Extension Pack&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadline1"&gt;1.1. 下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline2"&gt;1.2. 安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline3"&gt;1.3. 卸载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline5"&gt;2. 启用usb设备&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;主系统:archlinux + virtualbox 5.0.24-1&lt;/p&gt;
&lt;p&gt;虚拟机:windows&lt;/p&gt;
&lt;h1&gt;安装VirtualBox Extension Pack&lt;a id="orgheadline4"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;h2&gt;下载&lt;a id="orgheadline1"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;先从官网下载扩展包 &lt;a href="https://www.virtualbox.org/wiki/Downloads"&gt;https://www.virtualbox.org/wiki/Downloads&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt; :版本要一致&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ pacman -Qi virtualbox
名字           : virtualbox
版本           : 5.0.24-1
描述           : Powerful x86 virtualization for enterprise as well as home use
架构           : x86_64
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;所以下载 &lt;strong&gt;5.0&lt;/strong&gt; 版本的pack&lt;/p&gt;
&lt;h2&gt;安装&lt;a id="orgheadline2"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;参考 &lt;a href="https://wiki.archlinux.org/index.php/VirtualBox_(%25E7%25AE%2580%25E4%25BD%2593%25E4%25B8%25AD%25E6%2596%2587)"&gt;https://wiki.archlinux.org/index.php/VirtualBox&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-5.0.24-108355.vbox-extpack
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装不一致的版本会&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ sudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-5.1.0-108711.vbox-extpack
0%...
Progress state: NS_ERROR_FAILURE
VBoxManage: error: Failed to install &amp;quot;/home/jianglin/VirtualBox VMs/extpack/Oracle_VM_VirtualBox_Extension_Pack-5.1.0-108711.vbox-extpack&amp;quot;
VBoxManage: error: VBoxExtPackRegister returned VERR_VERSION_MISMATCH, pReg=0000000000000000 ErrInfo=&amp;#39;VirtualBox version mismatch - expected 5.1 got 5.0&amp;#39;
VBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component ExtPackManagerWrap, interface IExtPackManager
VBoxManage: error: Context: &amp;quot;RTEXITCODE handleExtPack(HandlerArg*)&amp;quot; at line 1158 of file VBoxManageMisc.cpp
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;卸载&lt;a id="orgheadline3"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;参考 &lt;a href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-extpack"&gt;https://www.virtualbox.org/manual/ch08.html#vboxmanage-extpack&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;不是&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ sudo VBoxManage extpack uninstall Oracle_VM_VirtualBox_Extension_Pack-5.0.24-108355.vbox-extpack
 0%...
 Progress state: NS_ERROR_FAILURE
 VBoxManage: error: Failed to uninstall &amp;quot;Oracle_VM_VirtualBox_Extension_Pack-5.0.24-108355.vbox-extpack&amp;quot;
 VBoxManage: error: Invalid extension pack name specified
 VBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component ExtPackManagerWrap, interface IExtPackManager
 VBoxManage: error: Context: &amp;quot;RTEXITCODE handleExtPack(HandlerArg*)&amp;quot; at line 1199 of file VBoxManageMisc.cpp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;而是&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ sudo VBoxManage extpack uninstall &amp;quot;Oracle VM VirtualBox Extension Pack&amp;quot;
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Successfully uninstalled &amp;quot;Oracle VM VirtualBox Extension Pack&amp;quot;.
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;启用usb设备&lt;a id="orgheadline5"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;虚拟机需要 &lt;strong&gt;关机&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;设置-&amp;gt;USB设备-&amp;gt;启用USB控制器-&amp;gt;勾选3.0&lt;/p&gt;
&lt;p&gt;开机:顶部 &lt;strong&gt;设备&lt;/strong&gt; 里选择 &lt;strong&gt;USB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;OK,就这样&lt;/p&gt;</content><category term="linux"></category><category term="virtualbox"></category></entry><entry><title>emacs解决windowns文件乱码</title><link href="http://honmaple.org/articles/2016/06/emacs%E8%A7%A3%E5%86%B3windowns%E6%96%87%E4%BB%B6%E4%B9%B1%E7%A0%81.html" rel="alternate"></link><published>2016-06-22T00:00:00+08:00</published><updated>2016-06-22T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-06-22:/articles/2016/06/emacs解决windowns文件乱码.html</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadline1"&gt;1.</summary><content type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#orgheadline1"&gt;1. 换系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline2"&gt;2. 修改language环境&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orgheadline3"&gt;3. 重新以gb2312的编码载入文件(推荐)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;最近在看windows文件时总是乱码，查了资料后才知道windowns下的编码为 &lt;strong&gt;gb2312&lt;/strong&gt; ,
而linux下的编码为 &lt;strong&gt;utf-8&lt;/strong&gt; ,所以打开文件会乱码&lt;/p&gt;
&lt;p&gt;如何解决?&lt;/p&gt;
&lt;h3&gt;换系统&lt;a id="orgheadline1"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;这不是废话吗!&lt;/p&gt;
&lt;h3&gt;修改language环境&lt;a id="orgheadline2"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在配置文件中加入这么一行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(set-language-environment &amp;#39;Chinese-GB)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;重启就行,结果····打开 linux下的文件乱码&lt;/p&gt;
&lt;h3&gt;重新以gb2312的编码载入文件(推荐)&lt;a id="orgheadline3"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/pfanaya/article/details/6205640"&gt;参考这里&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;M-x revert-buffer-with-coding-system
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;选择chinese-gb2312,确认载入(不需要重启)&lt;/p&gt;
&lt;p&gt;ok,是不是很简单&lt;/p&gt;</content><category term="linux"></category><category term="emacs"></category></entry><entry><title>flask时间格式化</title><link href="http://honmaple.org/articles/2016/06/flask%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96.html" rel="alternate"></link><published>2016-06-15T00:00:00+08:00</published><updated>2016-06-15T00:00:00+08:00</updated><author><name>2016-06-15 23:46:00</name></author><id>tag:honmaple.org,2016-06-15:/articles/2016/06/flask时间格式化.html</id><summary type="html">&lt;p&gt;在前端显示为该问题 "几分钟前发表或几天前发表"&lt;/p&gt;</summary><content type="html">&lt;p&gt;后端通过filter注册&lt;/p&gt;
&lt;p&gt;[参考资料]&lt;/p&gt;
&lt;p&gt;在前端显示为该问题 "几分钟前发表或几天前发表"&lt;/p&gt;
&lt;p&gt;后端通过filter注册&lt;/p&gt;
&lt;p&gt;&lt;a href="http://flask.pocoo.org/snippets/33/"&gt;参考资料&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;设计需求&lt;a id="orgheadline1"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;如果问题发表超过 &lt;strong&gt;10天&lt;/strong&gt; ,则显示为 &lt;em&gt;%Y-%m-%d %H:%M&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果小于 &lt;strong&gt;10天&lt;/strong&gt; ，但是大于 &lt;strong&gt;1天&lt;/strong&gt; ，则显示为 &lt;em&gt;n天前&lt;/em&gt; 发表&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果小于 &lt;strong&gt;1天&lt;/strong&gt; ，但是大于 &lt;strong&gt;1小时&lt;/strong&gt; ，则显示为 &lt;em&gt;n小时前&lt;/em&gt; 发表&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果小于 &lt;strong&gt;1小时&lt;/strong&gt; ，但是大于 &lt;strong&gt;90秒&lt;/strong&gt; ，则显示为 &lt;em&gt;n分钟前&lt;/em&gt; 发表&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果小于 &lt;strong&gt;90秒&lt;/strong&gt; ，则显示为 &lt;em&gt;刚刚&lt;/em&gt; 发表&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;具体实现&lt;a id="orgheadline2"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;通过 &lt;code&gt;diff.days&lt;/code&gt; 和 &lt;code&gt;diff.seconds&lt;/code&gt; 实现&lt;/p&gt;
&lt;p&gt;比如，大于10天&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;if diff.days &amp;gt; 10:
    return dt.strftime(&amp;#39;%Y-%m-%d %H:%M&amp;#39;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;大于90秒,小于1小时&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;if diff.seconds &amp;lt;= 3600 and diff.seconds &amp;gt; 90:
    periods = ((diff.seconds / 60, &amp;quot;minute&amp;quot;, &amp;quot;minutes&amp;quot;), )
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;具体代码&lt;a id="orgheadline3"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def timesince(dt, default=&amp;quot;just now&amp;quot;):
    now = datetime.now()
    diff = now - dt
    if diff.days &amp;gt; 10:
        return dt.strftime(&amp;#39;%Y-%m-%d %H:%M&amp;#39;)
    if diff.days &amp;lt;= 10 and diff.days &amp;gt; 0:
        periods = ((diff.days, &amp;quot;day&amp;quot;, &amp;quot;days&amp;quot;), )
    if diff.days &amp;lt;= 0 and diff.seconds &amp;gt; 3600:
        periods = ((diff.seconds / 3600, &amp;quot;hour&amp;quot;, &amp;quot;hours&amp;quot;), )
    if diff.seconds &amp;lt;= 3600 and diff.seconds &amp;gt; 90:
        periods = ((diff.seconds / 60, &amp;quot;minute&amp;quot;, &amp;quot;minutes&amp;quot;), )
    if diff.seconds &amp;lt;= 90:
        return default

    for period, singular, plural in periods:

        if period:
            return &amp;quot;%d %s ago&amp;quot; % (period, singular if period == 1 else
                                    plural)

    return default
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ok,之后就可以&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;app.jinja_env.filters[&amp;#39;timesince&amp;#39;] = timesince
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;来实现几分钟前发表的功能了&lt;/p&gt;</content><category term="python"></category><category term="flask"></category><category term="datetime"></category></entry><entry><title>linux下串口读写权限问题</title><link href="http://honmaple.org/articles/2016/06/linux%E4%B8%8B%E4%B8%B2%E5%8F%A3%E8%AF%BB%E5%86%99%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98.html" rel="alternate"></link><published>2016-06-15T00:00:00+08:00</published><updated>2016-06-15T00:00:00+08:00</updated><author><name>honmaple</name></author><id>tag:honmaple.org,2016-06-15:/articles/2016/06/linux下串口读写权限问题.html</id><summary type="html">&lt;p&gt;方法很简单，将用户加入串口所对应的group，需要 &lt;strong&gt;注意&lt;/strong&gt; 的是不同的系统对应的group可能不同&lt;/p&gt;
&lt;p&gt;按照网上说的加入 &lt;strong&gt;dialout&lt;/strong&gt;,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ sudo usermod -a -G  dialout username
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;结果提示
*dialo&lt;/p&gt;</summary><content type="html">&lt;p&gt;方法很简单，将用户加入串口所对应的group，需要 &lt;strong&gt;注意&lt;/strong&gt; 的是不同的系统对应的group可能不同&lt;/p&gt;
&lt;p&gt;按照网上说的加入 &lt;strong&gt;dialout&lt;/strong&gt;,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ sudo usermod -a -G  dialout username
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;结果提示
&lt;em&gt;dialout”组不存在&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;查看对应的组&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└──╼ ls -al /dev/ttyUSB0
crw-rw---- 1 root uucp 188, 0 6月  15 23:09 /dev/ttyUSB0
└──╼ sudo usermod -a -G  uucp username
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ok,之后重启一下&lt;/p&gt;</content><category term="linux"></category><category term="C51"></category><category term="串口"></category></entry><entry><title>archlinux更换默认内核为linux-lts</title><link href="http://honmaple.org/articles/2016/06/archlinux%E6%9B%B4%E6%8D%A2%E9%BB%98%E8%AE%A4%E5%86%85%E6%A0%B8%E4%B8%BAlinux-lts.html" rel="alternate"></link><published>2016-06-12T00:00:00+08:00</published><updated>2016-06-12T00:00:00+08:00</updated><author><name>2016-06-12 16:23:00</name></author><id>tag:honmaple.org,2016-06-12:/articles/2016/06/archlinux更换默认内核为linux-lts.html</id><summary type="html">&lt;p&gt;前几天更新内核到了 &lt;strong&gt;4.6.2&lt;/strong&gt; ，结果很不幸,电脑变得非常卡(貌似只有我遇到这个问题?),&lt;/p&gt;</summary><content type="html">&lt;p&gt;前几天更新内核到了 &lt;strong&gt;4.6.2&lt;/strong&gt; ，结果很不幸,电脑变得非常卡(貌似只有我遇到这个问题?),
实在是找不到解决办法了，于是将内核更改为 &lt;em&gt;linux-lts&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;更改办法很简单，重装  &lt;em&gt;linux-lts&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S linux-lts
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;重启之前，请确认安装了  &lt;/p&gt;
&lt;p&gt;&lt;img alt="img" src="http://7xs8ln.com1.z0.glb.clouddn.com/2016-06-12_16-09-09.png?mageView2/2/w/360/h/200/q/100"&gt;  &lt;/p&gt;
&lt;p&gt;(注：我的是双显卡，还需要安装 &lt;em&gt;bbswitch-lts&lt;/em&gt; )&lt;/p&gt;</content><category term="linux"></category><category term="archlinux"></category></entry></feed>