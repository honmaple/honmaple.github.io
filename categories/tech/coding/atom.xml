<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh">
  <title>紅楓吟 - Coding</title>
    <subtitle>风落花语风落天，花落风雨花落田.</subtitle>
  <link href="https://honmaple.me/categories/tech/coding/atom.xml" rel="self" type="application/atom+xml"/>
  <link href="https://honmaple.me"/>
  <generator uri="https://github.com/honmaple/snow">Snow</generator>
    <updated>Wed, 21 Aug 2024 15:45:56 +0000</updated>
  <id>https://honmaple.me</id>
    <entry xml:lang="zh">
      <title>基于Quasar实现一个树状选择器TreeSelect</title>
      <link href="" rel="alternate"></link>
      <published>Tue, 09 May 2023 23:23:52 +0000</published>
      <updated>Wed, 21 Aug 2024 15:45:56 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2023/05/基于Quasar实现一个树状选择器TreeSelect.html" type="text/html"/>
      <id>https://honmaple.me/articles/2023/05/基于Quasar实现一个树状选择器TreeSelect.html</id>
      <summary type="html">
&lt;blockquote&gt;
&lt;p&gt;
&lt;code&gt;Quasar&lt;/code&gt; 默认没有树状选择器的支持，而在 &lt;code&gt;Vue&lt;/code&gt; 中通常会使用一个现成的&lt;a href=&quot;https://github.com/riophae/vue-treeselect&quot;&gt;vue-treeselect&lt;/a&gt;, 这是一个非常不错的 &lt;code&gt;Select&lt;/code&gt; 组件, 此次不使用该组件，而是利用 &lt;code&gt;Quasar&lt;/code&gt; 中的 &lt;code&gt;q-select&lt;/code&gt; 和 &lt;code&gt;q-tree&lt;/code&gt; 结合，实现一个类似的树状选择器
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;源数据结构&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;{
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;,
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;admin&amp;#34;&lt;/span&gt;,
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;desc&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;...&lt;/span&gt;&lt;/pre&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;源数据结构&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;组件模版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-3&quot;&gt;组件选项&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4&quot;&gt;最终实现&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;code&gt;Quasar&lt;/code&gt; 默认没有树状选择器的支持，而在 &lt;code&gt;Vue&lt;/code&gt; 中通常会使用一个现成的&lt;a href=&quot;https://github.com/riophae/vue-treeselect&quot;&gt;vue-treeselect&lt;/a&gt;, 这是一个非常不错的 &lt;code&gt;Select&lt;/code&gt; 组件, 此次不使用该组件，而是利用 &lt;code&gt;Quasar&lt;/code&gt; 中的 &lt;code&gt;q-select&lt;/code&gt; 和 &lt;code&gt;q-tree&lt;/code&gt; 结合，实现一个类似的树状选择器
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;源数据结构&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;{
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;,
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;admin&amp;#34;&lt;/span&gt;,
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;desc&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;管理员&amp;#34;&lt;/span&gt;,
    &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;children&amp;#34;&lt;/span&gt;: [{
        &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#ae81ff&quot;&gt;6&lt;/span&gt;,
        &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;superadmin&amp;#34;&lt;/span&gt;,
        &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;desc&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;超级管理员&amp;#34;&lt;/span&gt;,
        &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;children&amp;#34;&lt;/span&gt;: [{
            &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#ae81ff&quot;&gt;10&lt;/span&gt;,
            &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;vvvvv&amp;#34;&lt;/span&gt;,
            &lt;span style=&quot;color:#f92672&quot;&gt;&amp;#34;desc&amp;#34;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;dddd&amp;#34;&lt;/span&gt;,
        }]
    }]
}&lt;/pre&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;组件模版&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-select&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;dense&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;outlined&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;emit-value&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;map-options&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;option-value&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;option-label&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;label&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;角色列表&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;:options&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;list&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;:loading&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.loading&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;:multiple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;multiple&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;:use-chips&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;multiple&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;filter&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;filterFn&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;:model-value&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;modelValue&amp;#34;&lt;/span&gt;
            &lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;update:model-value&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;value =&amp;gt; $emit(&amp;#39;update:modelValue&amp;#39;, value)&amp;#34;&lt;/span&gt; &amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot:option&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;{ itemProps, opt, selected, toggleOption }&amp;#34;&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-tree&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:nodes&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;[opt]&amp;#34;&lt;/span&gt;
              &lt;span style=&quot;color:#a6e22e&quot;&gt;node-key&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;
              &lt;span style=&quot;color:#a6e22e&quot;&gt;label-key&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;
              &lt;span style=&quot;color:#a6e22e&quot;&gt;:tick-strategy&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;multiple?&amp;#39;strict&amp;#39;:&amp;#39;none&amp;#39;&amp;#34;&lt;/span&gt;
              &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model:ticked&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.ticked&amp;#34;&lt;/span&gt;
              &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model:selected&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.selected&amp;#34;&lt;/span&gt;
              &lt;span style=&quot;color:#a6e22e&quot;&gt;v-if&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;opt.parent_id == 0&amp;#34;&lt;/span&gt;&amp;gt;
        &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot:default-header&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;prop&amp;#34;&lt;/span&gt;&amp;gt;
          &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;div&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;items-center&amp;#34;&lt;/span&gt;&amp;gt;
            {{ prop.node.desc }}({{ prop.node.name }})
          &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;div&lt;/span&gt;&amp;gt;
        &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;
      &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-tree&lt;/span&gt;&amp;gt;
    &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;
  &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-select&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;
   这里利用 &lt;code&gt;slot&lt;/code&gt; 方式添加 &lt;code&gt;q-tree&lt;/code&gt; 组件, 由于只能传递单个选项(&lt;code&gt;option&lt;/code&gt;), 所以在传递给 &lt;code&gt;q-tree&lt;/code&gt; 的参数 &lt;code&gt;nodes&lt;/code&gt; 需要修改成 &lt;code&gt;[opt]&lt;/code&gt;。
&lt;/p&gt;

&lt;p&gt;
   而在 &lt;code&gt;q-tree&lt;/code&gt; 中，单选和多选同样有区别，单选所使用的参数为 &lt;code&gt;v-model:ticked&lt;/code&gt;, 点击选项即可选中，多选所使用的参数为 &lt;code&gt;v-model:selected&lt;/code&gt;, 配置为多选状态时每个树状列表选项前会添加一个 &lt;code&gt;checkbox&lt;/code&gt;，多选状态需要配置 &lt;code&gt;tick-strategy&lt;/code&gt; 参数
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;code&gt;strict&lt;/code&gt;: 父选项和子选项的选中状态相互独立
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;code&gt;leaf&lt;/code&gt;: 选中父选项同时选中父选项下的子选项
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;code&gt;none&lt;/code&gt;: 禁用多选
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-3&quot;&gt;组件选项&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;props&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;defineProps&lt;/span&gt;({
    &lt;span style=&quot;color:#a6e22e&quot;&gt;multiple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;type&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; Boolean,
        &lt;span style=&quot;color:#66d9ef&quot;&gt;default&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;,
    },
    &lt;span style=&quot;color:#a6e22e&quot;&gt;modelValue&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;default&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;null&lt;/span&gt;,
        &lt;span style=&quot;color:#a6e22e&quot;&gt;required&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;,
    },
})
&lt;/pre&gt;
&lt;p&gt;
   父组件可以使用
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;role-select&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;multiple&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;form.roles&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;role-select&lt;/span&gt;&amp;gt;&lt;/pre&gt;

&lt;p&gt;
   同时，为了区分多选和单选, 需要将没有用到的选项设置为 &lt;code&gt;undefined&lt;/code&gt;, 同时监听选项的修改
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;emit&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;defineEmits&lt;/span&gt;([&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;update:model-value&amp;#39;&lt;/span&gt;])
&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; { &lt;span style=&quot;color:#a6e22e&quot;&gt;modelValue&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;multiple&lt;/span&gt; } &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;toRefs&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;props&lt;/span&gt;)

&lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;multiple&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;) {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;selected&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;undefined&lt;/span&gt;

    &lt;span style=&quot;color:#a6e22e&quot;&gt;watch&lt;/span&gt;(() =&amp;gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;ticked&lt;/span&gt;, (&lt;span style=&quot;color:#a6e22e&quot;&gt;val&lt;/span&gt;) =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;emit&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;update:model-value&amp;#39;&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;val&lt;/span&gt;)
    })

} &lt;span style=&quot;color:#66d9ef&quot;&gt;else&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;ticked&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;undefined&lt;/span&gt;

    &lt;span style=&quot;color:#a6e22e&quot;&gt;watch&lt;/span&gt;(() =&amp;gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;selected&lt;/span&gt;, (&lt;span style=&quot;color:#a6e22e&quot;&gt;val&lt;/span&gt;) =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;emit&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;update:model-value&amp;#39;&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;val&lt;/span&gt;)
    })
}
&lt;/pre&gt;

&lt;p&gt;
   为了让子选项在选中状态时也能够显示 &lt;code&gt;.name&lt;/code&gt;，而不是 &lt;code&gt;.id&lt;/code&gt;，需要遍历所有选项，将其合成一个列表，在 &lt;code&gt;q-tree&lt;/code&gt; 组件中通过判断 &lt;code&gt;row.parent_id&lt;/code&gt; 只显示父组件, 这里也可以通过定义 &lt;code&gt;q-select&lt;/code&gt; 的 &lt;code&gt;selected&lt;/code&gt; 或者是 &lt;code&gt;selected-item&lt;/code&gt; 插槽来显示正确的名称
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#f92672&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; []
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; []
    &lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;forEach&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt; =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;push&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;)
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;children&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;children&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;length&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;) {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;concat&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;children&lt;/span&gt;))
        }
    })
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;computed&lt;/span&gt;(() =&amp;gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;)
})
&lt;/pre&gt;

&lt;p&gt;
   最后就是从后端获取列表数据
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;ref&lt;/span&gt;({
    &lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;ticked&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;selected&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;loading&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;,
})

&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;handleFetch&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;props&lt;/span&gt;) =&amp;gt; {
    ...
    &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;loading&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;api&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;fetchList&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;query&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;then&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;response&lt;/span&gt; =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;response&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;data&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;
    }).&lt;span style=&quot;color:#66d9ef&quot;&gt;finally&lt;/span&gt;(() =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;loading&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
    })
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;filterFn&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;val&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;update&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;abort&lt;/span&gt;) =&amp;gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;length&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;) {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;update&lt;/span&gt;()
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt;
    }
    &lt;span style=&quot;color:#a6e22e&quot;&gt;update&lt;/span&gt;(() =&amp;gt; {&lt;span style=&quot;color:#a6e22e&quot;&gt;handleFetch&lt;/span&gt;()})
}
&lt;/pre&gt;

&lt;h2 id=&quot;heading-4&quot;&gt;最终实现&lt;/h2&gt;
   &lt;div class=&quot;img-layout&quot;&gt;
&lt;p&gt;
   
&lt;a href=&quot;https://s.libforest.com/images/2023/05/quasar-tree-select.png-show&quot; data-fancybox=&quot;image&quot;&gt;
  &lt;img data-src=&quot;https://s.libforest.com/images/2023/05/quasar-tree-select.png-thumb&quot; class=&quot;lazyload&quot; /&gt;
&lt;/a&gt;
   
&lt;a href=&quot;https://s.libforest.com/images/2023/05/quasar-tree-select-multiple.png-show&quot; data-fancybox=&quot;image&quot;&gt;
  &lt;img data-src=&quot;https://s.libforest.com/images/2023/05/quasar-tree-select-multiple.png-thumb&quot; class=&quot;lazyload&quot; /&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;/div&gt;</content>
        <category term="Tech/Coding"></category>
    </entry>
    <entry xml:lang="zh">
      <title>基于Quasar实现一个树状表格TableTree</title>
      <link href="" rel="alternate"></link>
      <published>Sat, 29 Apr 2023 00:03:40 +0000</published>
      <updated>Wed, 21 Aug 2024 15:46:45 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2023/04/基于Quasar实现一个树状表格TableTree.html" type="text/html"/>
      <id>https://honmaple.me/articles/2023/04/基于Quasar实现一个树状表格TableTree.html</id>
      <summary type="html">
&lt;blockquote&gt;
&lt;p&gt;
&lt;a href=&quot;https://quasar.dev/&quot;&gt;Quasar&lt;/a&gt; 是一个基于 &lt;code&gt;Vue3&lt;/code&gt; 的前端UI框架，使用的是 &lt;b&gt;Material Design&lt;/b&gt;, 对于国内而言(包括我)觉得确实不太好看，但因为之前使用的是 &lt;code&gt;Element-UI&lt;/code&gt;，大概是由于审美疲劳，此次升级我的后台管理UI，没有继续使用 &lt;code&gt;Vue3&lt;/code&gt; 版本的 &lt;code&gt;Element-Plus&lt;/code&gt;。 不久前我也是基于 &lt;code&gt;Quasar&lt;/code&gt; 开发了一个 Memos 客户端, 感觉效果还不错
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;前言&lt;/h2&gt;
&lt;p&gt;
   &lt;code&gt;Quasar&lt;/code&gt; 默认没有树状表格的支持，但我觉得树状表格其实还挺重要的，尤其是在显示一些树状的数据，比如一个部门列表(打比方), 树状表格能够清晰的表明各部门之间的上下关系，目前我看实现树状表格的示例要么是基于 &lt;code&gt;qhierarchy...&lt;/code&gt;&lt;/p&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;前言&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;实现一(废弃)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-3&quot;&gt;实现二&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4&quot;&gt;最终实现&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;a href=&quot;https://quasar.dev/&quot;&gt;Quasar&lt;/a&gt; 是一个基于 &lt;code&gt;Vue3&lt;/code&gt; 的前端UI框架，使用的是 &lt;b&gt;Material Design&lt;/b&gt;, 对于国内而言(包括我)觉得确实不太好看，但因为之前使用的是 &lt;code&gt;Element-UI&lt;/code&gt;，大概是由于审美疲劳，此次升级我的后台管理UI，没有继续使用 &lt;code&gt;Vue3&lt;/code&gt; 版本的 &lt;code&gt;Element-Plus&lt;/code&gt;。 不久前我也是基于 &lt;code&gt;Quasar&lt;/code&gt; 开发了一个 Memos 客户端, 感觉效果还不错
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;前言&lt;/h2&gt;
&lt;p&gt;
   &lt;code&gt;Quasar&lt;/code&gt; 默认没有树状表格的支持，但我觉得树状表格其实还挺重要的，尤其是在显示一些树状的数据，比如一个部门列表(打比方), 树状表格能够清晰的表明各部门之间的上下关系，目前我看实现树状表格的示例要么是基于 &lt;code&gt;qhierarchy&lt;/code&gt; (使用 &lt;code&gt;q-markup-table&lt;/code&gt; 实现，定制太困难), 要么就是实现方式太复杂 &lt;a href=&quot;https://forum.quasar-framework.org/topic/2428/tree-table-example&quot;&gt;tree-table-example&lt;/a&gt;, 所以我研究了一下，发现其实还挺简单的，故此记录
&lt;/p&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;实现一(废弃)&lt;/h2&gt;
&lt;p&gt;
   虽然 &lt;code&gt;Quasar&lt;/code&gt; 没有树状表格的组件, 但 &lt;code&gt;q-table&lt;/code&gt; 默认是支持 &lt;code&gt;Expanding rows&lt;/code&gt; 的，所以我一开始的想法是使用这个功能实现一个递归的组件, 就像这样
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-tr&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:key&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;row.id&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:props&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;slot&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:row&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;row&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:status&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;status&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:indent&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;indent&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:indentStyle&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;indentStyle(indent)&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;slot&lt;/span&gt;&amp;gt;
  &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-tr&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:key&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;index&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-for&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;(child, index) in row.children&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-if&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;status.expand&amp;#34;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;table-tree&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:props&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:indent&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;indent + 1&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:row&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;child&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope&amp;#34;&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;slot&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:row&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.row&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:status&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.status&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:indent&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.indent&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:indentStyle&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;indentStyle(scope.indent)&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;slot&lt;/span&gt;&amp;gt;
    &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;table-tree&lt;/span&gt;&amp;gt;
  &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;
   而在父组件中调用只需要把原来的 &lt;code&gt;props&lt;/code&gt; 改成 &lt;code&gt;scope&lt;/code&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot:body&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;table-tree&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:props&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:row&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.row&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope&amp;#34;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;auto-width&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-checkbox&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;size&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;sm&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.status.selected&amp;#34;&lt;/span&gt; /&amp;gt;
    &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-btn&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;flat&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;round&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;dense&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;size&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;xs&amp;#34;&lt;/span&gt;
             &lt;span style=&quot;color:#a6e22e&quot;&gt;:icon&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.status.expand ? &amp;#39;remove&amp;#39; : &amp;#39;add&amp;#39;&amp;#34;&lt;/span&gt;
             &lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;click&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.status.expand = !scope.status.expand&amp;#34;&lt;/span&gt;
             &lt;span style=&quot;color:#a6e22e&quot;&gt;v-if&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;scope.row.children &amp;amp;&amp;amp; scope.row.children.length &amp;gt; 0&amp;#34;&lt;/span&gt; /&amp;gt;
      {{ scope.row.name }}
    &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;{{ scope.row.desc }}&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
  &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;table-tree&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;
   但是后面发现表格在多选状态下无法和原有的表格选择进行联动，只能自己实现选中和取消选中的方法，虽然也能实现，当很麻烦，只好另寻其它方式
&lt;/p&gt;

&lt;h2 id=&quot;heading-3&quot;&gt;实现二&lt;/h2&gt;
&lt;p&gt;
   后面研究了一下 &lt;b&gt;Fernando2684&lt;/b&gt; 的实现方式, 虽然他的方式同样复杂，当实现原理其实很简单, 那就是修改原始数据，比如第二行需要进行展开，那我就在原来第二行的数据下把第二行的子数据追加上去，取消展开就把子数据删除，恢复原来的数据。有了这个原理后就好办了，我们可以利用 &lt;code&gt;Expanding rows&lt;/code&gt; 时用到的 &lt;code&gt;props.expand&lt;/code&gt; 参数来控制是否展开子数据, 然后利用计算属性动态的计算展开后的数据
&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 表格模版
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-table&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;flat&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;bordered&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;row-key&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;separator&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;cell&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;selection&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;multiple&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;-&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:rows&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.list&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;+&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:rows&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;expandRows&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model:expanded&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.expanded&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model:selected&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.selected&amp;#34;&lt;/span&gt;
         &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model:pagination&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;table.pagination&amp;#34;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot:body&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-tr&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:props&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;auto-width&lt;/span&gt;&amp;gt;
        &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-checkbox&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;size&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;sm&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-model&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.selected&amp;#34;&lt;/span&gt; /&amp;gt;
      &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
        &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-btn&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;flat&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;round&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;dense&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;size&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;xs&amp;#34;&lt;/span&gt;
               &lt;span style=&quot;color:#a6e22e&quot;&gt;:icon&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.expand ? &amp;#39;remove&amp;#39; : &amp;#39;add&amp;#39;&amp;#34;&lt;/span&gt;
               &lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;click&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.expand = !props.expand&amp;#34;&lt;/span&gt;
               &lt;span style=&quot;color:#a6e22e&quot;&gt;v-if&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.row.children &amp;amp;&amp;amp; props.row.children.length &amp;gt; 0&amp;#34;&lt;/span&gt; /&amp;gt;
        {{ props.row.name }}
      &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;{{ props.row.desc }}&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
    &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-tr&lt;/span&gt;&amp;gt;
  &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-table&lt;/span&gt;&amp;gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 表格数据
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;ref&lt;/span&gt;({
    &lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;selected&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; [],
    &lt;span style=&quot;color:#a6e22e&quot;&gt;loading&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;,
    &lt;span style=&quot;color:#a6e22e&quot;&gt;pagination&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;page&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;,
        &lt;span style=&quot;color:#a6e22e&quot;&gt;sortBy&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;desc&amp;#39;&lt;/span&gt;,
        &lt;span style=&quot;color:#a6e22e&quot;&gt;descending&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;,
        &lt;span style=&quot;color:#a6e22e&quot;&gt;rowsPerPage&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;,
        &lt;span style=&quot;color:#a6e22e&quot;&gt;rowsNumber&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;,
    }
})

&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;expandRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;computed&lt;/span&gt;(() =&amp;gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;)
})
&lt;/pre&gt;
&lt;p&gt;
     这里提一嘴，&lt;code&gt;pagination.rowsPerPage&lt;/code&gt; 默认最好设置为0(不限制每页的数量, 但会由由后端控制返回的行数), 否则展开子数据后的数据会被放到第二页, 影响数据查看
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 动态计算展开后的数据
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#f92672&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; []
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;length&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; []
    &lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;forEach&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt; =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;push&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;)
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;indexOf&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;id&lt;/span&gt;) &lt;span style=&quot;color:#f92672&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;) {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;concat&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;children&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;))
        }
    })
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;
}
&lt;/pre&gt;
&lt;p&gt;
     注意，这里因为要递归计算多级子目录，所以不能直接在 &lt;code&gt;setup&lt;/code&gt; 上直接用 &lt;code&gt;const&lt;/code&gt; 定义
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 缩进：&lt;del&gt;目前缩进确实有些问题，其中一个解决办法是原始数据会带有 &lt;code&gt;parent_id&lt;/code&gt; 字段，可以通过判断 &lt;code&gt;parent_id&lt;/code&gt; 大于0时增加缩进&lt;/del&gt;
&lt;/p&gt;

&lt;p&gt;
     缩进的计算可以通过&lt;code&gt;makeRows&lt;/code&gt;函数在遍历时添加每行数据的层级
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;indent&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#f92672&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; []
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; []
    &lt;span style=&quot;color:#a6e22e&quot;&gt;rows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;forEach&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt; =&amp;gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;_indent&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;indent&lt;/span&gt;
        &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;push&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;)
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;indexOf&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;id&lt;/span&gt;) &lt;span style=&quot;color:#f92672&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;) {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;concat&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;row&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;children&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;indent&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;+&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;))
        }
    })
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;newRows&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;export&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;default&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;useTable&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;expandRows&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;computed&lt;/span&gt;(() =&amp;gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;makeRows&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;list&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;expanded&lt;/span&gt;, &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;)
    })
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;expandRows&lt;/span&gt;,
    }
}
&lt;/pre&gt;
&lt;p&gt;
     然后在表格中添加对应的偏移即可, 需要注意的是表格对齐方向需要设置为 &lt;code&gt;left&lt;/code&gt; (&lt;b&gt;默认值&lt;/b&gt;)
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v-slot:body-cell-name&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:props&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;:style&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&amp;#39;padding-left:&amp;#39; + ((props.row._indent || 0) + 1) + &amp;#39;rem&amp;#39;&amp;#34;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;q-btn&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;flat&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;round&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;dense&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;size&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;xs&amp;#34;&lt;/span&gt;
           &lt;span style=&quot;color:#a6e22e&quot;&gt;:icon&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.expand ? &amp;#39;remove&amp;#39; : &amp;#39;add&amp;#39;&amp;#34;&lt;/span&gt;
           &lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;click&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.expand = !props.expand&amp;#34;&lt;/span&gt;
           &lt;span style=&quot;color:#a6e22e&quot;&gt;v-if&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;props.row.children &amp;amp;&amp;amp; props.row.children.length &amp;gt; 0&amp;#34;&lt;/span&gt; /&amp;gt;
    {{ props.row.name }}
  &amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;q-td&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&quot;color:#f92672&quot;&gt;template&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-4&quot;&gt;最终实现&lt;/h2&gt;
&lt;p&gt;
   
&lt;a href=&quot;https://s.libforest.com/images/2023/04/quasar-tree-table.png-show&quot; data-fancybox=&quot;image&quot;&gt;
  &lt;img data-src=&quot;https://s.libforest.com/images/2023/04/quasar-tree-table.png-thumb&quot; class=&quot;lazyload&quot; /&gt;
&lt;/a&gt;
&lt;/p&gt;</content>
        <category term="Tech/Coding"></category>
    </entry>
    <entry xml:lang="zh">
      <title>python2升级至python3</title>
      <link href="" rel="alternate"></link>
      <published>Mon, 22 Mar 2021 16:35:34 +0000</published>
      <updated>Wed, 07 Jul 2021 17:56:51 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2021/03/python2升级至python3.html" type="text/html"/>
      <id>https://honmaple.me/articles/2021/03/python2升级至python3.html</id>
      <summary type="html">
&lt;blockquote&gt;
&lt;p&gt;
首先使用工具 &lt;b&gt;2to3&lt;/b&gt; 转换
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;2to3 目录名 -w -n&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;print&lt;/h2&gt;
&lt;p&gt;
   &lt;a href=&quot;https://stackoverflow.com/questions/55559825/how-to-fix-print-double-parentheses-after-2to3-conversion&quot;&gt;https://stackoverflow.com/questions/55559825/how-to-fix-print-double-parentheses-after-2to3-conversion&lt;/a&gt;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 问题:
     如果在python2项目里使用了python3的写法，比如在 &lt;b&gt;python2&lt;/b&gt; 里的 &lt;code&gt;print(&amp;#34;test&amp;#34;)&lt;/code&gt;, 使用 &lt;b&gt;2to3&lt;/b&gt; 就会转换成
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;((&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;...&lt;/span&gt;&lt;/pre&gt;&lt;/li&gt;&lt;/ul&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;print&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;string&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-3&quot;&gt;比值问题&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4&quot;&gt;编码问题&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4.1&quot;&gt;sys.setdefaultencoding(&amp;#39;utf-8&amp;#39;)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4.2&quot;&gt;encode、decode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4.3&quot;&gt;编码转换&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-5&quot;&gt;cmp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-6&quot;&gt;sorted&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-7&quot;&gt;Exception&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-8&quot;&gt;SSL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-9&quot;&gt;file.read&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-10&quot;&gt;redis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11&quot;&gt;requests&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11.1&quot;&gt;自定义编码请求&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11.1.1&quot;&gt;post json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11.1.2&quot;&gt;post form&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11.2&quot;&gt;响应编码&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11.3&quot;&gt;请求headers顺序&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-12&quot;&gt;django&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;
首先使用工具 &lt;b&gt;2to3&lt;/b&gt; 转换
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;2to3 目录名 -w -n&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;print&lt;/h2&gt;
&lt;p&gt;
   &lt;a href=&quot;https://stackoverflow.com/questions/55559825/how-to-fix-print-double-parentheses-after-2to3-conversion&quot;&gt;https://stackoverflow.com/questions/55559825/how-to-fix-print-double-parentheses-after-2to3-conversion&lt;/a&gt;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 问题:
     如果在python2项目里使用了python3的写法，比如在 &lt;b&gt;python2&lt;/b&gt; 里的 &lt;code&gt;print(&amp;#34;test&amp;#34;)&lt;/code&gt;, 使用 &lt;b&gt;2to3&lt;/b&gt; 就会转换成
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;((&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;))&lt;/pre&gt;
&lt;p&gt;
     所以需要找到 &lt;code&gt;print((&lt;/code&gt; 并修复该转换(其实不转也没什么问题)
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;ag -Gpy &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;print((&amp;#39;&lt;/span&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 修复:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;- print((&amp;#34;test&amp;#34;))
&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;+ print(&amp;#34;test&amp;#34;)
&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-2&quot;&gt;string&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 问题1:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;module &amp;#39;string&amp;#39; has no attribute &amp;#39;letters&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 修复:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;- string.letters
&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;+ string.ascii_letters
&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 问题2:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;#39;str&amp;#39; object has no attribute &amp;#39;decode&amp;#39;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 修复:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;- str.decode(xxx)
&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;+ str.encode(xxx).decode(&amp;#39;unicode_escape&amp;#39;)
&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-3&quot;&gt;比值问题&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;slice indices must be integers or None or have an __index__ method&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 问题:
     python2里 &lt;code&gt;3/2&lt;/code&gt; 返回的是整型 &lt;code&gt;1&lt;/code&gt;
     python3里 &lt;code&gt;3/2&lt;/code&gt; 返回的是浮点型 &lt;code&gt;1.5&lt;/code&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 修复:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;print(3//2)
# 或者
print(int(3/2))&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-4&quot;&gt;编码问题&lt;/h2&gt;
&lt;h3 id=&quot;heading-4.1&quot;&gt;sys.setdefaultencoding(&amp;#39;utf-8&amp;#39;)&lt;/h3&gt;
&lt;p&gt;
    python2里的 &lt;code&gt;sys.setdefaultencoding(&amp;#39;utf-8&amp;#39;)&lt;/code&gt; 需要删除
&lt;/p&gt;

&lt;h3 id=&quot;heading-4.2&quot;&gt;encode、decode&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 问题:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;LookupError: &amp;#39;base64&amp;#39; is not a text encoding; use codecs.encode() to handle arbitrary codecs&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 语法:
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;Python 2.7.16 (default, Dec 21 2020, 23:00:36)
[GCC Apple LLVM 12.0.0 (clang-1200.0.30.4) [+internal-os, ptrauth-isa=sign+stri on darwin
Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&amp;gt;&amp;gt;&amp;gt; a = &amp;#34;a&amp;#34;
&amp;gt;&amp;gt;&amp;gt; a.encode(&amp;#34;base64&amp;#34;)
&amp;#39;YQ==\n&amp;#39;
&amp;gt;&amp;gt;&amp;gt; b = a.encode(&amp;#34;base64&amp;#34;)
&amp;gt;&amp;gt;&amp;gt; b.decode(&amp;#34;base64&amp;#34;)
&amp;#39;a&amp;#39;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;Python 3.7.4 (default, Sep  7 2020, 15:30:33)
[Clang 11.0.3 (clang-1103.0.32.29)] on darwin
Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&amp;gt;&amp;gt;&amp;gt; a = &amp;#34;a&amp;#34;
&amp;gt;&amp;gt;&amp;gt; a.encode(&amp;#34;base64&amp;#34;)
Traceback (most recent call last):
  File &amp;#34;&amp;lt;stdin&amp;gt;&amp;#34;, line 1, in &amp;lt;module&amp;gt;
LookupError: &amp;#39;base64&amp;#39; is not a text encoding; use codecs.encode() to handle arbitrary codecs&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 修复:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; base64

&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b64encode&lt;/span&gt;(s):
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; isinstance(s, bytes):
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; base64&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;b64encode(s)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; base64&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;b64encode(s&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;encode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;utf-8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;))&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;decode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;utf-8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)

&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b64decode&lt;/span&gt;(s):
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; base64&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;b64decode(s)&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;decode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;utf-8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)&lt;/pre&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;- x.encode(&amp;#39;base64&amp;#39;)
&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;- x.decode(&amp;#39;base64&amp;#39;)
&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;+ b64encode(x)
&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;+ b64decode(x)
&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;heading-4.3&quot;&gt;编码转换&lt;/h3&gt;
&lt;p&gt;
    utf-8转换为gbk
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;#39;hello世界&amp;#39;.decode(&amp;#39;utf-8&amp;#39;).encode(&amp;#39;gbk&amp;#39;)&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&amp;#39;&amp;#39;.join([chr(i) for i in &amp;#39;hello世界&amp;#39;.encode(&amp;#39;gbk&amp;#39;)])
# 或者
&amp;#39;hello世界&amp;#39;.encode(&amp;#39;gbk&amp;#39;).decode(&amp;#39;unicode_escape&amp;#39;)&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-5&quot;&gt;cmp&lt;/h2&gt;
&lt;p&gt;
   python3里cmp内置函数不再存在，需要自定义函数
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;cmp&lt;/span&gt;(a, b):
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; (a &lt;span style=&quot;color:#f92672&quot;&gt;&amp;gt;&lt;/span&gt; b) &lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt; (a &lt;span style=&quot;color:#f92672&quot;&gt;&amp;lt;&lt;/span&gt; b)&lt;/pre&gt;

&lt;h2 id=&quot;heading-6&quot;&gt;sorted&lt;/h2&gt;
&lt;p&gt;
   python2里sorted有一个cmp参数，python3里统一为key参数
&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;sorted(keys, &lt;span style=&quot;color:#66d9ef&quot;&gt;lambda&lt;/span&gt; x, y: cmp(len(x), len(y)), reverse&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;True)&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;from&lt;/span&gt; functools &lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; cmp_to_key

sorted(keys, key&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;cmp_to_key(&lt;span style=&quot;color:#66d9ef&quot;&gt;lambda&lt;/span&gt; x, y: cmp(len(x), len(y))), reverse&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;True)&lt;/pre&gt;
&lt;p&gt;
     注意: &lt;code&gt;must use keyword argument for key function&lt;/code&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-7&quot;&gt;Exception&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python3里没有 &lt;code&gt;.message&lt;/code&gt;, 所以需要修改 &lt;code&gt;e.message&lt;/code&gt; 为 &lt;code&gt;str(e)&lt;/code&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3无法使用 &lt;code&gt;as&lt;/code&gt; 直接对变量赋值
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;main&lt;/span&gt;():
    err &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; None
    &lt;span style=&quot;color:#66d9ef&quot;&gt;try&lt;/span&gt;:
        &lt;span style=&quot;color:#66d9ef&quot;&gt;raise&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;ValueError&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;sss&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;)
    &lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;    &lt;span style=&quot;color:#66d9ef&quot;&gt;except&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Exception&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;as&lt;/span&gt; err:
    &lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;       &lt;span style=&quot;color:#66d9ef&quot;&gt;pass&lt;/span&gt;
    &lt;span style=&quot;color:#f92672&quot;&gt;+&lt;/span&gt;    &lt;span style=&quot;color:#66d9ef&quot;&gt;except&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Exception&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;as&lt;/span&gt; e:
    &lt;span style=&quot;color:#f92672&quot;&gt;+&lt;/span&gt;       err &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; e
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; err

&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;(main())&lt;/pre&gt;

&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;UnboundLocalError: local variable &amp;#39;err&amp;#39; referenced before assignment&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-8&quot;&gt;SSL&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 问题:
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;File &amp;#34;/usr/local/lib/python3.6/dist-packages/OpenSSL/SSL.py&amp;#34;, line 1591, in set_tlsext_host_name
raise TypeError(&amp;#34;name must be a byte string&amp;#34;)&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 解决
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;- s.set_tlsext_host_name(hostname)
+ s.set_tlsext_host_name(hostname.encode(&amp;#39;utf-8&amp;#39;))&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-9&quot;&gt;file.read&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;with&lt;/span&gt; open(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;test.txt&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;rb&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;as&lt;/span&gt; f:
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; i &lt;span style=&quot;color:#f92672&quot;&gt;in&lt;/span&gt; f&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;read(&lt;span style=&quot;color:#ae81ff&quot;&gt;10&lt;/span&gt;):
        &lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;(i, type(i))&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;(&amp;#39;\x7f&amp;#39;, &amp;lt;type &amp;#39;str&amp;#39;&amp;gt;)
(&amp;#39;E&amp;#39;, &amp;lt;type &amp;#39;str&amp;#39;&amp;gt;)
(&amp;#39;\x00&amp;#39;, &amp;lt;type &amp;#39;str&amp;#39;&amp;gt;)&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;127 &amp;lt;class &amp;#39;int&amp;#39;&amp;gt;
69 &amp;lt;class &amp;#39;int&amp;#39;&amp;gt;
0 &amp;lt;class &amp;#39;int&amp;#39;&amp;gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;b&gt;两者之间的转换&lt;/b&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;ord(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;\x7f&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;) &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;127&lt;/span&gt;
chr(&lt;span style=&quot;color:#ae81ff&quot;&gt;127&lt;/span&gt;) &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;\x7f&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-10&quot;&gt;redis&lt;/h2&gt;
&lt;p&gt;
   python3里默认取出的值是 &lt;code&gt;bytes&lt;/code&gt; 类型, 需要客户端添加 &lt;code&gt;decode_responses=True&lt;/code&gt; 参数, 取出的值才是 &lt;code&gt;str&lt;/code&gt; 类型
&lt;/p&gt;

&lt;h2 id=&quot;heading-11&quot;&gt;requests&lt;/h2&gt;
&lt;h3 id=&quot;heading-11.1&quot;&gt;自定义编码请求&lt;/h3&gt;
&lt;p&gt;
    &lt;a href=&quot;https://github.com/psf/requests/issues/4133&quot;&gt;https://github.com/psf/requests/issues/4133&lt;/a&gt;
&lt;/p&gt;
&lt;h4 id=&quot;heading-11.1.1&quot;&gt;post json&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;data &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;hello世界&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;decode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;utf-8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;encode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)}
headers &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Content-Type&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;application/json;charset=gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;}
data&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;json&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;dumps(data,ensure_ascii&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;False)
rsp &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; requests&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;post(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/dynamic/test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;, data&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;data,headers&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;headers)&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;data &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;hello世界&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;}
headers &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Content-Type&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;application/json;charset=gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;}
data&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;json&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;dumps(data, ensure_ascii&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;False)
resp &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; requests&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;post(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/dynamic/test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;, data&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;data&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;encode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;), headers&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;headers)&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;heading-11.1.2&quot;&gt;post form&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;data &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;hello世界&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;decode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;utf-8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;encode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)}
headers &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Content-Type&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;application/x-www-form-urlencoded;charset=gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;}
resp &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; requests&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;post(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/dynamic/test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;, data&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;data,headers&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;headers)&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;data &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;hello世界&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;encode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)}
headers &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Content-Type&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;application/x-www-form-urlencoded;charset=gbk&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;}
resp &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; requests&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;post(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/dynamic/test&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;, data&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;data,headers&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;headers)&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;heading-11.2&quot;&gt;响应编码&lt;/h3&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;resp &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; requests&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;get(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;...&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;)
&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;(type(resp&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;content))
&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;(type(resp&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;text))&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
      &lt;code&gt;resp.content&lt;/code&gt; 是 &lt;code&gt;str&lt;/code&gt; 类型, &lt;code&gt;resp.text&lt;/code&gt; 是 &lt;code&gt;unicode&lt;/code&gt; 类型
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
      &lt;code&gt;resp.content&lt;/code&gt; 是 &lt;code&gt;bytes&lt;/code&gt; 类型, &lt;code&gt;resp.text&lt;/code&gt; 是 &lt;code&gt;str&lt;/code&gt; 类型
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;heading-11.3&quot;&gt;请求headers顺序&lt;/h3&gt;
&lt;p&gt;
    根源主要在 &lt;code&gt;requests.structures&lt;/code&gt; 的 &lt;code&gt;CaseInsensitiveDict&lt;/code&gt; 类
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;from&lt;/span&gt; requests.structures &lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; CaseInsensitiveDict
&lt;span style=&quot;color:#f92672&quot;&gt;from&lt;/span&gt; collections &lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; OrderedDict

headers &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Accept-Language&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Accept-Encoding&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;gzip, deflate, sdch&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;cache&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;host&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Host1.com&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Accept&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;User-Agent&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;curl/7.29.0&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Host&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;Host2.com&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;
}
&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;(headers)

r &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; CaseInsensitiveDict()
r&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;update(headers)
&lt;span style=&quot;color:#66d9ef&quot;&gt;print&lt;/span&gt;(r)&lt;/pre&gt;

&lt;p&gt;
    不同的python版本结果会输出
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 python2
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;OrderedDict([(&amp;#39;Accept-Language&amp;#39;, &amp;#39;en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4&amp;#39;), (&amp;#39;Accept-Encoding&amp;#39;, &amp;#39;gzip, deflate, sdch&amp;#39;), (&amp;#39;cache&amp;#39;, 0), (&amp;#39;Host&amp;#39;, &amp;#39;Host2.com&amp;#39;), (&amp;#39;Accept&amp;#39;, &amp;#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&amp;#39;), (&amp;#39;User-Agent&amp;#39;, &amp;#39;curl/7.29.0&amp;#39;), (&amp;#39;host&amp;#39;, &amp;#39;Host1.com&amp;#39;)])
CaseInsensitiveDict({&amp;#39;Accept-Language&amp;#39;: &amp;#39;en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4&amp;#39;, &amp;#39;Accept-Encoding&amp;#39;: &amp;#39;gzip, deflate, sdch&amp;#39;, &amp;#39;cache&amp;#39;: 0, &amp;#39;Accept&amp;#39;: &amp;#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&amp;#39;, &amp;#39;User-Agent&amp;#39;: &amp;#39;curl/7.29.0&amp;#39;, &amp;#39;host&amp;#39;: &amp;#39;Host1.com&amp;#39;})&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 python3
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;OrderedDict([(&amp;#39;Accept-Language&amp;#39;, &amp;#39;en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4&amp;#39;), (&amp;#39;Accept-Encoding&amp;#39;, &amp;#39;gzip, deflate, sdch&amp;#39;), (&amp;#39;cache&amp;#39;, 0), (&amp;#39;host&amp;#39;, &amp;#39;Host1.com&amp;#39;), (&amp;#39;Accept&amp;#39;, &amp;#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&amp;#39;), (&amp;#39;User-Agent&amp;#39;, &amp;#39;curl/7.29.0&amp;#39;), (&amp;#39;Host&amp;#39;, &amp;#39;Host2.com&amp;#39;)])
{&amp;#39;Accept-Language&amp;#39;: &amp;#39;en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4&amp;#39;, &amp;#39;Accept-Encoding&amp;#39;: &amp;#39;gzip, deflate, sdch&amp;#39;, &amp;#39;cache&amp;#39;: 0, &amp;#39;Host&amp;#39;: &amp;#39;Host2.com&amp;#39;, &amp;#39;Accept&amp;#39;: &amp;#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&amp;#39;, &amp;#39;User-Agent&amp;#39;: &amp;#39;curl/7.29.0&amp;#39;}&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
    所以如果要兼容两个版本，需要显示的传入
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;headers &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; OrderedDict(sorted(headers&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;items(), key&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;lambda&lt;/span&gt; x: x[&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;]))&lt;/pre&gt;

&lt;h2 id=&quot;heading-12&quot;&gt;django&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;- for k, v in request.GET.iterlists():
&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;+ for k, v in request.GET.lists():
&lt;/span&gt;&lt;/pre&gt;

&lt;p&gt;
   并且k和v的类型在python3里默认为 &lt;code&gt;str&lt;/code&gt; ， 不需要使用 &lt;code&gt;k.encode(&amp;#34;utf-8&amp;#34;)&lt;/code&gt; 进行转换
&lt;/p&gt;</content>
        <category term="Tech/Coding/Python"></category>
    </entry>
    <entry xml:lang="zh">
      <title>pyenv笔记</title>
      <link href="" rel="alternate"></link>
      <published>Thu, 18 Mar 2021 15:29:39 +0000</published>
      <updated>Thu, 18 Mar 2021 15:35:51 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2021/03/pyenv笔记.html" type="text/html"/>
      <id>https://honmaple.me/articles/2021/03/pyenv笔记.html</id>
      <summary type="html">
&lt;h1 id=&quot;heading-1&quot;&gt;常见问题&lt;/h1&gt;

&lt;h2 id=&quot;heading-1.1&quot;&gt;pyenv install 3.6.7 失败&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 环境: macOs big Sur 11.2.2
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 pyenv: 1.2.23
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;heading-1.1.1&quot;&gt;相关日志&lt;/h3&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;┌─[jianglin]─[~/repo/golang/src/alarm](master)
└──╼ pyenv install 3.6.7
python-build...&lt;/pre&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;常见问题&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1.1&quot;&gt;pyenv install 3.6.7 失败&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1.1.1&quot;&gt;相关日志&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1.1.2&quot;&gt;解决方式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1.1.3&quot;&gt;参考文档&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;heading-1&quot;&gt;常见问题&lt;/h1&gt;

&lt;h2 id=&quot;heading-1.1&quot;&gt;pyenv install 3.6.7 失败&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 环境: macOs big Sur 11.2.2
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 pyenv: 1.2.23
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;heading-1.1.1&quot;&gt;相关日志&lt;/h3&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;┌─[jianglin]─[~/repo/golang/src/alarm](master)
└──╼ pyenv install 3.6.7
python-build: use openssl@1.1 from homebrew
python-build: use readline from homebrew
Installing Python-3.6.7...
python-build: use readline from homebrew
python-build: use zlib from xcode sdk

BUILD FAILED (OS X 11.2.2 using python-build 20180424)

Inspect or clean up the working tree at /var/folders/44/hnrgfyfn0fsb8lqwk_0h2jvm0000gn/T/python-build.20210318151243.78376
Results logged to /var/folders/44/hnrgfyfn0fsb8lqwk_0h2jvm0000gn/T/python-build.20210318151243.78376.log

Last 10 log lines:
        ret = sendfile(in, out, offset, &amp;amp;sbytes, &amp;amp;sf, flags);
              ^
./Modules/posixmodule.c:10433:5: warning: code will never be executed [-Wunreachable-code]
    Py_FatalError(&amp;#34;abort() called from Python code didn&amp;#39;t abort!&amp;#34;);
    ^~~~~~~~~~~~~
clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include   -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include   -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Wstrict-prototypes   -I. -I./Include -I/usr/local/opt/readline/include -I/usr/local/opt/readline/include -I/usr/local/opt/openssl@1.1/include -I/Users/jianglin/repo/python/pyenv/versions/3.6.7/include  -I/usr/local/opt/readline/include -I/usr/local/opt/readline/include -I/usr/local/opt/openssl@1.1/include -I/Users/jianglin/repo/python/pyenv/versions/3.6.7/include   -DPy_BUILD_CORE  -c ./Modules/pwdmodule.c -o Modules/pwdmodule.o
1 warning and 1 error generated.
make: *** [Modules/posixmodule.o] Error 1
make: *** Waiting for unfinished jobs....
1 warning generated.
┌─[jianglin]─[~/repo/golang/src/alarm](master)
└──╼  pyenv install --patch 3.6.7 &amp;lt; &amp;lt;(curl -sSL https://github.com/python/cpython/commit/8ea6353.patch\?full_index\=1)
python-build: use openssl@1.1 from homebrew
python-build: use readline from homebrew
Installing Python-3.6.7...
curl: (28) Operation timed out after 300188 milliseconds with 0 out of 0 bytes received
python-build: use readline from homebrew
python-build: use zlib from xcode sdk

BUILD FAILED (OS X 11.2.2 using python-build 20180424)

Inspect or clean up the working tree at /var/folders/44/hnrgfyfn0fsb8lqwk_0h2jvm0000gn/T/python-build.20210318151644.86904
Results logged to /var/folders/44/hnrgfyfn0fsb8lqwk_0h2jvm0000gn/T/python-build.20210318151644.86904.log

Last 10 log lines:
./Modules/posixmodule.c:8211:15: error: implicit declaration of function &amp;#39;sendfile&amp;#39; is invalid in C99 [-Werror,-Wimplicit-function-declaration]
        ret = sendfile(in, out, offset, &amp;amp;sbytes, &amp;amp;sf, flags);
              ^
./Modules/posixmodule.c:10433:5: warning: code will never be executed [-Wunreachable-code]
    Py_FatalError(&amp;#34;abort() called from Python code didn&amp;#39;t abort!&amp;#34;);
    ^~~~~~~~~~~~~
1 warning and 1 error generated.
make: *** [Modules/posixmodule.o] Error 1
make: *** Waiting for unfinished jobs....
1 warning generated.&lt;/pre&gt;

&lt;h3 id=&quot;heading-1.1.2&quot;&gt;解决方式&lt;/h3&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;┌─&lt;span style=&quot;color:#f92672&quot;&gt;[&lt;/span&gt;jianglin&lt;span style=&quot;color:#f92672&quot;&gt;]&lt;/span&gt;─&lt;span style=&quot;color:#f92672&quot;&gt;[&lt;/span&gt;~/repo/golang/src/alarm&lt;span style=&quot;color:#f92672&quot;&gt;]&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;master&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;
└──╼ CFLAGS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;-Wno-implicit-function-declaration  pyenv install --patch 3.6.7 &amp;lt; &amp;lt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;curl -sSL https://github.com/python/cpython/commit/8ea6353.patch&lt;span style=&quot;color:#ae81ff&quot;&gt;\?&lt;/span&gt;full_index&lt;span style=&quot;color:#ae81ff&quot;&gt;\=&lt;/span&gt;1&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;
python-build: use openssl@1.1 from homebrew
python-build: use readline from homebrew
Installing Python-3.6.7...
curl: &lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;7&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Failed to connect to github.com port 443: Operation timed out
python-build: use readline from homebrew
python-build: use zlib from xcode sdk
Installed Python-3.6.7 to /Users/jianglin/repo/python/pyenv/versions/3.6.7&lt;/pre&gt;

&lt;h3 id=&quot;heading-1.1.3&quot;&gt;参考文档&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;a href=&quot;https://github.com/pyenv/pyenv/issues/1737&quot;&gt;https://github.com/pyenv/pyenv/issues/1737&lt;/a&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;a href=&quot;https://github.com/pyenv/pyenv/issues/1643&quot;&gt;https://github.com/pyenv/pyenv/issues/1643&lt;/a&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content>
        <category term="Tech/Coding/Python"></category>
    </entry>
    <entry xml:lang="zh">
      <title>golang笔记之struct转map性能比较</title>
      <link href="" rel="alternate"></link>
      <published>Mon, 21 Sep 2020 11:38:24 +0000</published>
      <updated>Wed, 03 Apr 2024 12:54:14 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2020/09/golang笔记之struct转map性能比较.html" type="text/html"/>
      <id>https://honmaple.me/articles/2020/09/golang笔记之struct转map性能比较.html</id>
      <summary type="html">
&lt;h2 id=&quot;heading-1&quot;&gt;测试代码&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;main&lt;/span&gt;

&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;reflect&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
)

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;struct&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;   &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;   &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;C&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;      &lt;span style=&quot;color:#e6db74&quot;&gt;`...&lt;/span&gt;&lt;/pre&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;测试代码&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;测试结果&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;测试代码&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;main&lt;/span&gt;

&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;reflect&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
)

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;struct&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;   &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;   &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;C&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;      &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;c&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;D&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;      &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;d&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;E&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;e&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;F&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;    &lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;json:&amp;#34;f&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;`&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;{
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;test&amp;#34;&lt;/span&gt;,
    &lt;span style=&quot;color:#ae81ff&quot;&gt;15&lt;/span&gt;,
    &lt;span style=&quot;color:#ae81ff&quot;&gt;1024&lt;/span&gt;,
    []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;{&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;vvv&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;ssss&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;44444&amp;#34;&lt;/span&gt;},
    []&lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;{&lt;span style=&quot;color:#ae81ff&quot;&gt;100&lt;/span&gt;, &lt;span style=&quot;color:#ae81ff&quot;&gt;4012&lt;/span&gt;},
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Struct2Map&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) &lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{} {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;reflect&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;ValueOf&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Kind&lt;/span&gt;() &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;reflect&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Ptr&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; = &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Elem&lt;/span&gt;()
    }
    &lt;span style=&quot;color:#a6e22e&quot;&gt;t&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Type&lt;/span&gt;()

    &lt;span style=&quot;color:#a6e22e&quot;&gt;res&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make(&lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{})
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;t&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;NumField&lt;/span&gt;(); &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tag&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;t&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Field&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;Tag&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Get&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;json&amp;#34;&lt;/span&gt;); &lt;span style=&quot;color:#a6e22e&quot;&gt;tag&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tag&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;res&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;tag&lt;/span&gt;] = &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Field&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;Interface&lt;/span&gt;()
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;res&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Struct2MapByJson&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) &lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{} {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;bs&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;json&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Marshal&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {

    }

    &lt;span style=&quot;color:#a6e22e&quot;&gt;res&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make(&lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{})
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;json&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Unmarshal&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;bs&lt;/span&gt;, &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;res&lt;/span&gt;); &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {

    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;res&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Benchmark_Json2Map&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;Struct2MapByJson&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Benchmark_Reflect2Map&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;Struct2Map&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}&lt;/pre&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;测试结果&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ go test -test.bench=&amp;#34;.*&amp;#34; .
goos: darwin
goarch: amd64
pkg: maple-test1
Benchmark_Json2Map-8          241076          4672 ns/op
Benchmark_Reflect2Map-8      1000000          1005 ns/op
PASS
ok      maple-test1	2.971s&lt;/pre&gt;</content>
        <category term="Tech/Coding/Go"></category>
    </entry>
    <entry xml:lang="zh">
      <title>rust笔记</title>
      <link href="" rel="alternate"></link>
      <published>Tue, 08 Sep 2020 17:10:53 +0000</published>
      <updated>Wed, 21 Aug 2024 15:50:33 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2020/09/rust笔记.html" type="text/html"/>
      <id>https://honmaple.me/articles/2020/09/rust笔记.html</id>
      <summary type="html">
&lt;h2 id=&quot;heading-1&quot;&gt;安装&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 安装
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ brew install rustup
└──╼ rustup-init
......
1&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Proceed with installation &lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;default&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;
2&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Customize installation
3&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Cancel installation
&amp;gt;1&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 配置 &lt;b&gt;rust&lt;/b&gt; 目录
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ mkdir $HOME/repo/rust
└──╼ mv $HOME/.rustup $HOME/repo...&lt;/pre&gt;&lt;/li&gt;&lt;/ul&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;更新&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-3&quot;&gt;交叉编译&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;安装&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 安装
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ brew install rustup
└──╼ rustup-init
......
1&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Proceed with installation &lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;default&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;
2&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Customize installation
3&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; Cancel installation
&amp;gt;1&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 配置 &lt;b&gt;rust&lt;/b&gt; 目录
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ mkdir $HOME/repo/rust
└──╼ mv $HOME/.rustup $HOME/repo/rust/rustup
└──╼ mv $HOME/.cargo $HOME/repo/rust/cargo&lt;/pre&gt;

&lt;p&gt;
     写入 &lt;b&gt;.bashrc&lt;/b&gt; 文件
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;export RUSTUP_HOME&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;$HOME/repo/rust/rustup
export CARGO_HOME&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;$HOME/repo/rust/cargo
export PATH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;$PATH:$HOME/repo/rust/cargo/bin&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 验证
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ source .bashrc
└──╼ cargo --version
cargo 1.46.0 &lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;149022b1d 2020-07-17&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;heading-2&quot;&gt;更新&lt;/h2&gt;
&lt;p&gt;
   最近在测试时发现无法安装 &lt;b&gt;tauri-app&lt;/b&gt;, 需要更新 &lt;b&gt;cargo&lt;/b&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;Caused by:
  failed to parse the `edition` key

Caused by:
  this version of Cargo is older than the `2021` edition, and only supports `2015` and `2018` editions.&lt;/pre&gt;

&lt;p&gt;
   解决方式
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ rustc --version
rustc 1.46.0 (04488afe3 2020-08-24)
└──╼ rustup update stable
...
└──╼ rustc --version
rustc 1.64.0 (a55dd71d5 2022-09-19)&lt;/pre&gt;

&lt;h2 id=&quot;heading-3&quot;&gt;交叉编译&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;a href=&quot;https://www.qttc.net/529-rust-cross-compile-mac-to-linux.html&quot;&gt;https://www.qttc.net/529-rust-cross-compile-mac-to-linux.html&lt;/a&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 &lt;a href=&quot;https://moevis.github.io/cheatsheet/2018/08/18/%E8%B6%85%E6%96%B9%E4%BE%BF%E7%9A%84-Rust-%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91.html&quot;&gt;https://moevis.github.io/cheatsheet/2018/08/18/%E8%B6%85%E6%96%B9%E4%BE%BF%E7%9A%84-Rust-%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91.html&lt;/a&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;brew install FiloSottile/musl-cross/musl-cross
rustup target add x86_64-unknown-linux-musl&lt;/pre&gt;

&lt;p&gt;
   添加配置 &lt;code&gt;$CARGO_HOME/config.toml&lt;/code&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;[target.x86_64-unknown-linux-musl]
linker = &amp;#34;x86_64-linux-musl-gcc&amp;#34;&lt;/pre&gt;

&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;cargo build --target&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;x86_64-unknown-linux-musl&lt;/pre&gt;</content>
        <category term="Tech/Coding/Rust"></category>
    </entry>
    <entry xml:lang="zh">
      <title>golang笔记之interface类型判断性能</title>
      <link href="" rel="alternate"></link>
      <published>Fri, 21 Aug 2020 10:21:36 +0000</published>
      <updated>Wed, 03 Apr 2024 12:54:24 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2020/08/golang笔记之interface类型判断性能.html" type="text/html"/>
      <id>https://honmaple.me/articles/2020/08/golang笔记之interface类型判断性能.html</id>
      <summary type="html">
&lt;h2 id=&quot;heading-1&quot;&gt;测试代码&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;main&lt;/span&gt;

&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceB&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;BB&lt;/span&gt;()
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;struct&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;) &lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;() {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;+=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkTypeSwitch&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; =...&lt;/pre&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;测试代码&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;测试结果&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;测试代码&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;main&lt;/span&gt;

&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceB&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;BB&lt;/span&gt;()
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;struct&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; (&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;) &lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;() {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;+=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkTypeSwitch&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;switch&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.(&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;:
            &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.(&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
        &lt;span style=&quot;color:#66d9ef&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceB&lt;/span&gt;:
            &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.(&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceB&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;BB&lt;/span&gt;()
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkNormalSwitch&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;) {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceSwitch&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.(&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceSwitch1&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.(&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceSwitch2&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;) {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.(&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;).&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceSwitch3&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;) {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkNormalListSwitch&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make([]&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;, &lt;span style=&quot;color:#ae81ff&quot;&gt;10000&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;] = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)
    }

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt; []&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt; {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceListSwitch&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make([]&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;, &lt;span style=&quot;color:#ae81ff&quot;&gt;10000&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;] = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)
    }

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt;.([]&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;) {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceListSwitch1&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make([]&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;, &lt;span style=&quot;color:#ae81ff&quot;&gt;10000&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;] = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)
    }

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;interface&lt;/span&gt;{}) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt;.([]&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;) {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;BenchmarkInterfaceListSwitch2&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;testing&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;B&lt;/span&gt;) {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make([]&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;, &lt;span style=&quot;color:#ae81ff&quot;&gt;10000&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;] = new(&lt;span style=&quot;color:#a6e22e&quot;&gt;A&lt;/span&gt;)
    }

    &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt; []&lt;span style=&quot;color:#a6e22e&quot;&gt;InterfaceA&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;vv&lt;/span&gt; {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;AA&lt;/span&gt;()
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;N&lt;/span&gt;; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;++&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;switchFunc&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;)
    }
}&lt;/pre&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;测试结果&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;└──╼ go test -test.bench=&amp;#34;.*&amp;#34; .
goos: darwin
goarch: amd64
pkg: log2
cpu: Intel(R) Core(TM) i5-8279U CPU @ 2.40GHz
BenchmarkTypeSwitch-8                 72261417            16.89 ns/op
BenchmarkNormalSwitch-8               861871533            1.384 ns/op
BenchmarkInterfaceSwitch-8            148360124            8.370 ns/op
BenchmarkInterfaceSwitch1-8           780127671            1.537 ns/op
BenchmarkInterfaceSwitch2-8           774663793            1.538 ns/op
BenchmarkInterfaceSwitch3-8           739255111            1.628 ns/op
BenchmarkNormalListSwitch-8             225832          5346 ns/op
BenchmarkInterfaceListSwitch-8          252312          4820 ns/op
BenchmarkInterfaceListSwitch1-8          61461         19800 ns/op
BenchmarkInterfaceListSwitch2-8          60193         20142 ns/op
PASS
ok    log2	14.670s&lt;/pre&gt;</content>
        <category term="Tech/Coding/Go"></category>
    </entry>
    <entry xml:lang="zh">
      <title>Flask支持多语言站点</title>
      <link href="" rel="alternate"></link>
      <published>Sun, 13 Jan 2019 01:32:11 +0000</published>
      <updated>Wed, 06 Mar 2024 15:18:34 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2019/01/Flask支持多语言站点.html" type="text/html"/>
      <id>https://honmaple.me/articles/2019/01/Flask支持多语言站点.html</id>
      <summary type="html">
&lt;blockquote&gt;
&lt;p&gt;
Flask的多语言国际化可以使用&lt;b&gt;Flask-Babel&lt;/b&gt;插件，在此不再细述，但对于所谓的多语言站点(即形如&lt;b&gt;example.com/zh/uri、example.com/en/uri&lt;/b&gt;或者&lt;b&gt;zh.example.com、en.example.com&lt;/b&gt;)文档上却未作细述
&lt;/p&gt;

&lt;p&gt;
有一个 &lt;a href=&quot;https://flask.palletsprojects.com/en/1.1.x/patterns/urlprocessors/&quot;&gt;Flask URL Processors&lt;/a&gt; 需要对所有的&lt;b&gt;uri&lt;/b&gt;都额外增加一个&lt;b&gt;lang_code&lt;/b&gt;的前缀，路由数较少时没什么问题，但路由数较多时太过麻烦
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
实现...&lt;/p&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;使用nginx重定向uri&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;使用uri获取对应非302响应&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-3&quot;&gt;使用url_map复制并alias路由&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4&quot;&gt;演示效果&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;
Flask的多语言国际化可以使用&lt;b&gt;Flask-Babel&lt;/b&gt;插件，在此不再细述，但对于所谓的多语言站点(即形如&lt;b&gt;example.com/zh/uri、example.com/en/uri&lt;/b&gt;或者&lt;b&gt;zh.example.com、en.example.com&lt;/b&gt;)文档上却未作细述
&lt;/p&gt;

&lt;p&gt;
有一个 &lt;a href=&quot;https://flask.palletsprojects.com/en/1.1.x/patterns/urlprocessors/&quot;&gt;Flask URL Processors&lt;/a&gt; 需要对所有的&lt;b&gt;uri&lt;/b&gt;都额外增加一个&lt;b&gt;lang_code&lt;/b&gt;的前缀，路由数较少时没什么问题，但路由数较多时太过麻烦
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
实现&lt;b&gt;example.com/en/uri&lt;/b&gt;可以有多种方式，除了使用&lt;b&gt;Flask URL Processors&lt;/b&gt;中介绍的外，还可以
&lt;/p&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;使用nginx重定向uri&lt;/h2&gt;
&lt;p&gt;
   这应该是各种方式里最简单的一种
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;location&lt;/span&gt; ~ &lt;span style=&quot;color:#e6db74&quot;&gt;^/en/&lt;/span&gt; {
    &lt;span style=&quot;color:#f92672&quot;&gt;rewrite&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;^/en/(.*)&lt;/span&gt;$ &lt;span style=&quot;color:#e6db74&quot;&gt;/&lt;/span&gt;$1 &lt;span style=&quot;color:#e6db74&quot;&gt;last&lt;/span&gt;;
}
&lt;span style=&quot;color:#66d9ef&quot;&gt;location&lt;/span&gt; = &lt;span style=&quot;color:#e6db74&quot;&gt;/en&lt;/span&gt; {
    &lt;span style=&quot;color:#f92672&quot;&gt;rewrite&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;^/(.*)&lt;/span&gt;$ &lt;span style=&quot;color:#e6db74&quot;&gt;/index&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;last&lt;/span&gt;;
}&lt;/pre&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;使用uri获取对应非302响应&lt;/h2&gt;
&lt;p&gt;
   即增加一个url为&lt;b&gt;/en/&amp;lt;path:uri&amp;gt;&lt;/b&gt;的路由，在此路由&lt;b&gt;func&lt;/b&gt;中，根据&lt;b&gt;&amp;lt;path:uri&amp;gt;&lt;/b&gt;信息获取已注册路由的&lt;b&gt;view_function&lt;/b&gt;，不使用重定向，而是直接调用&lt;b&gt;view_function&lt;/b&gt;返回实际响应
&lt;/p&gt;

&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#75715e&quot;&gt;# https://stackoverflow.com/questions/38488134/get-the-flask-view-function-that-matches-a-url&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;get_view_function&lt;/span&gt;(url, method&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;GET&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;):
    adapter &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; current_app&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;url_map&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;bind(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;localhost&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;try&lt;/span&gt;:
        match &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; adapter&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;match(url, method&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;method)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;except&lt;/span&gt; RequestRedirect &lt;span style=&quot;color:#66d9ef&quot;&gt;as&lt;/span&gt; e:
        &lt;span style=&quot;color:#75715e&quot;&gt;# recursively match redirects&lt;/span&gt;
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; get_view_function(e&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;new_url, method)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;except&lt;/span&gt; (MethodNotAllowed, NotFound):
        &lt;span style=&quot;color:#75715e&quot;&gt;# no match&lt;/span&gt;
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; None

    &lt;span style=&quot;color:#66d9ef&quot;&gt;try&lt;/span&gt;:
        &lt;span style=&quot;color:#75715e&quot;&gt;# return the view function and arguments&lt;/span&gt;
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; current_app&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;view_functions[match[&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;]], match[&lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;]
    &lt;span style=&quot;color:#66d9ef&quot;&gt;except&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;KeyError&lt;/span&gt;:
        &lt;span style=&quot;color:#75715e&quot;&gt;# no view is associated with the endpoint&lt;/span&gt;
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; None&lt;/pre&gt;

&lt;p&gt;
   提高查找对应&lt;code&gt;view-function&lt;/code&gt;的性能，增加缓存到内存中
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;FUNCTION &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; dict()

&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;view_function_cache&lt;/span&gt;(func):
    &lt;span style=&quot;color:#a6e22e&quot;&gt;@wraps&lt;/span&gt;(func)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_view_function&lt;/span&gt;(url, method&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;GET&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;):
        &lt;span style=&quot;color:#75715e&quot;&gt;# 避免故意访问&lt;/span&gt;
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; len(FUNCTION) &lt;span style=&quot;color:#f92672&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&quot;color:#ae81ff&quot;&gt;100&lt;/span&gt;:
            &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; k, v &lt;span style=&quot;color:#f92672&quot;&gt;in&lt;/span&gt; FUNCTION&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;items():
                &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; v &lt;span style=&quot;color:#f92672&quot;&gt;is&lt;/span&gt; None:
                    FUNCTION&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;pop(k)

        key &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; method &lt;span style=&quot;color:#f92672&quot;&gt;+&lt;/span&gt; url
        key &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; str(hashlib&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;md5(key&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;encode(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;UTF-8&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;))&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;hexdigest())
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; key &lt;span style=&quot;color:#f92672&quot;&gt;in&lt;/span&gt; FUNCTION:
            &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; FUNCTION[key]
        FUNCTION[key] &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; func(url, method)
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; FUNCTION[key]

    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; _view_function&lt;/pre&gt;

&lt;p&gt;
   这样就可以定义&lt;b&gt;/en/&amp;lt;uri&amp;gt;&lt;/b&gt;实际的&lt;code&gt;view_function&lt;/code&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;redirect_en&lt;/span&gt;(uri):
    view_function &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; get_view_function(
        &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;+&lt;/span&gt; uri,
        request&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;method,
    )
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; view_function &lt;span style=&quot;color:#f92672&quot;&gt;is&lt;/span&gt; None:
        abort(&lt;span style=&quot;color:#ae81ff&quot;&gt;404&lt;/span&gt;)
    &lt;span style=&quot;color:#75715e&quot;&gt;# 注：因为我使用Flask-Babel是根据accept_language来区别不同语言&lt;/span&gt;
    request&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;environ[&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;HTTP_ACCEPT_LANGUAGE&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;] &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;en-US,en;q=0.5&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; view_function[&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;](&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt;view_function[&lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;])&lt;/pre&gt;

&lt;h2 id=&quot;heading-3&quot;&gt;使用url_map复制并alias路由&lt;/h2&gt;
&lt;p&gt;
   原理同&lt;b&gt;Flask URL Processors&lt;/b&gt; ，为所有的路由都额外增加&lt;b&gt;/en&lt;/b&gt;前缀，并在&lt;code&gt;before_request&lt;/code&gt;中匹配到以&lt;b&gt;/en&lt;/b&gt;开头的请求就修改对应&lt;b&gt;accept_language&lt;/b&gt;信息
&lt;/p&gt;

&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;@app.before_request&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;before_request&lt;/span&gt;():
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; request&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;path&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;startswith(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/en/&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;):
        request&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;environ[&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;HTTP_ACCEPT_LANGUAGE&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;] &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;en-US,en;q=0.5&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;

url_map &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; list(app&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;url_map&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;iter_rules())
&lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; rule &lt;span style=&quot;color:#f92672&quot;&gt;in&lt;/span&gt; url_map:
    app&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;add_url_rule(&lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;/en&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;+&lt;/span&gt; rule&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;rule, rule&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;endpoint, alias&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;True)&lt;/pre&gt;

&lt;p&gt;
   咦，感觉这种方式更简单一些，但最好还是能够对一些特殊的路由比如: &lt;b&gt;static&lt;/b&gt;, &lt;b&gt;admin&lt;/b&gt;, &lt;b&gt;subdomain&lt;/b&gt;等进行特殊处理
&lt;/p&gt;

&lt;h2 id=&quot;heading-4&quot;&gt;演示效果&lt;/h2&gt;
&lt;p&gt;
   &lt;a href=&quot;https://honmaple.com/en/article&quot;&gt;切换成English&lt;/a&gt;
&lt;/p&gt;</content>
        <category term="Tech/Coding/Python"></category>
    </entry>
    <entry xml:lang="zh">
      <title>为pelican添加子站点功能</title>
      <link href="" rel="alternate"></link>
      <published>Sun, 03 Jun 2018 00:26:43 +0000</published>
      <updated>Tue, 05 Mar 2019 01:25:12 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2018/06/为pelican添加子站点功能.html" type="text/html"/>
      <id>https://honmaple.me/articles/2018/06/为pelican添加子站点功能.html</id>
      <summary type="html">
&lt;h2 id=&quot;heading-1&quot;&gt;创建翻译&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;babel-init:
    cd &lt;span style=&quot;color:#66d9ef&quot;&gt;$(&lt;/span&gt;THEMEDIR&lt;span style=&quot;color:#66d9ef&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel extract -F babel.cfg -k lazy_gettext -o messages.pot ./ &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel init -i messages.pot -d translations -l en

babel-update:
    cd &lt;span style=&quot;color:#66d9ef&quot;&gt;$(&lt;/span&gt;THEMEDIR&lt;span style=&quot;color:#66d9ef&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;...&lt;/span&gt;&lt;/pre&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;创建翻译&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;动态变量&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;heading-1&quot;&gt;创建翻译&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;babel-init:
    cd &lt;span style=&quot;color:#66d9ef&quot;&gt;$(&lt;/span&gt;THEMEDIR&lt;span style=&quot;color:#66d9ef&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel extract -F babel.cfg -k lazy_gettext -o messages.pot ./ &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel init -i messages.pot -d translations -l en

babel-update:
    cd &lt;span style=&quot;color:#66d9ef&quot;&gt;$(&lt;/span&gt;THEMEDIR&lt;span style=&quot;color:#66d9ef&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel extract -F babel.cfg -k lazy_gettext -o messages.pot ./ &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel update -i messages.pot -d translations

babel-compile:
    cd &lt;span style=&quot;color:#66d9ef&quot;&gt;$(&lt;/span&gt;THEMEDIR&lt;span style=&quot;color:#66d9ef&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pybabel compile -d translations&lt;/pre&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;动态变量&lt;/h2&gt;
&lt;p&gt;
   在模板里，我有一些动态变量需要翻译，比如在分类里的 &lt;code&gt;Python&lt;/code&gt; 需要翻译成 &lt;code&gt;生活苦短&lt;/code&gt;,但很不幸, &lt;b&gt;Babel&lt;/b&gt;并不支持动态变量的翻译。
   刚开始，在我没使用&lt;code&gt;i18n_subsites&lt;/code&gt;时，我采用加载一个&lt;code&gt;i18n.html&lt;/code&gt;文件
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#75715e&quot;&gt;{%&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;macro&lt;/span&gt; gettext&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;string&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; -&lt;span style=&quot;color:#75715e&quot;&gt;%}&lt;/span&gt;
&lt;span style=&quot;color:#75715e&quot;&gt;{%&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;set&lt;/span&gt; _gettext&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;dict&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;
    python&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;人生苦短&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
    security&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;极客安全&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
    archives&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;文章归档&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#75715e&quot;&gt;%}&lt;/span&gt;
&lt;span style=&quot;color:#75715e&quot;&gt;{{&lt;/span&gt; _gettext.get&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;string.lower&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;string&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color:#75715e&quot;&gt;}}&lt;/span&gt;
&lt;span style=&quot;color:#75715e&quot;&gt;{%&lt;/span&gt;- &lt;span style=&quot;color:#66d9ef&quot;&gt;endmacro&lt;/span&gt; &lt;span style=&quot;color:#75715e&quot;&gt;%}&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;
   类似字典的形式对部分变量进行翻译，这能够工作的很好，虽然有些麻烦。
&lt;/p&gt;

&lt;p&gt;
   在使用&lt;b&gt;Babel&lt;/b&gt;之后，我想要把它和&lt;code&gt;messages.po&lt;/code&gt;统一管理，所以采用另一种比较折中的方案: &lt;code&gt;jinja2 filter&lt;/code&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;from&lt;/span&gt; babel &lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; support

&lt;span style=&quot;color:#66d9ef&quot;&gt;def&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;gettrans&lt;/span&gt;(text, locale&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;DEFAULT_LANG):
    translations &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; support&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;Translations()
    catalog &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; support&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;Translations&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;load(
        os&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;path&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;abspath(os&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;path&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;join(THEME, &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;translations&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;&lt;/span&gt;)), locale)
    translations&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;merge(catalog)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; hasattr(catalog, &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;plural&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;):
        translations&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;plural &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; catalog&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;plural
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; translations&lt;span style=&quot;color:#f92672&quot;&gt;.&lt;/span&gt;gettext(text)

JINJA_FILTERS &lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt; {
    &lt;span style=&quot;color:#e6db74&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;gettrans&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#39;&lt;/span&gt;: gettrans,
}&lt;/pre&gt;
&lt;p&gt;
   这样就可以通过传递变量来获取对应的翻译, 而我所需要做的就是写好&lt;code&gt;messages.po&lt;/code&gt;然后编译成&lt;code&gt;messages.mo&lt;/code&gt;即可，同样为了每次使用&lt;code&gt;pybabel update&lt;/code&gt; 都可以得到相同的内容，我使用了一种取巧的办法, 同样是&lt;b&gt;i18n.html&lt;/b&gt;文件，把所需要国际化的可能变量全部放到一起，但不要在其它模板里&lt;code&gt;import&lt;/code&gt;这个模板，这样每次更新翻译文件，&lt;b&gt;Babel&lt;/b&gt; 都能自动找到并生成相同的&lt;code&gt;messages.po&lt;/code&gt;文件
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#75715e&quot;&gt;{%&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;macro&lt;/span&gt; gettrans&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;string&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt; -&lt;span style=&quot;color:#75715e&quot;&gt;%}&lt;/span&gt;
  &lt;span style=&quot;color:#75715e&quot;&gt;{%&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;set&lt;/span&gt; _gettrans&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;[&lt;/span&gt;
      &lt;span style=&quot;color:#66d9ef&quot;&gt;_&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;Linux&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
      &lt;span style=&quot;color:#66d9ef&quot;&gt;_&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;Python&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
      &lt;span style=&quot;color:#66d9ef&quot;&gt;_&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;Security&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
      &lt;span style=&quot;color:#66d9ef&quot;&gt;_&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;友链&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;,&lt;/span&gt;
      &lt;span style=&quot;color:#66d9ef&quot;&gt;_&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;联系&amp;#34;&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color:#75715e&quot;&gt;%}&lt;/span&gt;
&lt;span style=&quot;color:#75715e&quot;&gt;{%&lt;/span&gt;- &lt;span style=&quot;color:#66d9ef&quot;&gt;endmacro&lt;/span&gt; &lt;span style=&quot;color:#75715e&quot;&gt;%}&lt;/span&gt;&lt;/pre&gt;

&lt;p&gt;
   这种方式同样解决了我的另一个问题: 我可能在中文站点使用的是英文变量，但需要显示翻译后的中文，而在英文站点使用英文变量，显示的却同样是英文。说起来比较绕口，简单来说就是，中文站点里有一个&lt;code&gt;Python&lt;/code&gt;变量,我需要显示为&lt;code&gt;人生苦短&lt;/code&gt; ， 而在英文站点，则显示为 &lt;code&gt;Python&lt;/code&gt;，毕竟我可以在&lt;code&gt;zh_CN/LC_MESSAGES/messages.po&lt;/code&gt;写上翻译后的内容,而在&lt;code&gt;en/LC_MESSAGES/messages.po&lt;/code&gt;里保持原样,很方便地做到中英文分离。
&lt;/p&gt;
</content>
        <category term="Tech/Coding/Python"></category>
    </entry>
    <entry xml:lang="zh">
      <title>golang笔记</title>
      <link href="" rel="alternate"></link>
      <published>Mon, 26 Mar 2018 09:44:14 +0000</published>
      <updated>Wed, 03 Apr 2024 12:54:13 +0000</updated>
      <author>
        <name>honmaple</name>
      </author>
      <link rel="alternate" href="https://honmaple.me/articles/2018/03/golang笔记.html" type="text/html"/>
      <id>https://honmaple.me/articles/2018/03/golang笔记.html</id>
      <summary type="html">&lt;h1 id=&quot;heading-1&quot;&gt;关于golang.org无法连接&lt;/h1&gt;
&lt;p&gt;
  虽然推荐使用
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;go get -u golang.org/x/sync&lt;/pre&gt;
&lt;p&gt;
  但很不幸，国内无法连接&lt;code&gt;golang.org&lt;/code&gt;,所以只能曲线救国，借助&lt;b&gt;github.com&lt;/b&gt;来安装相关的&lt;code&gt;package&lt;/code&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;git clone https://github.com/golang/sync ./
&lt;span style=&quot;color:#75715e&quot;&gt;# 或者&lt;/span&gt;
git clone https://github.com/golang/sync
mv...&lt;/pre&gt;</summary>
      <content type="html">&lt;div id=&quot;table-of-contents&quot;&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;&lt;div id=&quot;text-table-of-contents&quot;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1&quot;&gt;关于golang.org无法连接&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-1.1&quot;&gt;初始化Gopkg&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-2&quot;&gt;读取配置文件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-3&quot;&gt;判断文件是否存在&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-4&quot;&gt;随机睡眠&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-5&quot;&gt;字符串&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-5.1&quot;&gt;随机的n位字符串&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-5.2&quot;&gt;字符串连接&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-5.3&quot;&gt;打印原始字符(换行符)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-6&quot;&gt;检查元素是否在map中&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-7&quot;&gt;检查元素是否在list中&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-8&quot;&gt;执行Linux命令&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-9&quot;&gt;迭代文件目录&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-10&quot;&gt;求两列表的差集&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-11&quot;&gt;删除列表中重复的数据&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-12&quot;&gt;参数校验&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-12.1&quot;&gt;是否是IP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-12.2&quot;&gt;是否是EMAIL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-13&quot;&gt;读取http响应的gz package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-14&quot;&gt;编译&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-14.1&quot;&gt;编译成不同系统的可执行文件&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-15&quot;&gt;测试&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-16&quot;&gt;常见问题&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-16.1&quot;&gt;docker内运行时区问题&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heading-16.1.1&quot;&gt;解决方式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-16.2&quot;&gt;map性能&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#heading-16.3&quot;&gt;go mod tidy checking tree against&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;heading-1&quot;&gt;关于golang.org无法连接&lt;/h1&gt;
&lt;p&gt;
  虽然推荐使用
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;go get -u golang.org/x/sync&lt;/pre&gt;
&lt;p&gt;
  但很不幸，国内无法连接&lt;code&gt;golang.org&lt;/code&gt;,所以只能曲线救国，借助&lt;b&gt;github.com&lt;/b&gt;来安装相关的&lt;code&gt;package&lt;/code&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;git clone https://github.com/golang/sync ./
&lt;span style=&quot;color:#75715e&quot;&gt;# 或者&lt;/span&gt;
git clone https://github.com/golang/sync
mv sync $GOPATH/src/golang/x/&lt;/pre&gt;

&lt;h2 id=&quot;heading-1.1&quot;&gt;初始化Gopkg&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#75715e&quot;&gt;# go mod init jlb&lt;/span&gt;
go: copying requirements from Gopkg.lock
go: converting Gopkg.lock: stat google.golang.org/genproto@a8101f21cf983e773d0c1133ebc5424792003214: unrecognized import path &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;google.golang.org/genproto&amp;#34;&lt;/span&gt;: https fetch: Get &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;https://google.golang.org/genproto?go-get=1&amp;#34;&lt;/span&gt;: dial tcp 216.239.37.1:443: i/o timeout&lt;/pre&gt;

&lt;p&gt;
   GORPOXY只适用于go mod
&lt;/p&gt;

&lt;p&gt;
   需要先移动Gopkg.lock
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;mv Gopkg.lock Gopkg.lock.bak&lt;/pre&gt;

&lt;p&gt;
   然后执行
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;go mod init jlb
go mod tidy&lt;/pre&gt;

&lt;h1 id=&quot;heading-2&quot;&gt;读取配置文件&lt;/h1&gt;
&lt;p&gt;
  注: &lt;b&gt;Configuration&lt;/b&gt; 里元素(Path)必须&lt;b&gt;大写&lt;/b&gt;开头
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;flag&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;io/ioutil&amp;#34;&lt;/span&gt;
)

&lt;span style=&quot;color:#66d9ef&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Configuration&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;struct&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;Path&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;
}

&lt;span style=&quot;color:#66d9ef&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;VETSION&lt;/span&gt; = &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;0.1.0&amp;#34;&lt;/span&gt;

&lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; (
    &lt;span style=&quot;color:#a6e22e&quot;&gt;config&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;Configuration&lt;/span&gt;
)

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;init&lt;/span&gt;() {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; (
        &lt;span style=&quot;color:#a6e22e&quot;&gt;conf_file&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;
        &lt;span style=&quot;color:#a6e22e&quot;&gt;print_ver&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt;
    )
    &lt;span style=&quot;color:#a6e22e&quot;&gt;flag&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;StringVar&lt;/span&gt;(&lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;conf_file&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;c&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;etc/config.json&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;config file&amp;#34;&lt;/span&gt;)
    &lt;span style=&quot;color:#a6e22e&quot;&gt;flag&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;BoolVar&lt;/span&gt;(&lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;print_ver&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;v&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;config file&amp;#34;&lt;/span&gt;)
    &lt;span style=&quot;color:#a6e22e&quot;&gt;flag&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Parse&lt;/span&gt;()

    &lt;span style=&quot;color:#a6e22e&quot;&gt;raw&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;ioutil&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;ReadFile&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;conf_file&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;log&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Error&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;config parse fail!&amp;#34;&lt;/span&gt;)
        &lt;span style=&quot;color:#a6e22e&quot;&gt;os&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Exit&lt;/span&gt;(&lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;)
    }
    &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; = &lt;span style=&quot;color:#a6e22e&quot;&gt;json&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Unmarshal&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;raw&lt;/span&gt;, &lt;span style=&quot;color:#f92672&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;config&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;log&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Error&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;config unmarshal fail!&amp;#34;&lt;/span&gt;)
        &lt;span style=&quot;color:#a6e22e&quot;&gt;os&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Exit&lt;/span&gt;(&lt;span style=&quot;color:#ae81ff&quot;&gt;1&lt;/span&gt;)
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;print_ver&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;fmt&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Println&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;version:&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;VERSION&lt;/span&gt;)
        &lt;span style=&quot;color:#a6e22e&quot;&gt;os&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Exit&lt;/span&gt;(&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt;)
    }
}&lt;/pre&gt;
&lt;h1 id=&quot;heading-3&quot;&gt;判断文件是否存在&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;
)
&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;file_is_exists&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;os&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Stat&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;os&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;IsNotExist&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt;
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-4&quot;&gt;随机睡眠&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;math/rand&amp;#34;&lt;/span&gt;
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
)
&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;random_sleep&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;t&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;) {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;rand&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Seed&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Now&lt;/span&gt;().&lt;span style=&quot;color:#a6e22e&quot;&gt;Unix&lt;/span&gt;())
    &lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Sleep&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Duration&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;rand&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Intn&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;t&lt;/span&gt;)) &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Microsecond&lt;/span&gt;)
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-5&quot;&gt;字符串&lt;/h1&gt;
&lt;h2 id=&quot;heading-5.1&quot;&gt;随机的n位字符串&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;letterRunes&lt;/span&gt; = []rune(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&amp;#34;&lt;/span&gt;)

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;randStringRunes&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;n&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;int&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;rand&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Seed&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Now&lt;/span&gt;().&lt;span style=&quot;color:#a6e22e&quot;&gt;UnixNano&lt;/span&gt;())
    &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make([]&lt;span style=&quot;color:#66d9ef&quot;&gt;rune&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;n&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;] = &lt;span style=&quot;color:#a6e22e&quot;&gt;letterRunes&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;rand&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Intn&lt;/span&gt;(len(&lt;span style=&quot;color:#a6e22e&quot;&gt;letterRunes&lt;/span&gt;))]
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; string(&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt;)
}&lt;/pre&gt;
&lt;h2 id=&quot;heading-5.2&quot;&gt;字符串连接&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;bytes&amp;#34;&lt;/span&gt;
)
&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;string_concat&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;s&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;...&lt;/span&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;buffer&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;bytes&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Buffer&lt;/span&gt;
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;s&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;buffer&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;WriteString&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;)
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;buffer&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;String&lt;/span&gt;()
}&lt;/pre&gt;
&lt;h2 id=&quot;heading-5.3&quot;&gt;打印原始字符(换行符)&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;bytes&amp;#34;&lt;/span&gt;
)
&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;print_text&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;s&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;fmt&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Printf&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;%#v\n&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;s&lt;/span&gt;)
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-6&quot;&gt;检查元素是否在map中&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;check_in_map&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;ok&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt;]; &lt;span style=&quot;color:#a6e22e&quot;&gt;ok&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-7&quot;&gt;检查元素是否在list中&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;check_in_list&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;f&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;i&lt;/span&gt;] &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v&lt;/span&gt; {
            &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-8&quot;&gt;执行Linux命令&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; (
    &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;os/exec&amp;#34;&lt;/span&gt;
)
&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;exec_command&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;command&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;args&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;...&lt;/span&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) (&lt;span style=&quot;color:#66d9ef&quot;&gt;error&lt;/span&gt;, &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt;) {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; (
        &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;error&lt;/span&gt;
    )
    &lt;span style=&quot;color:#a6e22e&quot;&gt;cmd&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;exec&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Command&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;command&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;args&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;...&lt;/span&gt;)
    &lt;span style=&quot;color:#a6e22e&quot;&gt;cmd&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Start&lt;/span&gt;()
    &lt;span style=&quot;color:#a6e22e&quot;&gt;done&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; make(&lt;span style=&quot;color:#66d9ef&quot;&gt;chan&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;error&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;() {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;done&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;cmd&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Wait&lt;/span&gt;()
    }()

    &lt;span style=&quot;color:#66d9ef&quot;&gt;select&lt;/span&gt; {
    &lt;span style=&quot;color:#66d9ef&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;After&lt;/span&gt;(&lt;span style=&quot;color:#ae81ff&quot;&gt;600&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;*&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Second&lt;/span&gt;):
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; = &lt;span style=&quot;color:#a6e22e&quot;&gt;cmd&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Process&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Kill&lt;/span&gt;(); &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;log&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Error&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;failed to kill: %s, error: %s&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;cmd&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Path&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt;)
        }
        &lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt;() {
            &lt;span style=&quot;color:#f92672&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;done&lt;/span&gt; &lt;span style=&quot;color:#75715e&quot;&gt;// allow goroutine to exit
&lt;/span&gt;&lt;span style=&quot;color:#75715e&quot;&gt;&lt;/span&gt;        }()
        &lt;span style=&quot;color:#a6e22e&quot;&gt;log&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Info&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;process:%s killed&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;cmd&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Path&lt;/span&gt;)
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt;, &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
    &lt;span style=&quot;color:#66d9ef&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; = &lt;span style=&quot;color:#f92672&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;done&lt;/span&gt;:
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt;, &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
    }
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-9&quot;&gt;迭代文件目录&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;file_iter&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;path&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; {
    &lt;span style=&quot;color:#75715e&quot;&gt;// path must be abs path
&lt;/span&gt;&lt;span style=&quot;color:#75715e&quot;&gt;&lt;/span&gt;    &lt;span style=&quot;color:#66d9ef&quot;&gt;var&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;files&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;scripts&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;ioutil&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;ReadDir&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;path&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;script&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;scripts&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;script&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;IsDir&lt;/span&gt;() {
            &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;file_iter&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;filepath&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Join&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;path&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;script&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Name&lt;/span&gt;()))
        }
        &lt;span style=&quot;color:#a6e22e&quot;&gt;files&lt;/span&gt; = append(&lt;span style=&quot;color:#a6e22e&quot;&gt;files&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;filepath&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Join&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;path&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;script&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Name&lt;/span&gt;()))
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;files&lt;/span&gt;
}&lt;/pre&gt;
&lt;h1 id=&quot;heading-10&quot;&gt;求两列表的差集&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;difference&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt;,&lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; {
    &lt;span style=&quot;color:#75715e&quot;&gt;// len(a) &amp;lt; len(b), avoid all item of a belong to b
&lt;/span&gt;&lt;span style=&quot;color:#75715e&quot;&gt;&lt;/span&gt;    &lt;span style=&quot;color:#a6e22e&quot;&gt;m&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt;{}
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;x&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;a&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;m&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;x&lt;/span&gt;] = &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
    }
    &lt;span style=&quot;color:#a6e22e&quot;&gt;diff&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;{}
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;x&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;b&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;ok&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;m&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;x&lt;/span&gt;]; !&lt;span style=&quot;color:#a6e22e&quot;&gt;ok&lt;/span&gt; {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;diff&lt;/span&gt; = append(&lt;span style=&quot;color:#a6e22e&quot;&gt;diff&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;x&lt;/span&gt;)
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;diff&lt;/span&gt;
}&lt;/pre&gt;
&lt;h1 id=&quot;heading-11&quot;&gt;删除列表中重复的数据&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;RemoveDuplicates&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;elements&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;keys&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;map&lt;/span&gt;[&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;]&lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt;{}
    &lt;span style=&quot;color:#a6e22e&quot;&gt;result&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; []&lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;{}

    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;element&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;range&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;elements&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;keys&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;element&lt;/span&gt;]; !&lt;span style=&quot;color:#a6e22e&quot;&gt;value&lt;/span&gt; {
            &lt;span style=&quot;color:#a6e22e&quot;&gt;keys&lt;/span&gt;[&lt;span style=&quot;color:#a6e22e&quot;&gt;element&lt;/span&gt;] = &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
            &lt;span style=&quot;color:#a6e22e&quot;&gt;result&lt;/span&gt; = append(&lt;span style=&quot;color:#a6e22e&quot;&gt;result&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;element&lt;/span&gt;)
        }
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;result&lt;/span&gt;
}&lt;/pre&gt;
&lt;h1 id=&quot;heading-12&quot;&gt;参数校验&lt;/h1&gt;
&lt;h2 id=&quot;heading-12.1&quot;&gt;是否是IP&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;IsValidIP&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;key&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;IP&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;net&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;ParseIP&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;key&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;IP&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
    }

    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
}&lt;/pre&gt;
&lt;h2 id=&quot;heading-12.2&quot;&gt;是否是EMAIL&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#f92672&quot;&gt;import&lt;/span&gt; &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;regexp&amp;#34;&lt;/span&gt;

&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;IsValidEmail&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;key&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;string&lt;/span&gt;) &lt;span style=&quot;color:#66d9ef&quot;&gt;bool&lt;/span&gt; {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;re&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;regexp&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;MustCompile&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;^[a-zA-Z0-9.!#$%&amp;amp;&amp;#39;*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$&amp;#34;&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; !&lt;span style=&quot;color:#a6e22e&quot;&gt;re&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;MatchString&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;key&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;strings&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;HasSuffix&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;@upai.com&amp;#34;&lt;/span&gt;) &lt;span style=&quot;color:#f92672&quot;&gt;||&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;strings&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;HasSuffix&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;@huaban.com&amp;#34;&lt;/span&gt;) {
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;true&lt;/span&gt;
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;false&lt;/span&gt;
}&lt;/pre&gt;
&lt;h1 id=&quot;heading-13&quot;&gt;读取http响应的gz package&lt;/h1&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#66d9ef&quot;&gt;func&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;main&lt;/span&gt;() {
    &lt;span style=&quot;color:#a6e22e&quot;&gt;resp&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;_&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;HTTPRequest&lt;/span&gt;(&lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#e6db74&quot;&gt;&amp;#34;http://some-gz-package/package-name&amp;#34;&lt;/span&gt;, &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;defer&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;resp&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Body&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Close&lt;/span&gt;()

    &lt;span style=&quot;color:#a6e22e&quot;&gt;gz&lt;/span&gt;, &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;gzip&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;NewReader&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;resp&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Body&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;if&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;!=&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;nil&lt;/span&gt; {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;fmt&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Println&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;err&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Error&lt;/span&gt;())
        &lt;span style=&quot;color:#66d9ef&quot;&gt;return&lt;/span&gt;
    }
    &lt;span style=&quot;color:#66d9ef&quot;&gt;defer&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;gz&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Close&lt;/span&gt;()
    &lt;span style=&quot;color:#a6e22e&quot;&gt;scanner&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;:=&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;bufio&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;NewScanner&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;gz&lt;/span&gt;)
    &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;scanner&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Scan&lt;/span&gt;() {
        &lt;span style=&quot;color:#a6e22e&quot;&gt;fmt&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Println&lt;/span&gt;(&lt;span style=&quot;color:#a6e22e&quot;&gt;scanner&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;Text&lt;/span&gt;())
    }
}&lt;/pre&gt;

&lt;h1 id=&quot;heading-14&quot;&gt;编译&lt;/h1&gt;
&lt;h2 id=&quot;heading-14.1&quot;&gt;编译成不同系统的可执行文件&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 GOOS：目标可执行程序运行操作系统，支持 darwin，freebsd，linux，windows
&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 GOARCH：目标可执行程序操作系统构架，包括 386，amd64，arm
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#75715e&quot;&gt;# Golang version 1.5以前版本在首次交叉编译时还需要配置交叉编译环境：&lt;/span&gt;
CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 ./make.bash
CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;windows GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 ./make.bash&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;
 Mac下编译Linux, Windows平台的64位可执行程序：
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;$ CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 go build test.go
$ CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;windows GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 go build test.go&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 Linux下编译Mac, Windows平台的64位可执行程序：
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;$ CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;darwin GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 go build test.go
$ CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;windows GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 go build test.go&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 Windows下编译Mac, Linux平台的64位可执行程序：
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;$ SET CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;0SET GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;darwin3 SET GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 go build test.go
$ SET CGO_ENABLED&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;0&lt;/span&gt; SET GOOS&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;linux SET GOARCH&lt;span style=&quot;color:#f92672&quot;&gt;=&lt;/span&gt;amd64 go build test.go&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;heading-15&quot;&gt;测试&lt;/h1&gt;
&lt;p&gt;
  指定函数
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
 test
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;go test -run=&amp;#34;^TestAAA&amp;#34; ./...&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
 bench
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;go test -bench=&amp;#34;^BenchmarkAAA&amp;#34; -run=&amp;#34;^Benchmark&amp;#34; ./...&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;heading-16&quot;&gt;常见问题&lt;/h1&gt;
&lt;h2 id=&quot;heading-16.1&quot;&gt;docker内运行时区问题&lt;/h2&gt;

&lt;h3 id=&quot;heading-16.1.1&quot;&gt;解决方式&lt;/h3&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;apt-get install -y tzdata&lt;/pre&gt;

&lt;h2 id=&quot;heading-16.2&quot;&gt;map性能&lt;/h2&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;只读场景：sync.map &amp;gt; rwmutex &amp;gt;&amp;gt; mutex
读写场景（边读边写）：rwmutex &amp;gt; mutex &amp;gt;&amp;gt; sync.map
读写场景（读80% 写20%）：sync.map &amp;gt; rwmutex &amp;gt; mutex
读写场景（读98% 写2%）：sync.map &amp;gt; rwmutex &amp;gt;&amp;gt; mutex
只写场景：sync.map &amp;gt;&amp;gt; mutex &amp;gt; rwmutex&lt;/pre&gt;

&lt;h2 id=&quot;heading-16.3&quot;&gt;go mod tidy checking tree against&lt;/h2&gt;
&lt;p&gt;
  &lt;a href=&quot;https://github.com/golang/go/issues/35164&quot;&gt;https://github.com/golang/go/issues/35164&lt;/a&gt;
&lt;/p&gt;
&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;└&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;─&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;─&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;╼&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;mod&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tidy&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;finding&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;module&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;finding&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;module&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;render&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;downloading&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;
&lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;snow&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;builder&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;page&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;markup&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;orgmode&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;imports&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;verifying&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;module&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;checking&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tree&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;15584694&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;against&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tree&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;15683659&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;reading&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;https&lt;/span&gt;:&lt;span style=&quot;color:#75715e&quot;&gt;//goproxy.io/sumdb/sum.golang.org/tile/8/1/237: 404 Not Found
&lt;/span&gt;&lt;span style=&quot;color:#75715e&quot;&gt;&lt;/span&gt;    &lt;span style=&quot;color:#a6e22e&quot;&gt;server&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;response&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;not&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;found&lt;/span&gt;
&lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;snow&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;builder&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;page&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;markup&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;orgmode&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;imports&lt;/span&gt;
    &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;render&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;verifying&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;module&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;@&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;checking&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tree&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;15584694&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;against&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tree&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;15683659&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;reading&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;https&lt;/span&gt;:&lt;span style=&quot;color:#75715e&quot;&gt;//goproxy.io/sumdb/sum.golang.org/tile/8/1/237: 404 Not Found
&lt;/span&gt;&lt;span style=&quot;color:#75715e&quot;&gt;&lt;/span&gt;    &lt;span style=&quot;color:#a6e22e&quot;&gt;server&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;response&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;not&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;found&lt;/span&gt;&lt;/pre&gt;

&lt;pre style=&quot;color:#f8f8f2;background-color:#272822&quot;&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;└&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;─&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;─&lt;/span&gt;&lt;span style=&quot;color:#960050;background-color:#1e0010&quot;&gt;╼&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;GOSUMDB&lt;/span&gt;=&lt;span style=&quot;color:#a6e22e&quot;&gt;off&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;mod&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;tidy&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;finding&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;module&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;finding&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;module&lt;/span&gt; &lt;span style=&quot;color:#66d9ef&quot;&gt;for&lt;/span&gt; &lt;span style=&quot;color:#f92672&quot;&gt;package&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;render&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;downloading&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;found&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;in&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;
&lt;span style=&quot;color:#66d9ef&quot;&gt;go&lt;/span&gt;: &lt;span style=&quot;color:#a6e22e&quot;&gt;found&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;render&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;in&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;github&lt;/span&gt;.&lt;span style=&quot;color:#a6e22e&quot;&gt;com&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;honmaple&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;org&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;golang&lt;/span&gt; &lt;span style=&quot;color:#a6e22e&quot;&gt;v0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;.0&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;20230214143528&lt;/span&gt;&lt;span style=&quot;color:#f92672&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#ae81ff&quot;&gt;22&lt;/span&gt;&lt;span style=&quot;color:#a6e22e&quot;&gt;f61b3874c8&lt;/span&gt;&lt;/pre&gt;</content>
        <category term="Tech/Coding/Go"></category>
    </entry>
</feed>