function setCookie(name,value,expiredays){var exdate=new Date();exdate.setDate(exdate.getDate()+expiredays);document.cookie=name+"="+escape(value)+((expiredays===null)?"":";expires="+exdate.toGMTString()+";path=/");}
function getCookie(name){if(document.cookie.length>0){start=document.cookie.indexOf(name+"=");if(start!=-1){start=start+name.length+1;end=document.cookie.indexOf(";",start);if(end==-1)end=document.cookie.length;return unescape(document.cookie.substring(start,end));}}
return"";}
function changeTheme(name,css){removeTheme();var element=document.createElement('link');element.type="text/css";element.id="theme-css";element.rel="stylesheet";element.href=css;document.getElementsByTagName("head")[0].appendChild(element);setCookie('theme',name,3);}
function removeTheme(){var element=document.getElementById("theme-css");if(element){document.getElementsByTagName("head")[0].removeChild(element);setCookie("theme","default",3);}}
function toggleTheme(){theme=getCookie('theme');var index=themeList.indexOf(theme)+1;if(index>0&&index===themeList.length){return removeTheme();}
return changeTheme(themeList[index],themeCSS[themeList[index]]);}
var themeList=["tree"];var themeCSS={tree:"/static/css/main-tree.css",};var theme=getCookie('theme');if(themeList.indexOf(theme)>-1){changeTheme(theme,themeCSS[theme]);}
function decrypt(_this){var _next=_this.next();if(_this.prev().val()===""){_next.css("color","#C74451");_next.text("密码不能为空 !");}else{$.post("https://honmaple.com/api/encrypt",{password:_this.prev().val(),content:_this.parent().next().text()},function(response){var _parent=_this.parent().parent();_parent.hide();_parent.after(response.data);},'json').fail(function(){_next.css("color","#C74451");_next.text("密码错误 !");});}}
$(document).ready(function(){$("pre").css("max-height",$(window).height());var e=$(".back-to-top");$(window).on("scroll",function(){var offsetHeight=document.body.offsetHeight;var scrollHeight=document.body.scrollHeight;var navbarFixed=scrollHeight>offsetHeight&&scrollHeight-offsetHeight>245;e.toggleClass("back-to-top-on",window.pageYOffset>120);if(navbarFixed){$(".navbar").toggleClass("navbar-fixed",window.pageYOffset>120);if(!$("#navbar-title").length&&window.pageYOffset>120&&window.innerWidth>1280&&$(".entry-title").length==1){$(".navbar-header").after('<div class="navbar-text" id="navbar-title">'+$(".entry-title").text()+'</div>');}
if($("#navbar-title").length&&window.pageYOffset<120){$("#navbar-title").remove();}}
if($(".scrollbar").length){var a=$(window).scrollTop();var b=$(window).height();var c=$(document).height();if(c===b){$(".scrollbar").width("100%");}else{$(".scrollbar").width(a/(c-b)*100+"%");}}});e.click(function(){window.scrollTo(0,0);});$('[data-fancybox]').fancybox({protect:true});$("#entry-cover").click(function(){$(".entry-cover-left").fadeOut(600);$(".entry-cover").slideUp(600);});$(".entry-comment").click(function(){var dsq=document.createElement('script');var thr=document.getElementById('comment_thread')
dsq.type='text/javascript';dsq.src='https://utteranc.es/client.js';dsq.setAttribute('repo','honmaple/honmaple.github.io');dsq.setAttribute('issue-term',thr.getAttribute('issue-term'));dsq.setAttribute('label','comment');dsq.setAttribute('theme','github-light');dsq.setAttribute('crossorigin','anonymous');thr.appendChild(dsq);$(".entry-comment").parent().fadeToggle(800);});$(".entry-theme").click(function(){toggleTheme();});$(".navbar-logo").error(function(){var content='<span class="navbar-title">'+$(".navbar-logo").attr("alt")+'</span>';$(".navbar-logo").parent().html(content);});$('#entry-decrypt-password').keyup(function(e){if(e.keyCode==13){decrypt($(this).next());}});$(".entry-decrypt").click(function(e){decrypt($(this));});});function ISPC(){var userAgentInfo=navigator.userAgent;var agents=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var flag=true;for(var v=0;v<agents.length;v++){if(userAgentInfo.indexOf(agents[v])>-1){flag=false;break;}}
return flag;}
function Cover(){if(!String.prototype.format){String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!='undefined'?args[number]:match;});};}
if($(window).width()>600){$.ajax({type:"GET",url:"https://poem.honmaple.com/api/poem/random",dataType:"json",success:function(response){var title='<h3>{0}</h3>'.format(response.data.title);var author='<p>{0}</p>'.format(response.data.author);var paragraphs='<div>{0}</div>'.format(response.data.paragraphs.map(function(item){return"<p>{0}</p>".format(item);}).join(""));$(".entry-cover > .entry-cover-right > .entry-center").fadeOut(500,function(){$(this).html(title+author+paragraphs).fadeIn(500);});}});}
function scrollUp(){if($(window).scrollTop()<$(window).height()&&$(".entry-cover").length&&!$(".entry-cover").is(":hidden")){$("html, body").animate({scrollTop:0},600);}}
function scrollDown(){if($(window).scrollTop()<$(window).height()&&$(".entry-cover").length&&!$(".entry-cover").is(":hidden")){$(".entry-cover-left").fadeOut(300);$(".entry-cover").slideUp(600);}}
$(document).keydown(function(e){if(e.keyCode==40){scrollDown();}
if(e.keyCode==34){scrollDown();}});$(window).on('wheel',function(event){if(event.originalEvent.deltaY>0){scrollDown();}else{scrollUp();}});var startPos={Top:-1,Y:0};$("body").on('touchstart',function(e){startPos={Top:$(window).scrollTop(),Y:e.originalEvent.changedTouches[0].pageY};});$("body").on("touchend",function(e){var pageY=e.originalEvent.changedTouches[0].pageY-startPos.Y;if(pageY>0){scrollUp();}else if(pageY<0){scrollDown();}});}